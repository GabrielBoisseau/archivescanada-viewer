function OpenSeadragon(a){return new OpenSeadragon.Viewer(a)}!function(a,b,c,d){"use strict";function e(b,c){this.element=b,this.settings=a.extend({},i,c),this._defaults=i,this._name=h,this.init()}var f,g,h="archivesViewer",i={propertyName:"value"};a.extend(e.prototype,{init:function(){this.events={},this.initSpinner(),this.initOpenSeadragon(),this.bindEventControls(),g=a("#example_id"),g.on("change",function(){});var b=this;f.addHandler("open",function(){b.hideSpinner()}),f.addHandler("open-failed",function(){a(f.element).hide()}),f.addHandler("animation",function(){b.refreshZoomSlider()}),this.addHandler("sidebar",function(){console.log("custom toggle sidebar"),b.toggleSidebar()})},getContent:function(){return a(this.element).find(".av-content")},getSidebar:function(){return a(this.element).find(".av-sidebar")},openSidebar:function(){this.getSidebar().addClass("av-sidebar--opened"),this.getContent().addClass("av-content--condensed"),this.getEventControls("sidebar").addClass("is-checked")},closeSidebar:function(){this.getSidebar().removeClass("av-sidebar--opened"),this.getContent().removeClass("av-content--condensed"),this.getEventControls("sidebar").removeClass("is-checked")},toggleSidebar:function(){this.isSidebarOpened()?this.closeSidebar():this.openSidebar()},isSidebarOpened:function(){return this.getSidebar().hasClass("av-sidebar--opened")},initSpinner:function(){this.showSpinner()},getSpinner:function(){return a(this.element).find(".av-viewport .av-spinner")},showSpinner:function(){this.getSpinner().css("opacity",0).animate({opacity:1},800)},hideSpinner:function(){this.getSpinner().css("opacity",0).hide()},bindEventControls:function(){var b=this;this.getEventControls("sidebar").each(function(d,e){var f=b.getUniqueId(e),g=b.format("[data-avid={0}]",f);a(c).on("click",g,function(){var c=a(g).attr("data-toggle");b.raiseEvent(c)})})},getEventControls:function(b){return a(this.element).find("[data-toggle="+b+"]")},raiseEvent:function(a,b){var c=this.getHandler(a);c&&(b||(b={}),c(this,b))},addHandler:function(a,b,c){var d=this.events[a];d||(this.events[a]=d=[]),b&&"function"==typeof b&&(d[d.length]={handler:b,userData:c||null})},getHandler:function(a){var b=this.events[a];return b&&b.length?(b=1===b.length?[b[0]]:Array.apply(null,b),function(a,c){var d,e=b.length;for(d=0;d<e;d++)b[d]&&(c.eventSource=a,c.userData=b[d].userData,b[d].handler(c))}):null},initOpenSeadragon:function(){f!==d&&(f.destroy(),f=null),f=new OpenSeadragon({id:"openseadragon1",prefixUrl:"../node_modules/openseadragon/build/openseadragon/images/",tileSources:"https://openseadragon.github.io/example-images/highsmith/highsmith.dzi",showNavigator:!0,navigatorPosition:"BOTTOM_RIGHT",showNavigationControl:!1,minZoomImageRatio:1}),this.resetZoom()},resetZoom:function(){if(f===d)return console.error("Failed to reset zoom because Openseadragon has not been initialized yet.");var a=this.getZoomSlider();if(a.length>0){var b=f.viewport.getMinZoom(),c=f.viewport.getMaxZoom(),e=this.getZoomSteps(b,c);a.update({from:b,min:b,max:c,step:e})}},initZoomSlider:function(){},getZoomSlider:function(){return a(this.element).find(".az-zoom-slider")},getZoomSteps:function(a,b){return a===d&&(a=0),b===d&&(b=0),Math.round((b-a)/100,0)},refreshZoomSlider:function(){var b=f.viewport.getMinZoom(),c=f.viewport.getMaxZoom(),d=f.viewport.getZoom(!1),e=c-b,g=d!==b&&e>0?Math.round(100*(d-b)/e,0):0;a("*[data-bind='zoom']").each(function(b,c){a(c).text(g+"%")});f.viewport.getZoom(!0)},getUniqueId:function(b){var c=a(b).attr("data-avid");if(c)return c;var d=6,e="0123456789abcdef".split("");d||(d=Math.floor(Math.random()*e.length));for(var f="",g=0;g<d;g++)f+=e[Math.floor(Math.random()*e.length)];return 0==a("data-avid"+f).length?(a(b).attr("data-avid",f),f):this.getUniqueId(b)},format:function(a){for(var b=0;b<arguments.length-1;b++){var c=new RegExp("\\{"+b+"\\}","gi");a=a.replace(c,arguments[b+1])}return a},error:function(){var b=a('<div class="error"><span class="error-icon material-icons">error_outline</span><div class="error-text">An unexpected error occurred.<br />Please try again later.</div></div>');a(this.element).find(".archv").append(b)}}),a.fn.archivesViewer=function(b){return this.each(function(){a.data(this,"plugin_"+h)||a.data(this,"plugin_"+h,new e(this,b))})}}(jQuery,window,document),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports,require("jquery")):"function"==typeof define&&define.amd?define(["exports","jquery"],b):(a=a||self,b(a.bootstrap={},a.jQuery))}(this,function(a,b){"use strict";function c(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function d(a,b,d){return b&&c(a.prototype,b),d&&c(a,d),a}function e(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function f(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){e(a,b,c[b])})}return a}function g(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function h(a){return{}.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase()}function i(){return{bindType:va,delegateType:va,handle:function(a){if(b(a.target).is(this))return a.handleObj.handler.apply(this,arguments)}}}function j(a){var c=this,d=!1;return b(this).one(ya.TRANSITION_END,function(){d=!0}),setTimeout(function(){d||ya.triggerTransitionEnd(c)},a),this}function k(){b.fn.emulateTransitionEnd=j,b.event.special[ya.TRANSITION_END]=i()}function l(a){var b=!1;return function(){b||(b=!0,window.Promise.resolve().then(function(){b=!1,a()}))}}function m(a){var b=!1;return function(){b||(b=!0,setTimeout(function(){b=!1,a()},yb))}}function n(a){var b={};return a&&"[object Function]"===b.toString.call(a)}function o(a,b){if(1!==a.nodeType)return[];var c=a.ownerDocument.defaultView,d=c.getComputedStyle(a,null);return b?d[b]:d}function p(a){return"HTML"===a.nodeName?a:a.parentNode||a.host}function q(a){if(!a)return document.body;switch(a.nodeName){case"HTML":case"BODY":return a.ownerDocument.body;case"#document":return a.body}var b=o(a),c=b.overflow,d=b.overflowX;return/(auto|scroll|overlay)/.test(c+b.overflowY+d)?a:q(p(a))}function r(a){return 11===a?Cb:10===a?Db:Cb||Db}function s(a){if(!a)return document.documentElement;for(var b=r(10)?document.body:null,c=a.offsetParent||null;c===b&&a.nextElementSibling;)c=(a=a.nextElementSibling).offsetParent;var d=c&&c.nodeName;return d&&"BODY"!==d&&"HTML"!==d?-1!==["TH","TD","TABLE"].indexOf(c.nodeName)&&"static"===o(c,"position")?s(c):c:a?a.ownerDocument.documentElement:document.documentElement}function t(a){var b=a.nodeName;return"BODY"!==b&&("HTML"===b||s(a.firstElementChild)===a)}function u(a){return null!==a.parentNode?u(a.parentNode):a}function v(a,b){if(!(a&&a.nodeType&&b&&b.nodeType))return document.documentElement;var c=a.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_FOLLOWING,d=c?a:b,e=c?b:a,f=document.createRange();f.setStart(d,0),f.setEnd(e,0);var g=f.commonAncestorContainer;if(a!==g&&b!==g||d.contains(e))return t(g)?g:s(g);var h=u(a);return h.host?v(h.host,b):v(a,u(b).host)}function w(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",c="top"===b?"scrollTop":"scrollLeft",d=a.nodeName;if("BODY"===d||"HTML"===d){var e=a.ownerDocument.documentElement;return(a.ownerDocument.scrollingElement||e)[c]}return a[c]}function x(a,b){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=w(b,"top"),e=w(b,"left"),f=c?-1:1;return a.top+=d*f,a.bottom+=d*f,a.left+=e*f,a.right+=e*f,a}function y(a,b){var c="x"===b?"Left":"Top",d="Left"===c?"Right":"Bottom";return parseFloat(a["border"+c+"Width"],10)+parseFloat(a["border"+d+"Width"],10)}function z(a,b,c,d){return Math.max(b["offset"+a],b["scroll"+a],c["client"+a],c["offset"+a],c["scroll"+a],r(10)?parseInt(c["offset"+a])+parseInt(d["margin"+("Height"===a?"Top":"Left")])+parseInt(d["margin"+("Height"===a?"Bottom":"Right")]):0)}function A(a){var b=a.body,c=a.documentElement,d=r(10)&&getComputedStyle(c);return{height:z("Height",b,c,d),width:z("Width",b,c,d)}}function B(a){return Hb({},a,{right:a.left+a.width,bottom:a.top+a.height})}function C(a){var b={};try{if(r(10)){b=a.getBoundingClientRect();var c=w(a,"top"),d=w(a,"left");b.top+=c,b.left+=d,b.bottom+=c,b.right+=d}else b=a.getBoundingClientRect()}catch(l){}var e={left:b.left,top:b.top,width:b.right-b.left,height:b.bottom-b.top},f="HTML"===a.nodeName?A(a.ownerDocument):{},g=f.width||a.clientWidth||e.right-e.left,h=f.height||a.clientHeight||e.bottom-e.top,i=a.offsetWidth-g,j=a.offsetHeight-h;if(i||j){var k=o(a);i-=y(k,"x"),j-=y(k,"y"),e.width-=i,e.height-=j}return B(e)}function D(a,b){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=r(10),e="HTML"===b.nodeName,f=C(a),g=C(b),h=q(a),i=o(b),j=parseFloat(i.borderTopWidth,10),k=parseFloat(i.borderLeftWidth,10);c&&e&&(g.top=Math.max(g.top,0),g.left=Math.max(g.left,0));var l=B({top:f.top-g.top-j,left:f.left-g.left-k,width:f.width,height:f.height});if(l.marginTop=0,l.marginLeft=0,!d&&e){var m=parseFloat(i.marginTop,10),n=parseFloat(i.marginLeft,10);l.top-=j-m,l.bottom-=j-m,l.left-=k-n,l.right-=k-n,l.marginTop=m,l.marginLeft=n}return(d&&!c?b.contains(h):b===h&&"BODY"!==h.nodeName)&&(l=x(l,b)),l}function E(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=a.ownerDocument.documentElement,d=D(a,c),e=Math.max(c.clientWidth,window.innerWidth||0),f=Math.max(c.clientHeight,window.innerHeight||0),g=b?0:w(c),h=b?0:w(c,"left");return B({top:g-d.top+d.marginTop,left:h-d.left+d.marginLeft,width:e,height:f})}function F(a){var b=a.nodeName;if("BODY"===b||"HTML"===b)return!1;if("fixed"===o(a,"position"))return!0;var c=p(a);return!!c&&F(c)}function G(a){if(!a||!a.parentElement||r())return document.documentElement;for(var b=a.parentElement;b&&"none"===o(b,"transform");)b=b.parentElement;return b||document.documentElement}function H(a,b,c,d){var e=arguments.length>4&&void 0!==arguments[4]&&arguments[4],f={top:0,left:0},g=e?G(a):v(a,b);if("viewport"===d)f=E(g,e);else{var h=void 0;"scrollParent"===d?(h=q(p(b)),"BODY"===h.nodeName&&(h=a.ownerDocument.documentElement)):h="window"===d?a.ownerDocument.documentElement:d;var i=D(h,g,e);if("HTML"!==h.nodeName||F(g))f=i;else{var j=A(a.ownerDocument),k=j.height,l=j.width;f.top+=i.top-i.marginTop,f.bottom=k+i.top,f.left+=i.left-i.marginLeft,f.right=l+i.left}}c=c||0;var m="number"==typeof c;return f.left+=m?c:c.left||0,f.top+=m?c:c.top||0,f.right-=m?c:c.right||0,f.bottom-=m?c:c.bottom||0,f}function I(a){return a.width*a.height}function J(a,b,c,d,e){var f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===a.indexOf("auto"))return a;var g=H(c,d,f,e),h={top:{width:g.width,height:b.top-g.top},right:{width:g.right-b.right,height:g.height},bottom:{width:g.width,height:g.bottom-b.bottom},left:{width:b.left-g.left,height:g.height}},i=Object.keys(h).map(function(a){return Hb({key:a},h[a],{area:I(h[a])})}).sort(function(a,b){return b.area-a.area}),j=i.filter(function(a){var b=a.width,d=a.height;return b>=c.clientWidth&&d>=c.clientHeight}),k=j.length>0?j[0].key:i[0].key,l=a.split("-")[1];return k+(l?"-"+l:"")}function K(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return D(c,d?G(b):v(b,c),d)}function L(a){var b=a.ownerDocument.defaultView,c=b.getComputedStyle(a),d=parseFloat(c.marginTop||0)+parseFloat(c.marginBottom||0),e=parseFloat(c.marginLeft||0)+parseFloat(c.marginRight||0);return{width:a.offsetWidth+e,height:a.offsetHeight+d}}function M(a){var b={left:"right",right:"left",bottom:"top",top:"bottom"};return a.replace(/left|right|bottom|top/g,function(a){return b[a]})}function N(a,b,c){c=c.split("-")[0];var d=L(a),e={width:d.width,height:d.height},f=-1!==["right","left"].indexOf(c),g=f?"top":"left",h=f?"left":"top",i=f?"height":"width",j=f?"width":"height";return e[g]=b[g]+b[i]/2-d[i]/2,e[h]=c===h?b[h]-d[j]:b[M(h)],e}function O(a,b){return Array.prototype.find?a.find(b):a.filter(b)[0]}function P(a,b,c){if(Array.prototype.findIndex)return a.findIndex(function(a){return a[b]===c});var d=O(a,function(a){return a[b]===c});return a.indexOf(d)}function Q(a,b,c){return(void 0===c?a:a.slice(0,P(a,"name",c))).forEach(function(a){a.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var c=a.function||a.fn;a.enabled&&n(c)&&(b.offsets.popper=B(b.offsets.popper),b.offsets.reference=B(b.offsets.reference),b=c(b,a))}),b}function R(){if(!this.state.isDestroyed){var a={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};a.offsets.reference=K(this.state,this.popper,this.reference,this.options.positionFixed),a.placement=J(this.options.placement,a.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),a.originalPlacement=a.placement,a.positionFixed=this.options.positionFixed,a.offsets.popper=N(this.popper,a.offsets.reference,a.placement),a.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",a=Q(this.modifiers,a),this.state.isCreated?this.options.onUpdate(a):(this.state.isCreated=!0,this.options.onCreate(a))}}function S(a,b){return a.some(function(a){var c=a.name;return a.enabled&&c===b})}function T(a){for(var b=[!1,"ms","Webkit","Moz","O"],c=a.charAt(0).toUpperCase()+a.slice(1),d=0;d<b.length;d++){var e=b[d],f=e?""+e+c:a;if(void 0!==document.body.style[f])return f}return null}function U(){return this.state.isDestroyed=!0,S(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[T("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function V(a){var b=a.ownerDocument;return b?b.defaultView:window}function W(a,b,c,d){var e="BODY"===a.nodeName,f=e?a.ownerDocument.defaultView:a;f.addEventListener(b,c,{passive:!0}),e||W(q(f.parentNode),b,c,d),d.push(f)}function X(a,b,c,d){c.updateBound=d,V(a).addEventListener("resize",c.updateBound,{passive:!0});var e=q(a);return W(e,"scroll",c.updateBound,c.scrollParents),c.scrollElement=e,c.eventsEnabled=!0,c}function Y(){this.state.eventsEnabled||(this.state=X(this.reference,this.options,this.state,this.scheduleUpdate))}function Z(a,b){return V(a).removeEventListener("resize",b.updateBound),b.scrollParents.forEach(function(a){a.removeEventListener("scroll",b.updateBound)}),b.updateBound=null,b.scrollParents=[],b.scrollElement=null,b.eventsEnabled=!1,b}function $(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=Z(this.reference,this.state))}function _(a){return""!==a&&!isNaN(parseFloat(a))&&isFinite(a)}function aa(a,b){Object.keys(b).forEach(function(c){var d="";-1!==["width","height","top","right","bottom","left"].indexOf(c)&&_(b[c])&&(d="px"),a.style[c]=b[c]+d})}function ba(a,b){Object.keys(b).forEach(function(c){!1!==b[c]?a.setAttribute(c,b[c]):a.removeAttribute(c)})}function ca(a){return aa(a.instance.popper,a.styles),ba(a.instance.popper,a.attributes),a.arrowElement&&Object.keys(a.arrowStyles).length&&aa(a.arrowElement,a.arrowStyles),a}function da(a,b,c,d,e){var f=K(e,b,a,c.positionFixed),g=J(c.placement,f,b,a,c.modifiers.flip.boundariesElement,c.modifiers.flip.padding);return b.setAttribute("x-placement",g),aa(b,{position:c.positionFixed?"fixed":"absolute"}),c}function ea(a,b){var c=a.offsets,d=c.popper,e=c.reference,f=Math.round,g=Math.floor,h=function(a){return a},i=f(e.width),j=f(d.width),k=-1!==["left","right"].indexOf(a.placement),l=-1!==a.placement.indexOf("-"),m=i%2==j%2,n=i%2==1&&j%2==1,o=b?k||l||m?f:g:h,p=b?f:h;return{left:o(n&&!l&&b?d.left-1:d.left),top:p(d.top),bottom:p(d.bottom),right:o(d.right)}}function fa(a,b){var c=b.x,d=b.y,e=a.offsets.popper,f=O(a.instance.modifiers,function(a){return"applyStyle"===a.name}).gpuAcceleration;void 0!==f&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var g=void 0!==f?f:b.gpuAcceleration,h=s(a.instance.popper),i=C(h),j={position:e.position},k=ea(a,window.devicePixelRatio<2||!Ib),l="bottom"===c?"top":"bottom",m="right"===d?"left":"right",n=T("transform"),o=void 0,p=void 0;if(p="bottom"===l?"HTML"===h.nodeName?-h.clientHeight+k.bottom:-i.height+k.bottom:k.top,o="right"===m?"HTML"===h.nodeName?-h.clientWidth+k.right:-i.width+k.right:k.left,g&&n)j[n]="translate3d("+o+"px, "+p+"px, 0)",j[l]=0,j[m]=0,j.willChange="transform";else{var q="bottom"===l?-1:1,r="right"===m?-1:1;j[l]=p*q,j[m]=o*r,j.willChange=l+", "+m}var t={"x-placement":a.placement};return a.attributes=Hb({},t,a.attributes),a.styles=Hb({},j,a.styles),a.arrowStyles=Hb({},a.offsets.arrow,a.arrowStyles),a}function ga(a,b,c){var d=O(a,function(a){return a.name===b}),e=!!d&&a.some(function(a){return a.name===c&&a.enabled&&a.order<d.order});if(!e){var f="`"+b+"`",g="`"+c+"`";console.warn(g+" modifier is required by "+f+" modifier in order to work, be sure to include it before "+f+"!")}return e}function ha(a,b){var c;if(!ga(a.instance.modifiers,"arrow","keepTogether"))return a;var d=b.element;if("string"==typeof d){if(!(d=a.instance.popper.querySelector(d)))return a}else if(!a.instance.popper.contains(d))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),a;var e=a.placement.split("-")[0],f=a.offsets,g=f.popper,h=f.reference,i=-1!==["left","right"].indexOf(e),j=i?"height":"width",k=i?"Top":"Left",l=k.toLowerCase(),m=i?"left":"top",n=i?"bottom":"right",p=L(d)[j];h[n]-p<g[l]&&(a.offsets.popper[l]-=g[l]-(h[n]-p)),h[l]+p>g[n]&&(a.offsets.popper[l]+=h[l]+p-g[n]),a.offsets.popper=B(a.offsets.popper);var q=h[l]+h[j]/2-p/2,r=o(a.instance.popper),s=parseFloat(r["margin"+k],10),t=parseFloat(r["border"+k+"Width"],10),u=q-a.offsets.popper[l]-s-t;return u=Math.max(Math.min(g[j]-p,u),0),a.arrowElement=d,a.offsets.arrow=(c={},Gb(c,l,Math.round(u)),Gb(c,m,""),c),a}function ia(a){return"end"===a?"start":"start"===a?"end":a}function ja(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=Kb.indexOf(a),d=Kb.slice(c+1).concat(Kb.slice(0,c));return b?d.reverse():d}function ka(a,b){if(S(a.instance.modifiers,"inner"))return a;if(a.flipped&&a.placement===a.originalPlacement)return a;var c=H(a.instance.popper,a.instance.reference,b.padding,b.boundariesElement,a.positionFixed),d=a.placement.split("-")[0],e=M(d),f=a.placement.split("-")[1]||"",g=[];switch(b.behavior){case Lb.FLIP:g=[d,e];break;case Lb.CLOCKWISE:g=ja(d);break;case Lb.COUNTERCLOCKWISE:g=ja(d,!0);break;default:g=b.behavior}return g.forEach(function(h,i){if(d!==h||g.length===i+1)return a;d=a.placement.split("-")[0],e=M(d);var j=a.offsets.popper,k=a.offsets.reference,l=Math.floor,m="left"===d&&l(j.right)>l(k.left)||"right"===d&&l(j.left)<l(k.right)||"top"===d&&l(j.bottom)>l(k.top)||"bottom"===d&&l(j.top)<l(k.bottom),n=l(j.left)<l(c.left),o=l(j.right)>l(c.right),p=l(j.top)<l(c.top),q=l(j.bottom)>l(c.bottom),r="left"===d&&n||"right"===d&&o||"top"===d&&p||"bottom"===d&&q,s=-1!==["top","bottom"].indexOf(d),t=!!b.flipVariations&&(s&&"start"===f&&n||s&&"end"===f&&o||!s&&"start"===f&&p||!s&&"end"===f&&q);(m||r||t)&&(a.flipped=!0,(m||r)&&(d=g[i+1]),t&&(f=ia(f)),a.placement=d+(f?"-"+f:""),a.offsets.popper=Hb({},a.offsets.popper,N(a.instance.popper,a.offsets.reference,a.placement)),a=Q(a.instance.modifiers,a,"flip"))}),a}function la(a){var b=a.offsets,c=b.popper,d=b.reference,e=a.placement.split("-")[0],f=Math.floor,g=-1!==["top","bottom"].indexOf(e),h=g?"right":"bottom",i=g?"left":"top",j=g?"width":"height";return c[h]<f(d[i])&&(a.offsets.popper[i]=f(d[i])-c[j]),c[i]>f(d[h])&&(a.offsets.popper[i]=f(d[h])),a}function ma(a,b,c,d){var e=a.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),f=+e[1],g=e[2];if(!f)return a;if(0===g.indexOf("%")){var h=void 0;switch(g){case"%p":h=c;break;case"%":case"%r":default:h=d}return B(h)[b]/100*f}if("vh"===g||"vw"===g){return("vh"===g?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*f}return f}function na(a,b,c,d){var e=[0,0],f=-1!==["right","left"].indexOf(d),g=a.split(/(\+|\-)/).map(function(a){return a.trim()}),h=g.indexOf(O(g,function(a){return-1!==a.search(/,|\s/)}));g[h]&&-1===g[h].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var i=/\s*,\s*|\s+/,j=-1!==h?[g.slice(0,h).concat([g[h].split(i)[0]]),[g[h].split(i)[1]].concat(g.slice(h+1))]:[g];return j=j.map(function(a,d){var e=(1===d?!f:f)?"height":"width",g=!1;return a.reduce(function(a,b){return""===a[a.length-1]&&-1!==["+","-"].indexOf(b)?(a[a.length-1]=b,g=!0,a):g?(a[a.length-1]+=b,g=!1,a):a.concat(b)},[]).map(function(a){return ma(a,e,b,c)})}),j.forEach(function(a,b){a.forEach(function(c,d){_(c)&&(e[b]+=c*("-"===a[d-1]?-1:1))})}),e}function oa(a,b){var c=b.offset,d=a.placement,e=a.offsets,f=e.popper,g=e.reference,h=d.split("-")[0],i=void 0;return i=_(+c)?[+c,0]:na(c,f,g,h),"left"===h?(f.top+=i[0],f.left-=i[1]):"right"===h?(f.top+=i[0],f.left+=i[1]):"top"===h?(f.left+=i[0],f.top-=i[1]):"bottom"===h&&(f.left+=i[0],f.top+=i[1]),a.popper=f,a}function pa(a,b){var c=b.boundariesElement||s(a.instance.popper);a.instance.reference===c&&(c=s(c));var d=T("transform"),e=a.instance.popper.style,f=e.top,g=e.left,h=e[d];e.top="",e.left="",e[d]="";var i=H(a.instance.popper,a.instance.reference,b.padding,c,a.positionFixed);e.top=f,e.left=g,e[d]=h,b.boundaries=i;var j=b.priority,k=a.offsets.popper,l={primary:function(a){var c=k[a];return k[a]<i[a]&&!b.escapeWithReference&&(c=Math.max(k[a],i[a])),Gb({},a,c)},secondary:function(a){var c="right"===a?"left":"top",d=k[c];return k[a]>i[a]&&!b.escapeWithReference&&(d=Math.min(k[c],i[a]-("right"===a?k.width:k.height))),Gb({},c,d)}};return j.forEach(function(a){var b=-1!==["left","top"].indexOf(a)?"primary":"secondary";k=Hb({},k,l[b](a))}),a.offsets.popper=k,a}function qa(a){var b=a.placement,c=b.split("-")[0],d=b.split("-")[1];if(d){var e=a.offsets,f=e.reference,g=e.popper,h=-1!==["bottom","top"].indexOf(c),i=h?"left":"top",j=h?"width":"height",k={start:Gb({},i,f[i]),end:Gb({},i,f[i]+f[j]-g[j])};a.offsets.popper=Hb({},g,k[d])}return a}function ra(a){if(!ga(a.instance.modifiers,"hide","preventOverflow"))return a;var b=a.offsets.reference,c=O(a.instance.modifiers,function(a){return"preventOverflow"===a.name}).boundaries;if(b.bottom<c.top||b.left>c.right||b.top>c.bottom||b.right<c.left){if(!0===a.hide)return a;a.hide=!0,a.attributes["x-out-of-boundaries"]=""}else{if(!1===a.hide)return a;a.hide=!1,a.attributes["x-out-of-boundaries"]=!1}return a}function sa(a){var b=a.placement,c=b.split("-")[0],d=a.offsets,e=d.popper,f=d.reference,g=-1!==["left","right"].indexOf(c),h=-1===["top","left"].indexOf(c);return e[g?"left":"top"]=f[c]-(h?e[g?"width":"height"]:0),a.placement=M(b),a.offsets.popper=B(e),a}function ta(a,b){var c=a.nodeName.toLowerCase();if(-1!==b.indexOf(c))return-1===uc.indexOf(c)||Boolean(a.nodeValue.match(xc)||a.nodeValue.match(yc));for(var d=b.filter(function(a){return a instanceof RegExp}),e=0,f=d.length;e<f;e++)if(c.match(d[e]))return!0;return!1}function ua(a,b,c){if(0===a.length)return a;if(c&&"function"==typeof c)return c(a);for(var d=new window.DOMParser,e=d.parseFromString(a,"text/html"),f=Object.keys(b),g=[].slice.call(e.body.querySelectorAll("*")),h=function(a,c){var d=g[a],e=d.nodeName.toLowerCase();if(-1===f.indexOf(d.nodeName.toLowerCase()))return d.parentNode.removeChild(d),"continue";var h=[].slice.call(d.attributes),i=[].concat(b["*"]||[],b[e]||[]);h.forEach(function(a){ta(a,i)||d.removeAttribute(a.nodeName)})},i=0,j=g.length;i<j;i++){h(i,j)}return e.body.innerHTML}b=b&&b.hasOwnProperty("default")?b.default:b;var va="transitionend",wa=1e6,xa=1e3,ya={TRANSITION_END:"bsTransitionEnd",getUID:function(a){do{a+=~~(Math.random()*wa)}while(document.getElementById(a));return a},getSelectorFromElement:function(a){var b=a.getAttribute("data-target");if(!b||"#"===b){var c=a.getAttribute("href");b=c&&"#"!==c?c.trim():""}try{return document.querySelector(b)?b:null}catch(d){return null}},getTransitionDurationFromElement:function(a){if(!a)return 0;var c=b(a).css("transition-duration"),d=b(a).css("transition-delay"),e=parseFloat(c),f=parseFloat(d);return e||f?(c=c.split(",")[0],d=d.split(",")[0],(parseFloat(c)+parseFloat(d))*xa):0},reflow:function(a){return a.offsetHeight},triggerTransitionEnd:function(a){b(a).trigger(va)},supportsTransitionEnd:function(){return Boolean(va)},isElement:function(a){return(a[0]||a).nodeType},typeCheckConfig:function(a,b,c){for(var d in c)if(Object.prototype.hasOwnProperty.call(c,d)){var e=c[d],f=b[d],g=f&&ya.isElement(f)?"element":h(f);if(!new RegExp(e).test(g))throw new Error(a.toUpperCase()+': Option "'+d+'" provided type "'+g+'" but expected type "'+e+'".')}},findShadowRoot:function(a){if(!document.documentElement.attachShadow)return null;if("function"==typeof a.getRootNode){var b=a.getRootNode();return b instanceof ShadowRoot?b:null}return a instanceof ShadowRoot?a:a.parentNode?ya.findShadowRoot(a.parentNode):null}};k();var za="alert",Aa="4.3.1",Ba="bs.alert",Ca="."+Ba,Da=".data-api",Ea=b.fn[za],Fa={DISMISS:'[data-dismiss="alert"]'},Ga={CLOSE:"close"+Ca,CLOSED:"closed"+Ca,CLICK_DATA_API:"click"+Ca+Da},Ha={ALERT:"alert",FADE:"fade",SHOW:"show"},Ia=function(){function a(a){this._element=a}var c=a.prototype;return c.close=function(a){var b=this._element;a&&(b=this._getRootElement(a)),this._triggerCloseEvent(b).isDefaultPrevented()||this._removeElement(b)},c.dispose=function(){b.removeData(this._element,Ba),this._element=null},c._getRootElement=function(a){var c=ya.getSelectorFromElement(a),d=!1;return c&&(d=document.querySelector(c)),d||(d=b(a).closest("."+Ha.ALERT)[0]),d},c._triggerCloseEvent=function(a){var c=b.Event(Ga.CLOSE);return b(a).trigger(c),c},c._removeElement=function(a){var c=this;if(b(a).removeClass(Ha.SHOW),!b(a).hasClass(Ha.FADE))return void this._destroyElement(a);var d=ya.getTransitionDurationFromElement(a);b(a).one(ya.TRANSITION_END,function(b){return c._destroyElement(a,b)}).emulateTransitionEnd(d)},c._destroyElement=function(a){b(a).detach().trigger(Ga.CLOSED).remove()},a._jQueryInterface=function(c){return this.each(function(){var d=b(this),e=d.data(Ba);e||(e=new a(this),d.data(Ba,e)),"close"===c&&e[c](this)})},a._handleDismiss=function(a){return function(b){b&&b.preventDefault(),a.close(this)}},d(a,null,[{key:"VERSION",get:function(){return Aa}}]),a}();b(document).on(Ga.CLICK_DATA_API,Fa.DISMISS,Ia._handleDismiss(new Ia)),b.fn[za]=Ia._jQueryInterface,b.fn[za].Constructor=Ia,b.fn[za].noConflict=function(){return b.fn[za]=Ea,Ia._jQueryInterface};var Ja="button",Ka="4.3.1",La="bs.button",Ma="."+La,Na=".data-api",Oa=b.fn[Ja],Pa={ACTIVE:"active",BUTTON:"btn",FOCUS:"focus"},Qa={DATA_TOGGLE_CARROT:'[data-toggle^="button"]',DATA_TOGGLE:'[data-toggle="buttons"]',INPUT:'input:not([type="hidden"])',ACTIVE:".active",BUTTON:".btn"},Ra={CLICK_DATA_API:"click"+Ma+Na,FOCUS_BLUR_DATA_API:"focus"+Ma+Na+" blur"+Ma+Na},Sa=function(){function a(a){this._element=a}var c=a.prototype;return c.toggle=function(){var a=!0,c=!0,d=b(this._element).closest(Qa.DATA_TOGGLE)[0];if(d){var e=this._element.querySelector(Qa.INPUT);if(e){if("radio"===e.type)if(e.checked&&this._element.classList.contains(Pa.ACTIVE))a=!1;else{var f=d.querySelector(Qa.ACTIVE);f&&b(f).removeClass(Pa.ACTIVE)}if(a){if(e.hasAttribute("disabled")||d.hasAttribute("disabled")||e.classList.contains("disabled")||d.classList.contains("disabled"))return;e.checked=!this._element.classList.contains(Pa.ACTIVE),b(e).trigger("change")}e.focus(),c=!1}}c&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(Pa.ACTIVE)),a&&b(this._element).toggleClass(Pa.ACTIVE)},c.dispose=function(){b.removeData(this._element,La),this._element=null},a._jQueryInterface=function(c){return this.each(function(){var d=b(this).data(La);d||(d=new a(this),b(this).data(La,d)),"toggle"===c&&d[c]()})},d(a,null,[{key:"VERSION",get:function(){return Ka}}]),a}();b(document).on(Ra.CLICK_DATA_API,Qa.DATA_TOGGLE_CARROT,function(a){a.preventDefault();var c=a.target;b(c).hasClass(Pa.BUTTON)||(c=b(c).closest(Qa.BUTTON)),Sa._jQueryInterface.call(b(c),"toggle")}).on(Ra.FOCUS_BLUR_DATA_API,Qa.DATA_TOGGLE_CARROT,function(a){var c=b(a.target).closest(Qa.BUTTON)[0];b(c).toggleClass(Pa.FOCUS,/^focus(in)?$/.test(a.type))}),b.fn[Ja]=Sa._jQueryInterface,b.fn[Ja].Constructor=Sa,b.fn[Ja].noConflict=function(){return b.fn[Ja]=Oa,Sa._jQueryInterface};var Ta="carousel",Ua="4.3.1",Va="bs.carousel",Wa="."+Va,Xa=".data-api",Ya=b.fn[Ta],Za=37,$a=39,_a=500,ab=40,bb={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},cb={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},db={NEXT:"next",PREV:"prev",LEFT:"left",RIGHT:"right"},eb={SLIDE:"slide"+Wa,SLID:"slid"+Wa,KEYDOWN:"keydown"+Wa,MOUSEENTER:"mouseenter"+Wa,MOUSELEAVE:"mouseleave"+Wa,TOUCHSTART:"touchstart"+Wa,TOUCHMOVE:"touchmove"+Wa,TOUCHEND:"touchend"+Wa,POINTERDOWN:"pointerdown"+Wa,POINTERUP:"pointerup"+Wa,DRAG_START:"dragstart"+Wa,LOAD_DATA_API:"load"+Wa+Xa,CLICK_DATA_API:"click"+Wa+Xa},fb={CAROUSEL:"carousel",ACTIVE:"active",SLIDE:"slide",RIGHT:"carousel-item-right",LEFT:"carousel-item-left",NEXT:"carousel-item-next",PREV:"carousel-item-prev",ITEM:"carousel-item",POINTER_EVENT:"pointer-event"},gb={ACTIVE:".active",ACTIVE_ITEM:".active.carousel-item",ITEM:".carousel-item",ITEM_IMG:".carousel-item img",NEXT_PREV:".carousel-item-next, .carousel-item-prev",INDICATORS:".carousel-indicators",DATA_SLIDE:"[data-slide], [data-slide-to]",DATA_RIDE:'[data-ride="carousel"]'},hb={TOUCH:"touch",PEN:"pen"},ib=function(){function a(a,b){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(b),this._element=a,this._indicatorsElement=this._element.querySelector(gb.INDICATORS),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var c=a.prototype;return c.next=function(){this._isSliding||this._slide(db.NEXT)},c.nextWhenVisible=function(){!document.hidden&&b(this._element).is(":visible")&&"hidden"!==b(this._element).css("visibility")&&this.next()},c.prev=function(){this._isSliding||this._slide(db.PREV)},c.pause=function(a){a||(this._isPaused=!0),this._element.querySelector(gb.NEXT_PREV)&&(ya.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},c.cycle=function(a){a||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},c.to=function(a){var c=this;this._activeElement=this._element.querySelector(gb.ACTIVE_ITEM);var d=this._getItemIndex(this._activeElement);if(!(a>this._items.length-1||a<0)){if(this._isSliding)return void b(this._element).one(eb.SLID,function(){return c.to(a)});if(d===a)return this.pause(),void this.cycle();var e=a>d?db.NEXT:db.PREV;this._slide(e,this._items[a])}},c.dispose=function(){b(this._element).off(Wa),b.removeData(this._element,Va),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},c._getConfig=function(a){return a=f({},bb,a),ya.typeCheckConfig(Ta,a,cb),a},c._handleSwipe=function(){
var a=Math.abs(this.touchDeltaX);if(!(a<=ab)){var b=a/this.touchDeltaX;b>0&&this.prev(),b<0&&this.next()}},c._addEventListeners=function(){var a=this;this._config.keyboard&&b(this._element).on(eb.KEYDOWN,function(b){return a._keydown(b)}),"hover"===this._config.pause&&b(this._element).on(eb.MOUSEENTER,function(b){return a.pause(b)}).on(eb.MOUSELEAVE,function(b){return a.cycle(b)}),this._config.touch&&this._addTouchEventListeners()},c._addTouchEventListeners=function(){var a=this;if(this._touchSupported){var c=function(b){a._pointerEvent&&hb[b.originalEvent.pointerType.toUpperCase()]?a.touchStartX=b.originalEvent.clientX:a._pointerEvent||(a.touchStartX=b.originalEvent.touches[0].clientX)},d=function(b){b.originalEvent.touches&&b.originalEvent.touches.length>1?a.touchDeltaX=0:a.touchDeltaX=b.originalEvent.touches[0].clientX-a.touchStartX},e=function(b){a._pointerEvent&&hb[b.originalEvent.pointerType.toUpperCase()]&&(a.touchDeltaX=b.originalEvent.clientX-a.touchStartX),a._handleSwipe(),"hover"===a._config.pause&&(a.pause(),a.touchTimeout&&clearTimeout(a.touchTimeout),a.touchTimeout=setTimeout(function(b){return a.cycle(b)},_a+a._config.interval))};b(this._element.querySelectorAll(gb.ITEM_IMG)).on(eb.DRAG_START,function(a){return a.preventDefault()}),this._pointerEvent?(b(this._element).on(eb.POINTERDOWN,function(a){return c(a)}),b(this._element).on(eb.POINTERUP,function(a){return e(a)}),this._element.classList.add(fb.POINTER_EVENT)):(b(this._element).on(eb.TOUCHSTART,function(a){return c(a)}),b(this._element).on(eb.TOUCHMOVE,function(a){return d(a)}),b(this._element).on(eb.TOUCHEND,function(a){return e(a)}))}},c._keydown=function(a){if(!/input|textarea/i.test(a.target.tagName))switch(a.which){case Za:a.preventDefault(),this.prev();break;case $a:a.preventDefault(),this.next()}},c._getItemIndex=function(a){return this._items=a&&a.parentNode?[].slice.call(a.parentNode.querySelectorAll(gb.ITEM)):[],this._items.indexOf(a)},c._getItemByDirection=function(a,b){var c=a===db.NEXT,d=a===db.PREV,e=this._getItemIndex(b),f=this._items.length-1;if((d&&0===e||c&&e===f)&&!this._config.wrap)return b;var g=a===db.PREV?-1:1,h=(e+g)%this._items.length;return-1===h?this._items[this._items.length-1]:this._items[h]},c._triggerSlideEvent=function(a,c){var d=this._getItemIndex(a),e=this._getItemIndex(this._element.querySelector(gb.ACTIVE_ITEM)),f=b.Event(eb.SLIDE,{relatedTarget:a,direction:c,from:e,to:d});return b(this._element).trigger(f),f},c._setActiveIndicatorElement=function(a){if(this._indicatorsElement){var c=[].slice.call(this._indicatorsElement.querySelectorAll(gb.ACTIVE));b(c).removeClass(fb.ACTIVE);var d=this._indicatorsElement.children[this._getItemIndex(a)];d&&b(d).addClass(fb.ACTIVE)}},c._slide=function(a,c){var d,e,f,g=this,h=this._element.querySelector(gb.ACTIVE_ITEM),i=this._getItemIndex(h),j=c||h&&this._getItemByDirection(a,h),k=this._getItemIndex(j),l=Boolean(this._interval);if(a===db.NEXT?(d=fb.LEFT,e=fb.NEXT,f=db.LEFT):(d=fb.RIGHT,e=fb.PREV,f=db.RIGHT),j&&b(j).hasClass(fb.ACTIVE))return void(this._isSliding=!1);if(!this._triggerSlideEvent(j,f).isDefaultPrevented()&&h&&j){this._isSliding=!0,l&&this.pause(),this._setActiveIndicatorElement(j);var m=b.Event(eb.SLID,{relatedTarget:j,direction:f,from:i,to:k});if(b(this._element).hasClass(fb.SLIDE)){b(j).addClass(e),ya.reflow(j),b(h).addClass(d),b(j).addClass(d);var n=parseInt(j.getAttribute("data-interval"),10);n?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=n):this._config.interval=this._config.defaultInterval||this._config.interval;var o=ya.getTransitionDurationFromElement(h);b(h).one(ya.TRANSITION_END,function(){b(j).removeClass(d+" "+e).addClass(fb.ACTIVE),b(h).removeClass(fb.ACTIVE+" "+e+" "+d),g._isSliding=!1,setTimeout(function(){return b(g._element).trigger(m)},0)}).emulateTransitionEnd(o)}else b(h).removeClass(fb.ACTIVE),b(j).addClass(fb.ACTIVE),this._isSliding=!1,b(this._element).trigger(m);l&&this.cycle()}},a._jQueryInterface=function(c){return this.each(function(){var d=b(this).data(Va),e=f({},bb,b(this).data());"object"==typeof c&&(e=f({},e,c));var g="string"==typeof c?c:e.slide;if(d||(d=new a(this,e),b(this).data(Va,d)),"number"==typeof c)d.to(c);else if("string"==typeof g){if(void 0===d[g])throw new TypeError('No method named "'+g+'"');d[g]()}else e.interval&&e.ride&&(d.pause(),d.cycle())})},a._dataApiClickHandler=function(c){var d=ya.getSelectorFromElement(this);if(d){var e=b(d)[0];if(e&&b(e).hasClass(fb.CAROUSEL)){var g=f({},b(e).data(),b(this).data()),h=this.getAttribute("data-slide-to");h&&(g.interval=!1),a._jQueryInterface.call(b(e),g),h&&b(e).data(Va).to(h),c.preventDefault()}}},d(a,null,[{key:"VERSION",get:function(){return Ua}},{key:"Default",get:function(){return bb}}]),a}();b(document).on(eb.CLICK_DATA_API,gb.DATA_SLIDE,ib._dataApiClickHandler),b(window).on(eb.LOAD_DATA_API,function(){for(var a=[].slice.call(document.querySelectorAll(gb.DATA_RIDE)),c=0,d=a.length;c<d;c++){var e=b(a[c]);ib._jQueryInterface.call(e,e.data())}}),b.fn[Ta]=ib._jQueryInterface,b.fn[Ta].Constructor=ib,b.fn[Ta].noConflict=function(){return b.fn[Ta]=Ya,ib._jQueryInterface};var jb="collapse",kb="4.3.1",lb="bs.collapse",mb="."+lb,nb=".data-api",ob=b.fn[jb],pb={toggle:!0,parent:""},qb={toggle:"boolean",parent:"(string|element)"},rb={SHOW:"show"+mb,SHOWN:"shown"+mb,HIDE:"hide"+mb,HIDDEN:"hidden"+mb,CLICK_DATA_API:"click"+mb+nb},sb={SHOW:"show",COLLAPSE:"collapse",COLLAPSING:"collapsing",COLLAPSED:"collapsed"},tb={WIDTH:"width",HEIGHT:"height"},ub={ACTIVES:".show, .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'},vb=function(){function a(a,b){this._isTransitioning=!1,this._element=a,this._config=this._getConfig(b),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+a.id+'"],[data-toggle="collapse"][data-target="#'+a.id+'"]'));for(var c=[].slice.call(document.querySelectorAll(ub.DATA_TOGGLE)),d=0,e=c.length;d<e;d++){var f=c[d],g=ya.getSelectorFromElement(f),h=[].slice.call(document.querySelectorAll(g)).filter(function(b){return b===a});null!==g&&h.length>0&&(this._selector=g,this._triggerArray.push(f))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var c=a.prototype;return c.toggle=function(){b(this._element).hasClass(sb.SHOW)?this.hide():this.show()},c.show=function(){var c=this;if(!this._isTransitioning&&!b(this._element).hasClass(sb.SHOW)){var d,e;if(this._parent&&(d=[].slice.call(this._parent.querySelectorAll(ub.ACTIVES)).filter(function(a){return"string"==typeof c._config.parent?a.getAttribute("data-parent")===c._config.parent:a.classList.contains(sb.COLLAPSE)}),0===d.length&&(d=null)),!(d&&(e=b(d).not(this._selector).data(lb))&&e._isTransitioning)){var f=b.Event(rb.SHOW);if(b(this._element).trigger(f),!f.isDefaultPrevented()){d&&(a._jQueryInterface.call(b(d).not(this._selector),"hide"),e||b(d).data(lb,null));var g=this._getDimension();b(this._element).removeClass(sb.COLLAPSE).addClass(sb.COLLAPSING),this._element.style[g]=0,this._triggerArray.length&&b(this._triggerArray).removeClass(sb.COLLAPSED).attr("aria-expanded",!0),this.setTransitioning(!0);var h=function(){b(c._element).removeClass(sb.COLLAPSING).addClass(sb.COLLAPSE).addClass(sb.SHOW),c._element.style[g]="",c.setTransitioning(!1),b(c._element).trigger(rb.SHOWN)},i=g[0].toUpperCase()+g.slice(1),j="scroll"+i,k=ya.getTransitionDurationFromElement(this._element);b(this._element).one(ya.TRANSITION_END,h).emulateTransitionEnd(k),this._element.style[g]=this._element[j]+"px"}}}},c.hide=function(){var a=this;if(!this._isTransitioning&&b(this._element).hasClass(sb.SHOW)){var c=b.Event(rb.HIDE);if(b(this._element).trigger(c),!c.isDefaultPrevented()){var d=this._getDimension();this._element.style[d]=this._element.getBoundingClientRect()[d]+"px",ya.reflow(this._element),b(this._element).addClass(sb.COLLAPSING).removeClass(sb.COLLAPSE).removeClass(sb.SHOW);var e=this._triggerArray.length;if(e>0)for(var f=0;f<e;f++){var g=this._triggerArray[f],h=ya.getSelectorFromElement(g);if(null!==h){var i=b([].slice.call(document.querySelectorAll(h)));i.hasClass(sb.SHOW)||b(g).addClass(sb.COLLAPSED).attr("aria-expanded",!1)}}this.setTransitioning(!0);var j=function(){a.setTransitioning(!1),b(a._element).removeClass(sb.COLLAPSING).addClass(sb.COLLAPSE).trigger(rb.HIDDEN)};this._element.style[d]="";var k=ya.getTransitionDurationFromElement(this._element);b(this._element).one(ya.TRANSITION_END,j).emulateTransitionEnd(k)}}},c.setTransitioning=function(a){this._isTransitioning=a},c.dispose=function(){b.removeData(this._element,lb),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},c._getConfig=function(a){return a=f({},pb,a),a.toggle=Boolean(a.toggle),ya.typeCheckConfig(jb,a,qb),a},c._getDimension=function(){return b(this._element).hasClass(tb.WIDTH)?tb.WIDTH:tb.HEIGHT},c._getParent=function(){var c,d=this;ya.isElement(this._config.parent)?(c=this._config.parent,void 0!==this._config.parent.jquery&&(c=this._config.parent[0])):c=document.querySelector(this._config.parent);var e='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',f=[].slice.call(c.querySelectorAll(e));return b(f).each(function(b,c){d._addAriaAndCollapsedClass(a._getTargetFromElement(c),[c])}),c},c._addAriaAndCollapsedClass=function(a,c){var d=b(a).hasClass(sb.SHOW);c.length&&b(c).toggleClass(sb.COLLAPSED,!d).attr("aria-expanded",d)},a._getTargetFromElement=function(a){var b=ya.getSelectorFromElement(a);return b?document.querySelector(b):null},a._jQueryInterface=function(c){return this.each(function(){var d=b(this),e=d.data(lb),g=f({},pb,d.data(),"object"==typeof c&&c?c:{});if(!e&&g.toggle&&/show|hide/.test(c)&&(g.toggle=!1),e||(e=new a(this,g),d.data(lb,e)),"string"==typeof c){if(void 0===e[c])throw new TypeError('No method named "'+c+'"');e[c]()}})},d(a,null,[{key:"VERSION",get:function(){return kb}},{key:"Default",get:function(){return pb}}]),a}();b(document).on(rb.CLICK_DATA_API,ub.DATA_TOGGLE,function(a){"A"===a.currentTarget.tagName&&a.preventDefault();var c=b(this),d=ya.getSelectorFromElement(this),e=[].slice.call(document.querySelectorAll(d));b(e).each(function(){var a=b(this),d=a.data(lb),e=d?"toggle":c.data();vb._jQueryInterface.call(a,e)})}),b.fn[jb]=vb._jQueryInterface,b.fn[jb].Constructor=vb,b.fn[jb].noConflict=function(){return b.fn[jb]=ob,vb._jQueryInterface};for(var wb="undefined"!=typeof window&&"undefined"!=typeof document,xb=["Edge","Trident","Firefox"],yb=0,zb=0;zb<xb.length;zb+=1)if(wb&&navigator.userAgent.indexOf(xb[zb])>=0){yb=1;break}var Ab=wb&&window.Promise,Bb=Ab?l:m,Cb=wb&&!(!window.MSInputMethodContext||!document.documentMode),Db=wb&&/MSIE 10/.test(navigator.userAgent),Eb=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},Fb=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),Gb=function(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a},Hb=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},Ib=wb&&/Firefox/i.test(navigator.userAgent),Jb=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],Kb=Jb.slice(3),Lb={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"},Mb={shift:{order:100,enabled:!0,fn:qa},offset:{order:200,enabled:!0,fn:oa,offset:0},preventOverflow:{order:300,enabled:!0,fn:pa,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:la},arrow:{order:500,enabled:!0,fn:ha,element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:ka,behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:sa},hide:{order:800,enabled:!0,fn:ra},computeStyle:{order:850,enabled:!0,fn:fa,gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:ca,onLoad:da,gpuAcceleration:void 0}},Nb={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:Mb},Ob=function(){function a(b,c){var d=this,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Eb(this,a),this.scheduleUpdate=function(){return requestAnimationFrame(d.update)},this.update=Bb(this.update.bind(this)),this.options=Hb({},a.Defaults,e),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=b&&b.jquery?b[0]:b,this.popper=c&&c.jquery?c[0]:c,this.options.modifiers={},Object.keys(Hb({},a.Defaults.modifiers,e.modifiers)).forEach(function(b){d.options.modifiers[b]=Hb({},a.Defaults.modifiers[b]||{},e.modifiers?e.modifiers[b]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(a){return Hb({name:a},d.options.modifiers[a])}).sort(function(a,b){return a.order-b.order}),this.modifiers.forEach(function(a){a.enabled&&n(a.onLoad)&&a.onLoad(d.reference,d.popper,d.options,a,d.state)}),this.update();var f=this.options.eventsEnabled;f&&this.enableEventListeners(),this.state.eventsEnabled=f}return Fb(a,[{key:"update",value:function(){return R.call(this)}},{key:"destroy",value:function(){return U.call(this)}},{key:"enableEventListeners",value:function(){return Y.call(this)}},{key:"disableEventListeners",value:function(){return $.call(this)}}]),a}();Ob.Utils=("undefined"!=typeof window?window:global).PopperUtils,Ob.placements=Jb,Ob.Defaults=Nb;var Pb="dropdown",Qb="4.3.1",Rb="bs.dropdown",Sb="."+Rb,Tb=".data-api",Ub=b.fn[Pb],Vb=27,Wb=32,Xb=9,Yb=38,Zb=40,$b=3,_b=new RegExp(Yb+"|"+Zb+"|"+Vb),ac={HIDE:"hide"+Sb,HIDDEN:"hidden"+Sb,SHOW:"show"+Sb,SHOWN:"shown"+Sb,CLICK:"click"+Sb,CLICK_DATA_API:"click"+Sb+Tb,KEYDOWN_DATA_API:"keydown"+Sb+Tb,KEYUP_DATA_API:"keyup"+Sb+Tb},bc={DISABLED:"disabled",SHOW:"show",DROPUP:"dropup",DROPRIGHT:"dropright",DROPLEFT:"dropleft",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",POSITION_STATIC:"position-static"},cc={DATA_TOGGLE:'[data-toggle="dropdown"]',FORM_CHILD:".dropdown form",MENU:".dropdown-menu",NAVBAR_NAV:".navbar-nav",VISIBLE_ITEMS:".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)"},dc={TOP:"top-start",TOPEND:"top-end",BOTTOM:"bottom-start",BOTTOMEND:"bottom-end",RIGHT:"right-start",RIGHTEND:"right-end",LEFT:"left-start",LEFTEND:"left-end"},ec={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic"},fc={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string"},gc=function(){function a(a,b){this._element=a,this._popper=null,this._config=this._getConfig(b),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var c=a.prototype;return c.toggle=function(){if(!this._element.disabled&&!b(this._element).hasClass(bc.DISABLED)){var c=a._getParentFromElement(this._element),d=b(this._menu).hasClass(bc.SHOW);if(a._clearMenus(),!d){var e={relatedTarget:this._element},f=b.Event(ac.SHOW,e);if(b(c).trigger(f),!f.isDefaultPrevented()){if(!this._inNavbar){if(void 0===Ob)throw new TypeError("Bootstrap's dropdowns require Popper.js (https://popper.js.org/)");var g=this._element;"parent"===this._config.reference?g=c:ya.isElement(this._config.reference)&&(g=this._config.reference,void 0!==this._config.reference.jquery&&(g=this._config.reference[0])),"scrollParent"!==this._config.boundary&&b(c).addClass(bc.POSITION_STATIC),this._popper=new Ob(g,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===b(c).closest(cc.NAVBAR_NAV).length&&b(document.body).children().on("mouseover",null,b.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),b(this._menu).toggleClass(bc.SHOW),b(c).toggleClass(bc.SHOW).trigger(b.Event(ac.SHOWN,e))}}}},c.show=function(){if(!(this._element.disabled||b(this._element).hasClass(bc.DISABLED)||b(this._menu).hasClass(bc.SHOW))){var c={relatedTarget:this._element},d=b.Event(ac.SHOW,c),e=a._getParentFromElement(this._element);b(e).trigger(d),d.isDefaultPrevented()||(b(this._menu).toggleClass(bc.SHOW),b(e).toggleClass(bc.SHOW).trigger(b.Event(ac.SHOWN,c)))}},c.hide=function(){if(!this._element.disabled&&!b(this._element).hasClass(bc.DISABLED)&&b(this._menu).hasClass(bc.SHOW)){var c={relatedTarget:this._element},d=b.Event(ac.HIDE,c),e=a._getParentFromElement(this._element);b(e).trigger(d),d.isDefaultPrevented()||(b(this._menu).toggleClass(bc.SHOW),b(e).toggleClass(bc.SHOW).trigger(b.Event(ac.HIDDEN,c)))}},c.dispose=function(){b.removeData(this._element,Rb),b(this._element).off(Sb),this._element=null,this._menu=null,null!==this._popper&&(this._popper.destroy(),this._popper=null)},c.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},c._addEventListeners=function(){var a=this;b(this._element).on(ac.CLICK,function(b){b.preventDefault(),b.stopPropagation(),a.toggle()})},c._getConfig=function(a){return a=f({},this.constructor.Default,b(this._element).data(),a),ya.typeCheckConfig(Pb,a,this.constructor.DefaultType),a},c._getMenuElement=function(){if(!this._menu){var b=a._getParentFromElement(this._element);b&&(this._menu=b.querySelector(cc.MENU))}return this._menu},c._getPlacement=function(){var a=b(this._element.parentNode),c=dc.BOTTOM;return a.hasClass(bc.DROPUP)?(c=dc.TOP,b(this._menu).hasClass(bc.MENURIGHT)&&(c=dc.TOPEND)):a.hasClass(bc.DROPRIGHT)?c=dc.RIGHT:a.hasClass(bc.DROPLEFT)?c=dc.LEFT:b(this._menu).hasClass(bc.MENURIGHT)&&(c=dc.BOTTOMEND),c},c._detectNavbar=function(){return b(this._element).closest(".navbar").length>0},c._getOffset=function(){var a=this,b={};return"function"==typeof this._config.offset?b.fn=function(b){return b.offsets=f({},b.offsets,a._config.offset(b.offsets,a._element)||{}),b}:b.offset=this._config.offset,b},c._getPopperConfig=function(){var a={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(a.modifiers.applyStyle={enabled:!1}),a},a._jQueryInterface=function(c){return this.each(function(){var d=b(this).data(Rb),e="object"==typeof c?c:null;if(d||(d=new a(this,e),b(this).data(Rb,d)),"string"==typeof c){if(void 0===d[c])throw new TypeError('No method named "'+c+'"');d[c]()}})},a._clearMenus=function(c){if(!c||c.which!==$b&&("keyup"!==c.type||c.which===Xb))for(var d=[].slice.call(document.querySelectorAll(cc.DATA_TOGGLE)),e=0,f=d.length;e<f;e++){var g=a._getParentFromElement(d[e]),h=b(d[e]).data(Rb),i={relatedTarget:d[e]};if(c&&"click"===c.type&&(i.clickEvent=c),h){var j=h._menu;if(b(g).hasClass(bc.SHOW)&&!(c&&("click"===c.type&&/input|textarea/i.test(c.target.tagName)||"keyup"===c.type&&c.which===Xb)&&b.contains(g,c.target))){var k=b.Event(ac.HIDE,i);b(g).trigger(k),k.isDefaultPrevented()||("ontouchstart"in document.documentElement&&b(document.body).children().off("mouseover",null,b.noop),d[e].setAttribute("aria-expanded","false"),b(j).removeClass(bc.SHOW),b(g).removeClass(bc.SHOW).trigger(b.Event(ac.HIDDEN,i)))}}}},a._getParentFromElement=function(a){var b,c=ya.getSelectorFromElement(a);return c&&(b=document.querySelector(c)),b||a.parentNode},a._dataApiKeydownHandler=function(c){if((/input|textarea/i.test(c.target.tagName)?!(c.which===Wb||c.which!==Vb&&(c.which!==Zb&&c.which!==Yb||b(c.target).closest(cc.MENU).length)):_b.test(c.which))&&(c.preventDefault(),c.stopPropagation(),!this.disabled&&!b(this).hasClass(bc.DISABLED))){var d=a._getParentFromElement(this),e=b(d).hasClass(bc.SHOW);if(!e||e&&(c.which===Vb||c.which===Wb)){if(c.which===Vb){var f=d.querySelector(cc.DATA_TOGGLE);b(f).trigger("focus")}return void b(this).trigger("click")}var g=[].slice.call(d.querySelectorAll(cc.VISIBLE_ITEMS));if(0!==g.length){var h=g.indexOf(c.target);c.which===Yb&&h>0&&h--,c.which===Zb&&h<g.length-1&&h++,h<0&&(h=0),g[h].focus()}}},d(a,null,[{key:"VERSION",get:function(){return Qb}},{key:"Default",get:function(){return ec}},{key:"DefaultType",get:function(){return fc}}]),a}();b(document).on(ac.KEYDOWN_DATA_API,cc.DATA_TOGGLE,gc._dataApiKeydownHandler).on(ac.KEYDOWN_DATA_API,cc.MENU,gc._dataApiKeydownHandler).on(ac.CLICK_DATA_API+" "+ac.KEYUP_DATA_API,gc._clearMenus).on(ac.CLICK_DATA_API,cc.DATA_TOGGLE,function(a){a.preventDefault(),a.stopPropagation(),gc._jQueryInterface.call(b(this),"toggle")}).on(ac.CLICK_DATA_API,cc.FORM_CHILD,function(a){a.stopPropagation()}),b.fn[Pb]=gc._jQueryInterface,b.fn[Pb].Constructor=gc,b.fn[Pb].noConflict=function(){return b.fn[Pb]=Ub,gc._jQueryInterface};var hc="modal",ic="4.3.1",jc="bs.modal",kc="."+jc,lc=".data-api",mc=b.fn[hc],nc=27,oc={backdrop:!0,keyboard:!0,focus:!0,show:!0},pc={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},qc={HIDE:"hide"+kc,HIDDEN:"hidden"+kc,SHOW:"show"+kc,SHOWN:"shown"+kc,FOCUSIN:"focusin"+kc,RESIZE:"resize"+kc,CLICK_DISMISS:"click.dismiss"+kc,KEYDOWN_DISMISS:"keydown.dismiss"+kc,MOUSEUP_DISMISS:"mouseup.dismiss"+kc,MOUSEDOWN_DISMISS:"mousedown.dismiss"+kc,CLICK_DATA_API:"click"+kc+lc},rc={SCROLLABLE:"modal-dialog-scrollable",SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",SHOW:"show"},sc={DIALOG:".modal-dialog",MODAL_BODY:".modal-body",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top"},tc=function(){function a(a,b){this._config=this._getConfig(b),this._element=a,this._dialog=a.querySelector(sc.DIALOG),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var c=a.prototype;return c.toggle=function(a){return this._isShown?this.hide():this.show(a)},c.show=function(a){var c=this;if(!this._isShown&&!this._isTransitioning){b(this._element).hasClass(rc.FADE)&&(this._isTransitioning=!0);var d=b.Event(qc.SHOW,{relatedTarget:a});b(this._element).trigger(d),this._isShown||d.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),b(this._element).on(qc.CLICK_DISMISS,sc.DATA_DISMISS,function(a){return c.hide(a)}),b(this._dialog).on(qc.MOUSEDOWN_DISMISS,function(){b(c._element).one(qc.MOUSEUP_DISMISS,function(a){b(a.target).is(c._element)&&(c._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return c._showElement(a)}))}},c.hide=function(a){var c=this;if(a&&a.preventDefault(),this._isShown&&!this._isTransitioning){var d=b.Event(qc.HIDE);if(b(this._element).trigger(d),this._isShown&&!d.isDefaultPrevented()){this._isShown=!1;var e=b(this._element).hasClass(rc.FADE);if(e&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),b(document).off(qc.FOCUSIN),b(this._element).removeClass(rc.SHOW),b(this._element).off(qc.CLICK_DISMISS),b(this._dialog).off(qc.MOUSEDOWN_DISMISS),e){var f=ya.getTransitionDurationFromElement(this._element);b(this._element).one(ya.TRANSITION_END,function(a){return c._hideModal(a)}).emulateTransitionEnd(f)}else this._hideModal()}}},c.dispose=function(){[window,this._element,this._dialog].forEach(function(a){return b(a).off(kc)}),b(document).off(qc.FOCUSIN),b.removeData(this._element,jc),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},c.handleUpdate=function(){this._adjustDialog()},c._getConfig=function(a){return a=f({},oc,a),ya.typeCheckConfig(hc,a,pc),a},c._showElement=function(a){var c=this,d=b(this._element).hasClass(rc.FADE);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),b(this._dialog).hasClass(rc.SCROLLABLE)?this._dialog.querySelector(sc.MODAL_BODY).scrollTop=0:this._element.scrollTop=0,d&&ya.reflow(this._element),b(this._element).addClass(rc.SHOW),this._config.focus&&this._enforceFocus();var e=b.Event(qc.SHOWN,{relatedTarget:a}),f=function(){c._config.focus&&c._element.focus(),c._isTransitioning=!1,b(c._element).trigger(e)};if(d){var g=ya.getTransitionDurationFromElement(this._dialog);b(this._dialog).one(ya.TRANSITION_END,f).emulateTransitionEnd(g)}else f()},c._enforceFocus=function(){var a=this;b(document).off(qc.FOCUSIN).on(qc.FOCUSIN,function(c){document!==c.target&&a._element!==c.target&&0===b(a._element).has(c.target).length&&a._element.focus()})},c._setEscapeEvent=function(){var a=this;this._isShown&&this._config.keyboard?b(this._element).on(qc.KEYDOWN_DISMISS,function(b){b.which===nc&&(b.preventDefault(),a.hide())}):this._isShown||b(this._element).off(qc.KEYDOWN_DISMISS)},c._setResizeEvent=function(){var a=this;this._isShown?b(window).on(qc.RESIZE,function(b){return a.handleUpdate(b)}):b(window).off(qc.RESIZE)},c._hideModal=function(){var a=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._isTransitioning=!1,this._showBackdrop(function(){b(document.body).removeClass(rc.OPEN),a._resetAdjustments(),a._resetScrollbar(),b(a._element).trigger(qc.HIDDEN)})},c._removeBackdrop=function(){this._backdrop&&(b(this._backdrop).remove(),this._backdrop=null)},c._showBackdrop=function(a){var c=this,d=b(this._element).hasClass(rc.FADE)?rc.FADE:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className=rc.BACKDROP,d&&this._backdrop.classList.add(d),b(this._backdrop).appendTo(document.body),b(this._element).on(qc.CLICK_DISMISS,function(a){if(c._ignoreBackdropClick)return void(c._ignoreBackdropClick=!1);a.target===a.currentTarget&&("static"===c._config.backdrop?c._element.focus():c.hide())}),d&&ya.reflow(this._backdrop),b(this._backdrop).addClass(rc.SHOW),!a)return;if(!d)return void a();var e=ya.getTransitionDurationFromElement(this._backdrop);b(this._backdrop).one(ya.TRANSITION_END,a).emulateTransitionEnd(e)}else if(!this._isShown&&this._backdrop){b(this._backdrop).removeClass(rc.SHOW);var f=function(){c._removeBackdrop(),a&&a()};if(b(this._element).hasClass(rc.FADE)){var g=ya.getTransitionDurationFromElement(this._backdrop);b(this._backdrop).one(ya.TRANSITION_END,f).emulateTransitionEnd(g)}else f()}else a&&a()},c._adjustDialog=function(){var a=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&a&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!a&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},c._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},c._checkScrollbar=function(){var a=document.body.getBoundingClientRect();this._isBodyOverflowing=a.left+a.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},c._setScrollbar=function(){var a=this;if(this._isBodyOverflowing){var c=[].slice.call(document.querySelectorAll(sc.FIXED_CONTENT)),d=[].slice.call(document.querySelectorAll(sc.STICKY_CONTENT));b(c).each(function(c,d){var e=d.style.paddingRight,f=b(d).css("padding-right");b(d).data("padding-right",e).css("padding-right",parseFloat(f)+a._scrollbarWidth+"px")}),b(d).each(function(c,d){var e=d.style.marginRight,f=b(d).css("margin-right");b(d).data("margin-right",e).css("margin-right",parseFloat(f)-a._scrollbarWidth+"px")});var e=document.body.style.paddingRight,f=b(document.body).css("padding-right");b(document.body).data("padding-right",e).css("padding-right",parseFloat(f)+this._scrollbarWidth+"px")}b(document.body).addClass(rc.OPEN)},c._resetScrollbar=function(){var a=[].slice.call(document.querySelectorAll(sc.FIXED_CONTENT));b(a).each(function(a,c){var d=b(c).data("padding-right");b(c).removeData("padding-right"),c.style.paddingRight=d||""});var c=[].slice.call(document.querySelectorAll(""+sc.STICKY_CONTENT));b(c).each(function(a,c){var d=b(c).data("margin-right");void 0!==d&&b(c).css("margin-right",d).removeData("margin-right")});var d=b(document.body).data("padding-right");b(document.body).removeData("padding-right"),document.body.style.paddingRight=d||""},c._getScrollbarWidth=function(){var a=document.createElement("div");a.className=rc.SCROLLBAR_MEASURER,document.body.appendChild(a);var b=a.getBoundingClientRect().width-a.clientWidth;return document.body.removeChild(a),b},a._jQueryInterface=function(c,d){return this.each(function(){var e=b(this).data(jc),g=f({},oc,b(this).data(),"object"==typeof c&&c?c:{});if(e||(e=new a(this,g),b(this).data(jc,e)),"string"==typeof c){if(void 0===e[c])throw new TypeError('No method named "'+c+'"');e[c](d)}else g.show&&e.show(d)})},d(a,null,[{key:"VERSION",get:function(){return ic}},{key:"Default",get:function(){return oc}}]),a}();b(document).on(qc.CLICK_DATA_API,sc.DATA_TOGGLE,function(a){var c,d=this,e=ya.getSelectorFromElement(this);e&&(c=document.querySelector(e));var g=b(c).data(jc)?"toggle":f({},b(c).data(),b(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||a.preventDefault();var h=b(c).one(qc.SHOW,function(a){a.isDefaultPrevented()||h.one(qc.HIDDEN,function(){b(d).is(":visible")&&d.focus()})});tc._jQueryInterface.call(b(c),g,this)}),b.fn[hc]=tc._jQueryInterface,b.fn[hc].Constructor=tc,b.fn[hc].noConflict=function(){return b.fn[hc]=mc,tc._jQueryInterface};var uc=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],vc=/^aria-[\w-]*$/i,wc={"*":["class","dir","id","lang","role",vc],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},xc=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi,yc=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i,zc="tooltip",Ac="4.3.1",Bc="bs.tooltip",Cc="."+Bc,Dc=b.fn[zc],Ec="bs-tooltip",Fc=new RegExp("(^|\\s)"+Ec+"\\S+","g"),Gc=["sanitize","whiteList","sanitizeFn"],Hc={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object"},Ic={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},Jc={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",sanitize:!0,sanitizeFn:null,whiteList:wc},Kc={SHOW:"show",OUT:"out"},Lc={HIDE:"hide"+Cc,HIDDEN:"hidden"+Cc,SHOW:"show"+Cc,SHOWN:"shown"+Cc,INSERTED:"inserted"+Cc,CLICK:"click"+Cc,FOCUSIN:"focusin"+Cc,FOCUSOUT:"focusout"+Cc,MOUSEENTER:"mouseenter"+Cc,MOUSELEAVE:"mouseleave"+Cc},Mc={FADE:"fade",SHOW:"show"},Nc={TOOLTIP:".tooltip",TOOLTIP_INNER:".tooltip-inner",ARROW:".arrow"},Oc={HOVER:"hover",FOCUS:"focus",CLICK:"click",MANUAL:"manual"},Pc=function(){function a(a,b){if(void 0===Ob)throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org/)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},
this._popper=null,this.element=a,this.config=this._getConfig(b),this.tip=null,this._setListeners()}var c=a.prototype;return c.enable=function(){this._isEnabled=!0},c.disable=function(){this._isEnabled=!1},c.toggleEnabled=function(){this._isEnabled=!this._isEnabled},c.toggle=function(a){if(this._isEnabled)if(a){var c=this.constructor.DATA_KEY,d=b(a.currentTarget).data(c);d||(d=new this.constructor(a.currentTarget,this._getDelegateConfig()),b(a.currentTarget).data(c,d)),d._activeTrigger.click=!d._activeTrigger.click,d._isWithActiveTrigger()?d._enter(null,d):d._leave(null,d)}else{if(b(this.getTipElement()).hasClass(Mc.SHOW))return void this._leave(null,this);this._enter(null,this)}},c.dispose=function(){clearTimeout(this._timeout),b.removeData(this.element,this.constructor.DATA_KEY),b(this.element).off(this.constructor.EVENT_KEY),b(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&b(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,null!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},c.show=function(){var a=this;if("none"===b(this.element).css("display"))throw new Error("Please use show on visible elements");var c=b.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){b(this.element).trigger(c);var d=ya.findShadowRoot(this.element),e=b.contains(null!==d?d:this.element.ownerDocument.documentElement,this.element);if(c.isDefaultPrevented()||!e)return;var f=this.getTipElement(),g=ya.getUID(this.constructor.NAME);f.setAttribute("id",g),this.element.setAttribute("aria-describedby",g),this.setContent(),this.config.animation&&b(f).addClass(Mc.FADE);var h="function"==typeof this.config.placement?this.config.placement.call(this,f,this.element):this.config.placement,i=this._getAttachment(h);this.addAttachmentClass(i);var j=this._getContainer();b(f).data(this.constructor.DATA_KEY,this),b.contains(this.element.ownerDocument.documentElement,this.tip)||b(f).appendTo(j),b(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new Ob(this.element,f,{placement:i,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:Nc.ARROW},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(b){b.originalPlacement!==b.placement&&a._handlePopperPlacementChange(b)},onUpdate:function(b){return a._handlePopperPlacementChange(b)}}),b(f).addClass(Mc.SHOW),"ontouchstart"in document.documentElement&&b(document.body).children().on("mouseover",null,b.noop);var k=function(){a.config.animation&&a._fixTransition();var c=a._hoverState;a._hoverState=null,b(a.element).trigger(a.constructor.Event.SHOWN),c===Kc.OUT&&a._leave(null,a)};if(b(this.tip).hasClass(Mc.FADE)){var l=ya.getTransitionDurationFromElement(this.tip);b(this.tip).one(ya.TRANSITION_END,k).emulateTransitionEnd(l)}else k()}},c.hide=function(a){var c=this,d=this.getTipElement(),e=b.Event(this.constructor.Event.HIDE),f=function(){c._hoverState!==Kc.SHOW&&d.parentNode&&d.parentNode.removeChild(d),c._cleanTipClass(),c.element.removeAttribute("aria-describedby"),b(c.element).trigger(c.constructor.Event.HIDDEN),null!==c._popper&&c._popper.destroy(),a&&a()};if(b(this.element).trigger(e),!e.isDefaultPrevented()){if(b(d).removeClass(Mc.SHOW),"ontouchstart"in document.documentElement&&b(document.body).children().off("mouseover",null,b.noop),this._activeTrigger[Oc.CLICK]=!1,this._activeTrigger[Oc.FOCUS]=!1,this._activeTrigger[Oc.HOVER]=!1,b(this.tip).hasClass(Mc.FADE)){var g=ya.getTransitionDurationFromElement(d);b(d).one(ya.TRANSITION_END,f).emulateTransitionEnd(g)}else f();this._hoverState=""}},c.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},c.isWithContent=function(){return Boolean(this.getTitle())},c.addAttachmentClass=function(a){b(this.getTipElement()).addClass(Ec+"-"+a)},c.getTipElement=function(){return this.tip=this.tip||b(this.config.template)[0],this.tip},c.setContent=function(){var a=this.getTipElement();this.setElementContent(b(a.querySelectorAll(Nc.TOOLTIP_INNER)),this.getTitle()),b(a).removeClass(Mc.FADE+" "+Mc.SHOW)},c.setElementContent=function(a,c){if("object"==typeof c&&(c.nodeType||c.jquery))return void(this.config.html?b(c).parent().is(a)||a.empty().append(c):a.text(b(c).text()));this.config.html?(this.config.sanitize&&(c=ua(c,this.config.whiteList,this.config.sanitizeFn)),a.html(c)):a.text(c)},c.getTitle=function(){var a=this.element.getAttribute("data-original-title");return a||(a="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),a},c._getOffset=function(){var a=this,b={};return"function"==typeof this.config.offset?b.fn=function(b){return b.offsets=f({},b.offsets,a.config.offset(b.offsets,a.element)||{}),b}:b.offset=this.config.offset,b},c._getContainer=function(){return!1===this.config.container?document.body:ya.isElement(this.config.container)?b(this.config.container):b(document).find(this.config.container)},c._getAttachment=function(a){return Ic[a.toUpperCase()]},c._setListeners=function(){var a=this;this.config.trigger.split(" ").forEach(function(c){if("click"===c)b(a.element).on(a.constructor.Event.CLICK,a.config.selector,function(b){return a.toggle(b)});else if(c!==Oc.MANUAL){var d=c===Oc.HOVER?a.constructor.Event.MOUSEENTER:a.constructor.Event.FOCUSIN,e=c===Oc.HOVER?a.constructor.Event.MOUSELEAVE:a.constructor.Event.FOCUSOUT;b(a.element).on(d,a.config.selector,function(b){return a._enter(b)}).on(e,a.config.selector,function(b){return a._leave(b)})}}),b(this.element).closest(".modal").on("hide.bs.modal",function(){a.element&&a.hide()}),this.config.selector?this.config=f({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},c._fixTitle=function(){var a=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==a)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},c._enter=function(a,c){var d=this.constructor.DATA_KEY;return c=c||b(a.currentTarget).data(d),c||(c=new this.constructor(a.currentTarget,this._getDelegateConfig()),b(a.currentTarget).data(d,c)),a&&(c._activeTrigger["focusin"===a.type?Oc.FOCUS:Oc.HOVER]=!0),b(c.getTipElement()).hasClass(Mc.SHOW)||c._hoverState===Kc.SHOW?void(c._hoverState=Kc.SHOW):(clearTimeout(c._timeout),c._hoverState=Kc.SHOW,c.config.delay&&c.config.delay.show?void(c._timeout=setTimeout(function(){c._hoverState===Kc.SHOW&&c.show()},c.config.delay.show)):void c.show())},c._leave=function(a,c){var d=this.constructor.DATA_KEY;if(c=c||b(a.currentTarget).data(d),c||(c=new this.constructor(a.currentTarget,this._getDelegateConfig()),b(a.currentTarget).data(d,c)),a&&(c._activeTrigger["focusout"===a.type?Oc.FOCUS:Oc.HOVER]=!1),!c._isWithActiveTrigger()){if(clearTimeout(c._timeout),c._hoverState=Kc.OUT,!c.config.delay||!c.config.delay.hide)return void c.hide();c._timeout=setTimeout(function(){c._hoverState===Kc.OUT&&c.hide()},c.config.delay.hide)}},c._isWithActiveTrigger=function(){for(var a in this._activeTrigger)if(this._activeTrigger[a])return!0;return!1},c._getConfig=function(a){var c=b(this.element).data();return Object.keys(c).forEach(function(a){-1!==Gc.indexOf(a)&&delete c[a]}),a=f({},this.constructor.Default,c,"object"==typeof a&&a?a:{}),"number"==typeof a.delay&&(a.delay={show:a.delay,hide:a.delay}),"number"==typeof a.title&&(a.title=a.title.toString()),"number"==typeof a.content&&(a.content=a.content.toString()),ya.typeCheckConfig(zc,a,this.constructor.DefaultType),a.sanitize&&(a.template=ua(a.template,a.whiteList,a.sanitizeFn)),a},c._getDelegateConfig=function(){var a={};if(this.config)for(var b in this.config)this.constructor.Default[b]!==this.config[b]&&(a[b]=this.config[b]);return a},c._cleanTipClass=function(){var a=b(this.getTipElement()),c=a.attr("class").match(Fc);null!==c&&c.length&&a.removeClass(c.join(""))},c._handlePopperPlacementChange=function(a){var b=a.instance;this.tip=b.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(a.placement))},c._fixTransition=function(){var a=this.getTipElement(),c=this.config.animation;null===a.getAttribute("x-placement")&&(b(a).removeClass(Mc.FADE),this.config.animation=!1,this.hide(),this.show(),this.config.animation=c)},a._jQueryInterface=function(c){return this.each(function(){var d=b(this).data(Bc),e="object"==typeof c&&c;if((d||!/dispose|hide/.test(c))&&(d||(d=new a(this,e),b(this).data(Bc,d)),"string"==typeof c)){if(void 0===d[c])throw new TypeError('No method named "'+c+'"');d[c]()}})},d(a,null,[{key:"VERSION",get:function(){return Ac}},{key:"Default",get:function(){return Jc}},{key:"NAME",get:function(){return zc}},{key:"DATA_KEY",get:function(){return Bc}},{key:"Event",get:function(){return Lc}},{key:"EVENT_KEY",get:function(){return Cc}},{key:"DefaultType",get:function(){return Hc}}]),a}();b.fn[zc]=Pc._jQueryInterface,b.fn[zc].Constructor=Pc,b.fn[zc].noConflict=function(){return b.fn[zc]=Dc,Pc._jQueryInterface};var Qc="popover",Rc="4.3.1",Sc="bs.popover",Tc="."+Sc,Uc=b.fn[Qc],Vc="bs-popover",Wc=new RegExp("(^|\\s)"+Vc+"\\S+","g"),Xc=f({},Pc.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),Yc=f({},Pc.DefaultType,{content:"(string|element|function)"}),Zc={FADE:"fade",SHOW:"show"},$c={TITLE:".popover-header",CONTENT:".popover-body"},_c={HIDE:"hide"+Tc,HIDDEN:"hidden"+Tc,SHOW:"show"+Tc,SHOWN:"shown"+Tc,INSERTED:"inserted"+Tc,CLICK:"click"+Tc,FOCUSIN:"focusin"+Tc,FOCUSOUT:"focusout"+Tc,MOUSEENTER:"mouseenter"+Tc,MOUSELEAVE:"mouseleave"+Tc},ad=function(a){function c(){return a.apply(this,arguments)||this}g(c,a);var e=c.prototype;return e.isWithContent=function(){return this.getTitle()||this._getContent()},e.addAttachmentClass=function(a){b(this.getTipElement()).addClass(Vc+"-"+a)},e.getTipElement=function(){return this.tip=this.tip||b(this.config.template)[0],this.tip},e.setContent=function(){var a=b(this.getTipElement());this.setElementContent(a.find($c.TITLE),this.getTitle());var c=this._getContent();"function"==typeof c&&(c=c.call(this.element)),this.setElementContent(a.find($c.CONTENT),c),a.removeClass(Zc.FADE+" "+Zc.SHOW)},e._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},e._cleanTipClass=function(){var a=b(this.getTipElement()),c=a.attr("class").match(Wc);null!==c&&c.length>0&&a.removeClass(c.join(""))},c._jQueryInterface=function(a){return this.each(function(){var d=b(this).data(Sc),e="object"==typeof a?a:null;if((d||!/dispose|hide/.test(a))&&(d||(d=new c(this,e),b(this).data(Sc,d)),"string"==typeof a)){if(void 0===d[a])throw new TypeError('No method named "'+a+'"');d[a]()}})},d(c,null,[{key:"VERSION",get:function(){return Rc}},{key:"Default",get:function(){return Xc}},{key:"NAME",get:function(){return Qc}},{key:"DATA_KEY",get:function(){return Sc}},{key:"Event",get:function(){return _c}},{key:"EVENT_KEY",get:function(){return Tc}},{key:"DefaultType",get:function(){return Yc}}]),c}(Pc);b.fn[Qc]=ad._jQueryInterface,b.fn[Qc].Constructor=ad,b.fn[Qc].noConflict=function(){return b.fn[Qc]=Uc,ad._jQueryInterface};var bd="scrollspy",cd="4.3.1",dd="bs.scrollspy",ed="."+dd,fd=".data-api",gd=b.fn[bd],hd={offset:10,method:"auto",target:""},id={offset:"number",method:"string",target:"(string|element)"},jd={ACTIVATE:"activate"+ed,SCROLL:"scroll"+ed,LOAD_DATA_API:"load"+ed+fd},kd={DROPDOWN_ITEM:"dropdown-item",DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active"},ld={DATA_SPY:'[data-spy="scroll"]',ACTIVE:".active",NAV_LIST_GROUP:".nav, .list-group",NAV_LINKS:".nav-link",NAV_ITEMS:".nav-item",LIST_ITEMS:".list-group-item",DROPDOWN:".dropdown",DROPDOWN_ITEMS:".dropdown-item",DROPDOWN_TOGGLE:".dropdown-toggle"},md={OFFSET:"offset",POSITION:"position"},nd=function(){function a(a,c){var d=this;this._element=a,this._scrollElement="BODY"===a.tagName?window:a,this._config=this._getConfig(c),this._selector=this._config.target+" "+ld.NAV_LINKS+","+this._config.target+" "+ld.LIST_ITEMS+","+this._config.target+" "+ld.DROPDOWN_ITEMS,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,b(this._scrollElement).on(jd.SCROLL,function(a){return d._process(a)}),this.refresh(),this._process()}var c=a.prototype;return c.refresh=function(){var a=this,c=this._scrollElement===this._scrollElement.window?md.OFFSET:md.POSITION,d="auto"===this._config.method?c:this._config.method,e=d===md.POSITION?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map(function(a){var c,f=ya.getSelectorFromElement(a);if(f&&(c=document.querySelector(f)),c){var g=c.getBoundingClientRect();if(g.width||g.height)return[b(c)[d]().top+e,f]}return null}).filter(function(a){return a}).sort(function(a,b){return a[0]-b[0]}).forEach(function(b){a._offsets.push(b[0]),a._targets.push(b[1])})},c.dispose=function(){b.removeData(this._element,dd),b(this._scrollElement).off(ed),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},c._getConfig=function(a){if(a=f({},hd,"object"==typeof a&&a?a:{}),"string"!=typeof a.target){var c=b(a.target).attr("id");c||(c=ya.getUID(bd),b(a.target).attr("id",c)),a.target="#"+c}return ya.typeCheckConfig(bd,a,id),a},c._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},c._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},c._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},c._process=function(){var a=this._getScrollTop()+this._config.offset,b=this._getScrollHeight(),c=this._config.offset+b-this._getOffsetHeight();if(this._scrollHeight!==b&&this.refresh(),a>=c){var d=this._targets[this._targets.length-1];return void(this._activeTarget!==d&&this._activate(d))}if(this._activeTarget&&a<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(var e=this._offsets.length,f=e;f--;){this._activeTarget!==this._targets[f]&&a>=this._offsets[f]&&(void 0===this._offsets[f+1]||a<this._offsets[f+1])&&this._activate(this._targets[f])}},c._activate=function(a){this._activeTarget=a,this._clear();var c=this._selector.split(",").map(function(b){return b+'[data-target="'+a+'"],'+b+'[href="'+a+'"]'}),d=b([].slice.call(document.querySelectorAll(c.join(","))));d.hasClass(kd.DROPDOWN_ITEM)?(d.closest(ld.DROPDOWN).find(ld.DROPDOWN_TOGGLE).addClass(kd.ACTIVE),d.addClass(kd.ACTIVE)):(d.addClass(kd.ACTIVE),d.parents(ld.NAV_LIST_GROUP).prev(ld.NAV_LINKS+", "+ld.LIST_ITEMS).addClass(kd.ACTIVE),d.parents(ld.NAV_LIST_GROUP).prev(ld.NAV_ITEMS).children(ld.NAV_LINKS).addClass(kd.ACTIVE)),b(this._scrollElement).trigger(jd.ACTIVATE,{relatedTarget:a})},c._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter(function(a){return a.classList.contains(kd.ACTIVE)}).forEach(function(a){return a.classList.remove(kd.ACTIVE)})},a._jQueryInterface=function(c){return this.each(function(){var d=b(this).data(dd),e="object"==typeof c&&c;if(d||(d=new a(this,e),b(this).data(dd,d)),"string"==typeof c){if(void 0===d[c])throw new TypeError('No method named "'+c+'"');d[c]()}})},d(a,null,[{key:"VERSION",get:function(){return cd}},{key:"Default",get:function(){return hd}}]),a}();b(window).on(jd.LOAD_DATA_API,function(){for(var a=[].slice.call(document.querySelectorAll(ld.DATA_SPY)),c=a.length,d=c;d--;){var e=b(a[d]);nd._jQueryInterface.call(e,e.data())}}),b.fn[bd]=nd._jQueryInterface,b.fn[bd].Constructor=nd,b.fn[bd].noConflict=function(){return b.fn[bd]=gd,nd._jQueryInterface};var od="tab",pd="4.3.1",qd="bs.tab",rd="."+qd,sd=".data-api",td=b.fn[od],ud={HIDE:"hide"+rd,HIDDEN:"hidden"+rd,SHOW:"show"+rd,SHOWN:"shown"+rd,CLICK_DATA_API:"click"+rd+sd},vd={DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active",DISABLED:"disabled",FADE:"fade",SHOW:"show"},wd={DROPDOWN:".dropdown",NAV_LIST_GROUP:".nav, .list-group",ACTIVE:".active",ACTIVE_UL:"> li > .active",DATA_TOGGLE:'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',DROPDOWN_TOGGLE:".dropdown-toggle",DROPDOWN_ACTIVE_CHILD:"> .dropdown-menu .active"},xd=function(){function a(a){this._element=a}var c=a.prototype;return c.show=function(){var a=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&b(this._element).hasClass(vd.ACTIVE)||b(this._element).hasClass(vd.DISABLED))){var c,d,e=b(this._element).closest(wd.NAV_LIST_GROUP)[0],f=ya.getSelectorFromElement(this._element);if(e){var g="UL"===e.nodeName||"OL"===e.nodeName?wd.ACTIVE_UL:wd.ACTIVE;d=b.makeArray(b(e).find(g)),d=d[d.length-1]}var h=b.Event(ud.HIDE,{relatedTarget:this._element}),i=b.Event(ud.SHOW,{relatedTarget:d});if(d&&b(d).trigger(h),b(this._element).trigger(i),!i.isDefaultPrevented()&&!h.isDefaultPrevented()){f&&(c=document.querySelector(f)),this._activate(this._element,e);var j=function(){var c=b.Event(ud.HIDDEN,{relatedTarget:a._element}),e=b.Event(ud.SHOWN,{relatedTarget:d});b(d).trigger(c),b(a._element).trigger(e)};c?this._activate(c,c.parentNode,j):j()}}},c.dispose=function(){b.removeData(this._element,qd),this._element=null},c._activate=function(a,c,d){var e=this,f=!c||"UL"!==c.nodeName&&"OL"!==c.nodeName?b(c).children(wd.ACTIVE):b(c).find(wd.ACTIVE_UL),g=f[0],h=d&&g&&b(g).hasClass(vd.FADE),i=function(){return e._transitionComplete(a,g,d)};if(g&&h){var j=ya.getTransitionDurationFromElement(g);b(g).removeClass(vd.SHOW).one(ya.TRANSITION_END,i).emulateTransitionEnd(j)}else i()},c._transitionComplete=function(a,c,d){if(c){b(c).removeClass(vd.ACTIVE);var e=b(c.parentNode).find(wd.DROPDOWN_ACTIVE_CHILD)[0];e&&b(e).removeClass(vd.ACTIVE),"tab"===c.getAttribute("role")&&c.setAttribute("aria-selected",!1)}if(b(a).addClass(vd.ACTIVE),"tab"===a.getAttribute("role")&&a.setAttribute("aria-selected",!0),ya.reflow(a),a.classList.contains(vd.FADE)&&a.classList.add(vd.SHOW),a.parentNode&&b(a.parentNode).hasClass(vd.DROPDOWN_MENU)){var f=b(a).closest(wd.DROPDOWN)[0];if(f){var g=[].slice.call(f.querySelectorAll(wd.DROPDOWN_TOGGLE));b(g).addClass(vd.ACTIVE)}a.setAttribute("aria-expanded",!0)}d&&d()},a._jQueryInterface=function(c){return this.each(function(){var d=b(this),e=d.data(qd);if(e||(e=new a(this),d.data(qd,e)),"string"==typeof c){if(void 0===e[c])throw new TypeError('No method named "'+c+'"');e[c]()}})},d(a,null,[{key:"VERSION",get:function(){return pd}}]),a}();b(document).on(ud.CLICK_DATA_API,wd.DATA_TOGGLE,function(a){a.preventDefault(),xd._jQueryInterface.call(b(this),"show")}),b.fn[od]=xd._jQueryInterface,b.fn[od].Constructor=xd,b.fn[od].noConflict=function(){return b.fn[od]=td,xd._jQueryInterface};var yd="toast",zd="4.3.1",Ad="bs.toast",Bd="."+Ad,Cd=b.fn[yd],Dd={CLICK_DISMISS:"click.dismiss"+Bd,HIDE:"hide"+Bd,HIDDEN:"hidden"+Bd,SHOW:"show"+Bd,SHOWN:"shown"+Bd},Ed={FADE:"fade",HIDE:"hide",SHOW:"show",SHOWING:"showing"},Fd={animation:"boolean",autohide:"boolean",delay:"number"},Gd={animation:!0,autohide:!0,delay:500},Hd={DATA_DISMISS:'[data-dismiss="toast"]'},Id=function(){function a(a,b){this._element=a,this._config=this._getConfig(b),this._timeout=null,this._setListeners()}var c=a.prototype;return c.show=function(){var a=this;b(this._element).trigger(Dd.SHOW),this._config.animation&&this._element.classList.add(Ed.FADE);var c=function(){a._element.classList.remove(Ed.SHOWING),a._element.classList.add(Ed.SHOW),b(a._element).trigger(Dd.SHOWN),a._config.autohide&&a.hide()};if(this._element.classList.remove(Ed.HIDE),this._element.classList.add(Ed.SHOWING),this._config.animation){var d=ya.getTransitionDurationFromElement(this._element);b(this._element).one(ya.TRANSITION_END,c).emulateTransitionEnd(d)}else c()},c.hide=function(a){var c=this;this._element.classList.contains(Ed.SHOW)&&(b(this._element).trigger(Dd.HIDE),a?this._close():this._timeout=setTimeout(function(){c._close()},this._config.delay))},c.dispose=function(){clearTimeout(this._timeout),this._timeout=null,this._element.classList.contains(Ed.SHOW)&&this._element.classList.remove(Ed.SHOW),b(this._element).off(Dd.CLICK_DISMISS),b.removeData(this._element,Ad),this._element=null,this._config=null},c._getConfig=function(a){return a=f({},Gd,b(this._element).data(),"object"==typeof a&&a?a:{}),ya.typeCheckConfig(yd,a,this.constructor.DefaultType),a},c._setListeners=function(){var a=this;b(this._element).on(Dd.CLICK_DISMISS,Hd.DATA_DISMISS,function(){return a.hide(!0)})},c._close=function(){var a=this,c=function(){a._element.classList.add(Ed.HIDE),b(a._element).trigger(Dd.HIDDEN)};if(this._element.classList.remove(Ed.SHOW),this._config.animation){var d=ya.getTransitionDurationFromElement(this._element);b(this._element).one(ya.TRANSITION_END,c).emulateTransitionEnd(d)}else c()},a._jQueryInterface=function(c){return this.each(function(){var d=b(this),e=d.data(Ad),f="object"==typeof c&&c;if(e||(e=new a(this,f),d.data(Ad,e)),"string"==typeof c){if(void 0===e[c])throw new TypeError('No method named "'+c+'"');e[c](this)}})},d(a,null,[{key:"VERSION",get:function(){return zd}},{key:"DefaultType",get:function(){return Fd}},{key:"Default",get:function(){return Gd}}]),a}();b.fn[yd]=Id._jQueryInterface,b.fn[yd].Constructor=Id,b.fn[yd].noConflict=function(){return b.fn[yd]=Cd,Id._jQueryInterface},function(){if(void 0===b)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var a=b.fn.jquery.split(" ")[0].split("."),c=9;if(a[0]<2&&a[1]<c||1===a[0]&&a[1]===c&&a[2]<1||a[0]>=4)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(),a.Util=ya,a.Alert=Ia,a.Button=Sa,a.Carousel=ib,a.Collapse=vb,a.Dropdown=gc,a.Modal=tc,a.Popover=ad,a.Scrollspy=nd,a.Tab=xd,a.Toast=Id,a.Tooltip=Pc,Object.defineProperty(a,"__esModule",{value:!0})}),function(){"use strict";function a(a,b){if(a){if(b.element_.classList.contains(b.CssClasses_.MDL_JS_RIPPLE_EFFECT)){var c=document.createElement("span");c.classList.add(b.CssClasses_.MDL_RIPPLE_CONTAINER),c.classList.add(b.CssClasses_.MDL_JS_RIPPLE_EFFECT);var d=document.createElement("span");d.classList.add(b.CssClasses_.MDL_RIPPLE),c.appendChild(d),a.appendChild(c)}a.addEventListener("click",function(c){if("#"===a.getAttribute("href").charAt(0)){c.preventDefault();var d=a.href.split("#")[1],e=b.element_.querySelector("#"+d);b.resetTabState_(),b.resetPanelState_(),a.classList.add(b.CssClasses_.ACTIVE_CLASS),e.classList.add(b.CssClasses_.ACTIVE_CLASS)}})}}function b(a,b,c,d){function e(){var e=a.href.split("#")[1],f=d.content_.querySelector("#"+e);d.resetTabState_(b),d.resetPanelState_(c),a.classList.add(d.CssClasses_.IS_ACTIVE),f.classList.add(d.CssClasses_.IS_ACTIVE)}if(d.tabBar_.classList.contains(d.CssClasses_.JS_RIPPLE_EFFECT)){var f=document.createElement("span");f.classList.add(d.CssClasses_.RIPPLE_CONTAINER),f.classList.add(d.CssClasses_.JS_RIPPLE_EFFECT);var g=document.createElement("span");g.classList.add(d.CssClasses_.RIPPLE),f.appendChild(g),a.appendChild(f)}d.tabBar_.classList.contains(d.CssClasses_.TAB_MANUAL_SWITCH)||a.addEventListener("click",function(b){"#"===a.getAttribute("href").charAt(0)&&(b.preventDefault(),e())}),a.show=e}var c={upgradeDom:function(a,b){},upgradeElement:function(a,b){},upgradeElements:function(a){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(a,b){},register:function(a){},downgradeElements:function(a){}};c=function(){function a(a,b){for(var c=0;c<m.length;c++)if(m[c].className===a)return void 0!==b&&(m[c]=b),m[c];return!1}function b(a){var b=a.getAttribute("data-upgraded");return null===b?[""]:b.split(",")}function c(a,c){return-1!==b(a).indexOf(c)}function d(a,b,c){if("CustomEvent"in window&&"function"==typeof window.CustomEvent)return new CustomEvent(a,{bubbles:b,cancelable:c});var d=document.createEvent("Events");return d.initEvent(a,b,c),d}function e(b,c){if(void 0===b&&void 0===c)for(var d=0;d<m.length;d++)e(m[d].className,m[d].cssClass);else{var g=b;if(void 0===c){var h=a(g);h&&(c=h.cssClass)}for(var i=document.querySelectorAll("."+c),j=0;j<i.length;j++)f(i[j],g)}}function f(e,f){if(!("object"==typeof e&&e instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var g=d("mdl-componentupgrading",!0,!0);if(e.dispatchEvent(g),!g.defaultPrevented){var h=b(e),i=[];if(f)c(e,f)||i.push(a(f));else{var j=e.classList;m.forEach(function(a){j.contains(a.cssClass)&&-1===i.indexOf(a)&&!c(e,a.className)&&i.push(a)})}for(var k,l=0,p=i.length;l<p;l++){if(!(k=i[l]))throw new Error("Unable to find a registered component for the given class.");h.push(k.className),e.setAttribute("data-upgraded",h.join(","));var q=new k.classConstructor(e);q[o]=k,n.push(q);for(var r=0,s=k.callbacks.length;r<s;r++)k.callbacks[r](e);k.widget&&(e[k.className]=q);var t=d("mdl-componentupgraded",!0,!1);e.dispatchEvent(t)}}}function g(a){Array.isArray(a)||(a=a instanceof Element?[a]:Array.prototype.slice.call(a));for(var b,c=0,d=a.length;c<d;c++)(b=a[c])instanceof HTMLElement&&(f(b),b.children.length>0&&g(b.children))}function h(b){var c=void 0===b.widget&&void 0===b.widget,d=!0;c||(d=b.widget||b.widget);var e={classConstructor:b.constructor||b.constructor,className:b.classAsString||b.classAsString,cssClass:b.cssClass||b.cssClass,widget:d,callbacks:[]};if(m.forEach(function(a){if(a.cssClass===e.cssClass)throw new Error("The provided cssClass has already been registered: "+a.cssClass);if(a.className===e.className)throw new Error("The provided className has already been registered")}),b.constructor.prototype.hasOwnProperty(o))throw new Error("MDL component classes must not have "+o+" defined as a property.");a(b.classAsString,e)||m.push(e)}function i(b,c){var d=a(b);d&&d.callbacks.push(c)}function j(){for(var a=0;a<m.length;a++)e(m[a].className)}function k(a){if(a){var b=n.indexOf(a);n.splice(b,1);var c=a.element_.getAttribute("data-upgraded").split(","),e=c.indexOf(a[o].classAsString);c.splice(e,1),a.element_.setAttribute("data-upgraded",c.join(","));var f=d("mdl-componentdowngraded",!0,!1);a.element_.dispatchEvent(f)}}function l(a){var b=function(a){n.filter(function(b){return b.element_===a}).forEach(k)};if(a instanceof Array||a instanceof NodeList)for(var c=0;c<a.length;c++)b(a[c]);else{if(!(a instanceof Node))throw new Error("Invalid argument provided to downgrade MDL nodes.");b(a)}}var m=[],n=[],o="mdlComponentConfigInternal_";return{upgradeDom:e,upgradeElement:f,upgradeElements:g,upgradeAllRegistered:j,registerUpgradedCallback:i,register:h,downgradeElements:l}}(),c.ComponentConfigPublic,c.ComponentConfig,c.Component,c.upgradeDom=c.upgradeDom,c.upgradeElement=c.upgradeElement,c.upgradeElements=c.upgradeElements,c.upgradeAllRegistered=c.upgradeAllRegistered,c.registerUpgradedCallback=c.registerUpgradedCallback,c.register=c.register,c.downgradeElements=c.downgradeElements,window.componentHandler=c,window.componentHandler=c,window.addEventListener("load",function(){"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),c.upgradeAllRegistered()):(c.upgradeElement=function(){},c.register=function(){})}),Date.now||(Date.now=function(){return(new Date).getTime()},Date.now=Date.now);for(var d=["webkit","moz"],e=0;e<d.length&&!window.requestAnimationFrame;++e){var f=d[e];window.requestAnimationFrame=window[f+"RequestAnimationFrame"],window.cancelAnimationFrame=window[f+"CancelAnimationFrame"]||window[f+"CancelRequestAnimationFrame"],window.requestAnimationFrame=window.requestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var g=0;window.requestAnimationFrame=function(a){var b=Date.now(),c=Math.max(g+16,b);return setTimeout(function(){a(g=c)},c-b)},window.cancelAnimationFrame=clearTimeout,window.requestAnimationFrame=window.requestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame}var h=function(a){this.element_=a,this.init()};window.MaterialButton=h,h.prototype.Constant_={},h.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},h.prototype.blurHandler_=function(a){a&&this.element_.blur()},h.prototype.disable=function(){this.element_.disabled=!0},h.prototype.disable=h.prototype.disable,h.prototype.enable=function(){this.element_.disabled=!1},h.prototype.enable=h.prototype.enable,h.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var a=document.createElement("span");a.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),a.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(a)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},c.register({constructor:h,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0});var i=function(a){this.element_=a,this.init()};window.MaterialCheckbox=i,i.prototype.Constant_={TINY_TIMEOUT:.001},i.prototype.CssClasses_={INPUT:"mdl-checkbox__input",BOX_OUTLINE:"mdl-checkbox__box-outline",FOCUS_HELPER:"mdl-checkbox__focus-helper",TICK_OUTLINE:"mdl-checkbox__tick-outline",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-checkbox__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked",IS_UPGRADED:"is-upgraded"},i.prototype.onChange_=function(a){this.updateClasses_()},i.prototype.onFocus_=function(a){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},i.prototype.onBlur_=function(a){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},i.prototype.onMouseUp_=function(a){this.blur_()},i.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},i.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},i.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},i.prototype.checkToggleState=i.prototype.checkToggleState,i.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},i.prototype.checkDisabled=i.prototype.checkDisabled,i.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},i.prototype.disable=i.prototype.disable,i.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},i.prototype.enable=i.prototype.enable,i.prototype.check=function(){this.inputElement_.checked=!0,this.updateClasses_()},i.prototype.check=i.prototype.check,i.prototype.uncheck=function(){this.inputElement_.checked=!1,this.updateClasses_()},i.prototype.uncheck=i.prototype.uncheck,i.prototype.init=function(){if(this.element_){this.inputElement_=this.element_.querySelector("."+this.CssClasses_.INPUT);var a=document.createElement("span");a.classList.add(this.CssClasses_.BOX_OUTLINE);var b=document.createElement("span");b.classList.add(this.CssClasses_.FOCUS_HELPER)
;var c=document.createElement("span");if(c.classList.add(this.CssClasses_.TICK_OUTLINE),a.appendChild(c),this.element_.appendChild(b),this.element_.appendChild(a),this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement("span"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.boundRippleMouseUp=this.onMouseUp_.bind(this),this.rippleContainerElement_.addEventListener("mouseup",this.boundRippleMouseUp);var d=document.createElement("span");d.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(d),this.element_.appendChild(this.rippleContainerElement_)}this.boundInputOnChange=this.onChange_.bind(this),this.boundInputOnFocus=this.onFocus_.bind(this),this.boundInputOnBlur=this.onBlur_.bind(this),this.boundElementMouseUp=this.onMouseUp_.bind(this),this.inputElement_.addEventListener("change",this.boundInputOnChange),this.inputElement_.addEventListener("focus",this.boundInputOnFocus),this.inputElement_.addEventListener("blur",this.boundInputOnBlur),this.element_.addEventListener("mouseup",this.boundElementMouseUp),this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},c.register({constructor:i,classAsString:"MaterialCheckbox",cssClass:"mdl-js-checkbox",widget:!0});var j=function(a){this.element_=a,this.init()};window.MaterialIconToggle=j,j.prototype.Constant_={TINY_TIMEOUT:.001},j.prototype.CssClasses_={INPUT:"mdl-icon-toggle__input",JS_RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-icon-toggle__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked"},j.prototype.onChange_=function(a){this.updateClasses_()},j.prototype.onFocus_=function(a){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},j.prototype.onBlur_=function(a){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},j.prototype.onMouseUp_=function(a){this.blur_()},j.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},j.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},j.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},j.prototype.checkToggleState=j.prototype.checkToggleState,j.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},j.prototype.checkDisabled=j.prototype.checkDisabled,j.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},j.prototype.disable=j.prototype.disable,j.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},j.prototype.enable=j.prototype.enable,j.prototype.check=function(){this.inputElement_.checked=!0,this.updateClasses_()},j.prototype.check=j.prototype.check,j.prototype.uncheck=function(){this.inputElement_.checked=!1,this.updateClasses_()},j.prototype.uncheck=j.prototype.uncheck,j.prototype.init=function(){if(this.element_){if(this.inputElement_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.element_.classList.contains(this.CssClasses_.JS_RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement("span"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.JS_RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.boundRippleMouseUp=this.onMouseUp_.bind(this),this.rippleContainerElement_.addEventListener("mouseup",this.boundRippleMouseUp);var a=document.createElement("span");a.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(a),this.element_.appendChild(this.rippleContainerElement_)}this.boundInputOnChange=this.onChange_.bind(this),this.boundInputOnFocus=this.onFocus_.bind(this),this.boundInputOnBlur=this.onBlur_.bind(this),this.boundElementOnMouseUp=this.onMouseUp_.bind(this),this.inputElement_.addEventListener("change",this.boundInputOnChange),this.inputElement_.addEventListener("focus",this.boundInputOnFocus),this.inputElement_.addEventListener("blur",this.boundInputOnBlur),this.element_.addEventListener("mouseup",this.boundElementOnMouseUp),this.updateClasses_(),this.element_.classList.add("is-upgraded")}},c.register({constructor:j,classAsString:"MaterialIconToggle",cssClass:"mdl-js-icon-toggle",widget:!0});var k=function(a){this.element_=a,this.init()};window.MaterialMenu=k,k.prototype.Constant_={TRANSITION_DURATION_SECONDS:.3,TRANSITION_DURATION_FRACTION:.8,CLOSE_TIMEOUT:150},k.prototype.Keycodes_={ENTER:13,ESCAPE:27,SPACE:32,UP_ARROW:38,DOWN_ARROW:40},k.prototype.CssClasses_={CONTAINER:"mdl-menu__container",OUTLINE:"mdl-menu__outline",ITEM:"mdl-menu__item",ITEM_RIPPLE_CONTAINER:"mdl-menu__item-ripple-container",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE:"mdl-ripple",IS_UPGRADED:"is-upgraded",IS_VISIBLE:"is-visible",IS_ANIMATING:"is-animating",BOTTOM_LEFT:"mdl-menu--bottom-left",BOTTOM_RIGHT:"mdl-menu--bottom-right",TOP_LEFT:"mdl-menu--top-left",TOP_RIGHT:"mdl-menu--top-right",UNALIGNED:"mdl-menu--unaligned"},k.prototype.init=function(){if(this.element_){var a=document.createElement("div");a.classList.add(this.CssClasses_.CONTAINER),this.element_.parentElement.insertBefore(a,this.element_),this.element_.parentElement.removeChild(this.element_),a.appendChild(this.element_),this.container_=a;var b=document.createElement("div");b.classList.add(this.CssClasses_.OUTLINE),this.outline_=b,a.insertBefore(b,this.element_);var c=this.element_.getAttribute("for")||this.element_.getAttribute("data-mdl-for"),d=null;c&&(d=document.getElementById(c))&&(this.forElement_=d,d.addEventListener("click",this.handleForClick_.bind(this)),d.addEventListener("keydown",this.handleForKeyboardEvent_.bind(this)));var e=this.element_.querySelectorAll("."+this.CssClasses_.ITEM);this.boundItemKeydown_=this.handleItemKeyboardEvent_.bind(this),this.boundItemClick_=this.handleItemClick_.bind(this);for(var f=0;f<e.length;f++)e[f].addEventListener("click",this.boundItemClick_),e[f].tabIndex="-1",e[f].addEventListener("keydown",this.boundItemKeydown_);if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT))for(this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),f=0;f<e.length;f++){var g=e[f],h=document.createElement("span");h.classList.add(this.CssClasses_.ITEM_RIPPLE_CONTAINER);var i=document.createElement("span");i.classList.add(this.CssClasses_.RIPPLE),h.appendChild(i),g.appendChild(h),g.classList.add(this.CssClasses_.RIPPLE_EFFECT)}this.element_.classList.contains(this.CssClasses_.BOTTOM_LEFT)&&this.outline_.classList.add(this.CssClasses_.BOTTOM_LEFT),this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)&&this.outline_.classList.add(this.CssClasses_.BOTTOM_RIGHT),this.element_.classList.contains(this.CssClasses_.TOP_LEFT)&&this.outline_.classList.add(this.CssClasses_.TOP_LEFT),this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)&&this.outline_.classList.add(this.CssClasses_.TOP_RIGHT),this.element_.classList.contains(this.CssClasses_.UNALIGNED)&&this.outline_.classList.add(this.CssClasses_.UNALIGNED),a.classList.add(this.CssClasses_.IS_UPGRADED)}},k.prototype.handleForClick_=function(a){if(this.element_&&this.forElement_){var b=this.forElement_.getBoundingClientRect(),c=this.forElement_.parentElement.getBoundingClientRect();this.element_.classList.contains(this.CssClasses_.UNALIGNED)||(this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)?(this.container_.style.right=c.right-b.right+"px",this.container_.style.top=this.forElement_.offsetTop+this.forElement_.offsetHeight+"px"):this.element_.classList.contains(this.CssClasses_.TOP_LEFT)?(this.container_.style.left=this.forElement_.offsetLeft+"px",this.container_.style.bottom=c.bottom-b.top+"px"):this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?(this.container_.style.right=c.right-b.right+"px",this.container_.style.bottom=c.bottom-b.top+"px"):(this.container_.style.left=this.forElement_.offsetLeft+"px",this.container_.style.top=this.forElement_.offsetTop+this.forElement_.offsetHeight+"px"))}this.toggle(a)},k.prototype.handleForKeyboardEvent_=function(a){if(this.element_&&this.container_&&this.forElement_){var b=this.element_.querySelectorAll("."+this.CssClasses_.ITEM+":not([disabled])");b&&b.length>0&&this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)&&(a.keyCode===this.Keycodes_.UP_ARROW?(a.preventDefault(),b[b.length-1].focus()):a.keyCode===this.Keycodes_.DOWN_ARROW&&(a.preventDefault(),b[0].focus()))}},k.prototype.handleItemKeyboardEvent_=function(a){if(this.element_&&this.container_){var b=this.element_.querySelectorAll("."+this.CssClasses_.ITEM+":not([disabled])");if(b&&b.length>0&&this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)){var c=Array.prototype.slice.call(b).indexOf(a.target);if(a.keyCode===this.Keycodes_.UP_ARROW)a.preventDefault(),c>0?b[c-1].focus():b[b.length-1].focus();else if(a.keyCode===this.Keycodes_.DOWN_ARROW)a.preventDefault(),b.length>c+1?b[c+1].focus():b[0].focus();else if(a.keyCode===this.Keycodes_.SPACE||a.keyCode===this.Keycodes_.ENTER){a.preventDefault();var d=new MouseEvent("mousedown");a.target.dispatchEvent(d),d=new MouseEvent("mouseup"),a.target.dispatchEvent(d),a.target.click()}else a.keyCode===this.Keycodes_.ESCAPE&&(a.preventDefault(),this.hide())}}},k.prototype.handleItemClick_=function(a){a.target.hasAttribute("disabled")?a.stopPropagation():(this.closing_=!0,window.setTimeout(function(a){this.hide(),this.closing_=!1}.bind(this),this.Constant_.CLOSE_TIMEOUT))},k.prototype.applyClip_=function(a,b){this.element_.classList.contains(this.CssClasses_.UNALIGNED)?this.element_.style.clip="":this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)?this.element_.style.clip="rect(0 "+b+"px 0 "+b+"px)":this.element_.classList.contains(this.CssClasses_.TOP_LEFT)?this.element_.style.clip="rect("+a+"px 0 "+a+"px 0)":this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?this.element_.style.clip="rect("+a+"px "+b+"px "+a+"px "+b+"px)":this.element_.style.clip=""},k.prototype.removeAnimationEndListener_=function(a){a.target.classList.remove(k.prototype.CssClasses_.IS_ANIMATING)},k.prototype.addAnimationEndListener_=function(){this.element_.addEventListener("transitionend",this.removeAnimationEndListener_),this.element_.addEventListener("webkitTransitionEnd",this.removeAnimationEndListener_)},k.prototype.show=function(a){if(this.element_&&this.container_&&this.outline_){var b=this.element_.getBoundingClientRect().height,c=this.element_.getBoundingClientRect().width;this.container_.style.width=c+"px",this.container_.style.height=b+"px",this.outline_.style.width=c+"px",this.outline_.style.height=b+"px";for(var d=this.Constant_.TRANSITION_DURATION_SECONDS*this.Constant_.TRANSITION_DURATION_FRACTION,e=this.element_.querySelectorAll("."+this.CssClasses_.ITEM),f=0;f<e.length;f++){var g=null;g=this.element_.classList.contains(this.CssClasses_.TOP_LEFT)||this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?(b-e[f].offsetTop-e[f].offsetHeight)/b*d+"s":e[f].offsetTop/b*d+"s",e[f].style.transitionDelay=g}this.applyClip_(b,c),window.requestAnimationFrame(function(){this.element_.classList.add(this.CssClasses_.IS_ANIMATING),this.element_.style.clip="rect(0 "+c+"px "+b+"px 0)",this.container_.classList.add(this.CssClasses_.IS_VISIBLE)}.bind(this)),this.addAnimationEndListener_();var h=function(b){b===a||this.closing_||b.target.parentNode===this.element_||(document.removeEventListener("click",h),this.hide())}.bind(this);document.addEventListener("click",h)}},k.prototype.show=k.prototype.show,k.prototype.hide=function(){if(this.element_&&this.container_&&this.outline_){for(var a=this.element_.querySelectorAll("."+this.CssClasses_.ITEM),b=0;b<a.length;b++)a[b].style.removeProperty("transition-delay");var c=this.element_.getBoundingClientRect(),d=c.height,e=c.width;this.element_.classList.add(this.CssClasses_.IS_ANIMATING),this.applyClip_(d,e),this.container_.classList.remove(this.CssClasses_.IS_VISIBLE),this.addAnimationEndListener_()}},k.prototype.hide=k.prototype.hide,k.prototype.toggle=function(a){this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)?this.hide():this.show(a)},k.prototype.toggle=k.prototype.toggle,c.register({constructor:k,classAsString:"MaterialMenu",cssClass:"mdl-js-menu",widget:!0});var l=function(a){this.element_=a,this.init()};window.MaterialProgress=l,l.prototype.Constant_={},l.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},l.prototype.setProgress=function(a){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=a+"%")},l.prototype.setProgress=l.prototype.setProgress,l.prototype.setBuffer=function(a){this.bufferbar_.style.width=a+"%",this.auxbar_.style.width=100-a+"%"},l.prototype.setBuffer=l.prototype.setBuffer,l.prototype.init=function(){if(this.element_){var a=document.createElement("div");a.className="progressbar bar bar1",this.element_.appendChild(a),this.progressbar_=a,a=document.createElement("div"),a.className="bufferbar bar bar2",this.element_.appendChild(a),this.bufferbar_=a,a=document.createElement("div"),a.className="auxbar bar bar3",this.element_.appendChild(a),this.auxbar_=a,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},c.register({constructor:l,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0});var m=function(a){this.element_=a,this.init()};window.MaterialRadio=m,m.prototype.Constant_={TINY_TIMEOUT:.001},m.prototype.CssClasses_={IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked",IS_UPGRADED:"is-upgraded",JS_RADIO:"mdl-js-radio",RADIO_BTN:"mdl-radio__button",RADIO_OUTER_CIRCLE:"mdl-radio__outer-circle",RADIO_INNER_CIRCLE:"mdl-radio__inner-circle",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-radio__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple"},m.prototype.onChange_=function(a){for(var b=document.getElementsByClassName(this.CssClasses_.JS_RADIO),c=0;c<b.length;c++){b[c].querySelector("."+this.CssClasses_.RADIO_BTN).getAttribute("name")===this.btnElement_.getAttribute("name")&&void 0!==b[c].MaterialRadio&&b[c].MaterialRadio.updateClasses_()}},m.prototype.onFocus_=function(a){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},m.prototype.onBlur_=function(a){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},m.prototype.onMouseup_=function(a){this.blur_()},m.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},m.prototype.blur_=function(){window.setTimeout(function(){this.btnElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},m.prototype.checkDisabled=function(){this.btnElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},m.prototype.checkDisabled=m.prototype.checkDisabled,m.prototype.checkToggleState=function(){this.btnElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},m.prototype.checkToggleState=m.prototype.checkToggleState,m.prototype.disable=function(){this.btnElement_.disabled=!0,this.updateClasses_()},m.prototype.disable=m.prototype.disable,m.prototype.enable=function(){this.btnElement_.disabled=!1,this.updateClasses_()},m.prototype.enable=m.prototype.enable,m.prototype.check=function(){this.btnElement_.checked=!0,this.onChange_(null)},m.prototype.check=m.prototype.check,m.prototype.uncheck=function(){this.btnElement_.checked=!1,this.onChange_(null)},m.prototype.uncheck=m.prototype.uncheck,m.prototype.init=function(){if(this.element_){this.btnElement_=this.element_.querySelector("."+this.CssClasses_.RADIO_BTN),this.boundChangeHandler_=this.onChange_.bind(this),this.boundFocusHandler_=this.onChange_.bind(this),this.boundBlurHandler_=this.onBlur_.bind(this),this.boundMouseUpHandler_=this.onMouseup_.bind(this);var a=document.createElement("span");a.classList.add(this.CssClasses_.RADIO_OUTER_CIRCLE);var b=document.createElement("span");b.classList.add(this.CssClasses_.RADIO_INNER_CIRCLE),this.element_.appendChild(a),this.element_.appendChild(b);var c;if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),c=document.createElement("span"),c.classList.add(this.CssClasses_.RIPPLE_CONTAINER),c.classList.add(this.CssClasses_.RIPPLE_EFFECT),c.classList.add(this.CssClasses_.RIPPLE_CENTER),c.addEventListener("mouseup",this.boundMouseUpHandler_);var d=document.createElement("span");d.classList.add(this.CssClasses_.RIPPLE),c.appendChild(d),this.element_.appendChild(c)}this.btnElement_.addEventListener("change",this.boundChangeHandler_),this.btnElement_.addEventListener("focus",this.boundFocusHandler_),this.btnElement_.addEventListener("blur",this.boundBlurHandler_),this.element_.addEventListener("mouseup",this.boundMouseUpHandler_),this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},c.register({constructor:m,classAsString:"MaterialRadio",cssClass:"mdl-js-radio",widget:!0});var n=function(a){this.element_=a,this.isIE_=window.navigator.msPointerEnabled,this.init()};window.MaterialSlider=n,n.prototype.Constant_={},n.prototype.CssClasses_={IE_CONTAINER:"mdl-slider__ie-container",SLIDER_CONTAINER:"mdl-slider__container",BACKGROUND_FLEX:"mdl-slider__background-flex",BACKGROUND_LOWER:"mdl-slider__background-lower",BACKGROUND_UPPER:"mdl-slider__background-upper",IS_LOWEST_VALUE:"is-lowest-value",IS_UPGRADED:"is-upgraded"},n.prototype.onInput_=function(a){this.updateValueStyles_()},n.prototype.onChange_=function(a){this.updateValueStyles_()},n.prototype.onMouseUp_=function(a){a.target.blur()},n.prototype.onContainerMouseDown_=function(a){if(a.target===this.element_.parentElement){a.preventDefault();var b=new MouseEvent("mousedown",{target:a.target,buttons:a.buttons,clientX:a.clientX,clientY:this.element_.getBoundingClientRect().y});this.element_.dispatchEvent(b)}},n.prototype.updateValueStyles_=function(){var a=(this.element_.value-this.element_.min)/(this.element_.max-this.element_.min);0===a?this.element_.classList.add(this.CssClasses_.IS_LOWEST_VALUE):this.element_.classList.remove(this.CssClasses_.IS_LOWEST_VALUE),this.isIE_||(this.backgroundLower_.style.flex=a,this.backgroundLower_.style.webkitFlex=a,this.backgroundUpper_.style.flex=1-a,this.backgroundUpper_.style.webkitFlex=1-a)},n.prototype.disable=function(){this.element_.disabled=!0},n.prototype.disable=n.prototype.disable,n.prototype.enable=function(){this.element_.disabled=!1},n.prototype.enable=n.prototype.enable,n.prototype.change=function(a){void 0!==a&&(this.element_.value=a),this.updateValueStyles_()},n.prototype.change=n.prototype.change,n.prototype.init=function(){if(this.element_){if(this.isIE_){var a=document.createElement("div");a.classList.add(this.CssClasses_.IE_CONTAINER),this.element_.parentElement.insertBefore(a,this.element_),this.element_.parentElement.removeChild(this.element_),a.appendChild(this.element_)}else{var b=document.createElement("div");b.classList.add(this.CssClasses_.SLIDER_CONTAINER),this.element_.parentElement.insertBefore(b,this.element_),this.element_.parentElement.removeChild(this.element_),b.appendChild(this.element_);var c=document.createElement("div");c.classList.add(this.CssClasses_.BACKGROUND_FLEX),b.appendChild(c),this.backgroundLower_=document.createElement("div"),this.backgroundLower_.classList.add(this.CssClasses_.BACKGROUND_LOWER),c.appendChild(this.backgroundLower_),this.backgroundUpper_=document.createElement("div"),this.backgroundUpper_.classList.add(this.CssClasses_.BACKGROUND_UPPER),c.appendChild(this.backgroundUpper_)}this.boundInputHandler=this.onInput_.bind(this),this.boundChangeHandler=this.onChange_.bind(this),this.boundMouseUpHandler=this.onMouseUp_.bind(this),this.boundContainerMouseDownHandler=this.onContainerMouseDown_.bind(this),this.element_.addEventListener("input",this.boundInputHandler),this.element_.addEventListener("change",this.boundChangeHandler),this.element_.addEventListener("mouseup",this.boundMouseUpHandler),this.element_.parentElement.addEventListener("mousedown",this.boundContainerMouseDownHandler),this.updateValueStyles_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},c.register({constructor:n,classAsString:"MaterialSlider",cssClass:"mdl-js-slider",widget:!0});var o=function(a){if(this.element_=a,this.textElement_=this.element_.querySelector("."+this.cssClasses_.MESSAGE),this.actionElement_=this.element_.querySelector("."+this.cssClasses_.ACTION),!this.textElement_)throw new Error("There must be a message element for a snackbar.");if(!this.actionElement_)throw new Error("There must be an action element for a snackbar.");this.active=!1,this.actionHandler_=void 0,this.message_=void 0,this.actionText_=void 0,this.queuedNotifications_=[],this.setActionHidden_(!0)};window.MaterialSnackbar=o,o.prototype.Constant_={ANIMATION_LENGTH:250},o.prototype.cssClasses_={SNACKBAR:"mdl-snackbar",MESSAGE:"mdl-snackbar__text",ACTION:"mdl-snackbar__action",ACTIVE:"mdl-snackbar--active"},o.prototype.displaySnackbar_=function(){this.element_.setAttribute("aria-hidden","true"),this.actionHandler_&&(this.actionElement_.textContent=this.actionText_,this.actionElement_.addEventListener("click",this.actionHandler_),this.setActionHidden_(!1)),this.textElement_.textContent=this.message_,this.element_.classList.add(this.cssClasses_.ACTIVE),this.element_.setAttribute("aria-hidden","false"),setTimeout(this.cleanup_.bind(this),this.timeout_)},o.prototype.showSnackbar=function(a){if(void 0===a)throw new Error("Please provide a data object with at least a message to display.");if(void 0===a.message)throw new Error("Please provide a message to be displayed.");if(a.actionHandler&&!a.actionText)throw new Error("Please provide action text with the handler.");this.active?this.queuedNotifications_.push(a):(this.active=!0,this.message_=a.message,a.timeout?this.timeout_=a.timeout:this.timeout_=2750,a.actionHandler&&(this.actionHandler_=a.actionHandler),a.actionText&&(this.actionText_=a.actionText),this.displaySnackbar_())},o.prototype.showSnackbar=o.prototype.showSnackbar,o.prototype.checkQueue_=function(){this.queuedNotifications_.length>0&&this.showSnackbar(this.queuedNotifications_.shift())},o.prototype.cleanup_=function(){this.element_.classList.remove(this.cssClasses_.ACTIVE),setTimeout(function(){this.element_.setAttribute("aria-hidden","true"),this.textElement_.textContent="",Boolean(this.actionElement_.getAttribute("aria-hidden"))||(this.setActionHidden_(!0),this.actionElement_.textContent="",this.actionElement_.removeEventListener("click",this.actionHandler_)),this.actionHandler_=void 0,this.message_=void 0,this.actionText_=void 0,this.active=!1,this.checkQueue_()}.bind(this),this.Constant_.ANIMATION_LENGTH)},o.prototype.setActionHidden_=function(a){a?this.actionElement_.setAttribute("aria-hidden","true"):this.actionElement_.removeAttribute("aria-hidden")},c.register({constructor:o,classAsString:"MaterialSnackbar",cssClass:"mdl-js-snackbar",widget:!0});var p=function(a){this.element_=a,this.init()};window.MaterialSpinner=p,p.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},p.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},p.prototype.createLayer=function(a){var b=document.createElement("div");b.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),b.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+a);var c=document.createElement("div");c.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),c.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var d=document.createElement("div");d.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var e=document.createElement("div");e.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),e.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var f=[c,d,e],g=0;g<f.length;g++){var h=document.createElement("div");h.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),f[g].appendChild(h)}b.appendChild(c),b.appendChild(d),b.appendChild(e),this.element_.appendChild(b)},p.prototype.createLayer=p.prototype.createLayer,p.prototype.stop=function(){this.element_.classList.remove("is-active")},p.prototype.stop=p.prototype.stop,p.prototype.start=function(){this.element_.classList.add("is-active")},p.prototype.start=p.prototype.start,p.prototype.init=function(){if(this.element_){for(var a=1;a<=this.Constant_.MDL_SPINNER_LAYER_COUNT;a++)this.createLayer(a);this.element_.classList.add("is-upgraded")}},c.register({constructor:p,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0});var q=function(a){this.element_=a,this.init()};window.MaterialSwitch=q,q.prototype.Constant_={TINY_TIMEOUT:.001},q.prototype.CssClasses_={INPUT:"mdl-switch__input",TRACK:"mdl-switch__track",THUMB:"mdl-switch__thumb",FOCUS_HELPER:"mdl-switch__focus-helper",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-switch__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked"},q.prototype.onChange_=function(a){this.updateClasses_()},q.prototype.onFocus_=function(a){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},q.prototype.onBlur_=function(a){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},q.prototype.onMouseUp_=function(a){this.blur_()},q.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},q.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},q.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},q.prototype.checkDisabled=q.prototype.checkDisabled,q.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},q.prototype.checkToggleState=q.prototype.checkToggleState,q.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},q.prototype.disable=q.prototype.disable,q.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},q.prototype.enable=q.prototype.enable,q.prototype.on=function(){this.inputElement_.checked=!0,this.updateClasses_()},q.prototype.on=q.prototype.on,q.prototype.off=function(){this.inputElement_.checked=!1,this.updateClasses_()},q.prototype.off=q.prototype.off,q.prototype.init=function(){if(this.element_){this.inputElement_=this.element_.querySelector("."+this.CssClasses_.INPUT);var a=document.createElement("div");a.classList.add(this.CssClasses_.TRACK);var b=document.createElement("div");b.classList.add(this.CssClasses_.THUMB);var c=document.createElement("span");if(c.classList.add(this.CssClasses_.FOCUS_HELPER),b.appendChild(c),this.element_.appendChild(a),this.element_.appendChild(b),this.boundMouseUpHandler=this.onMouseUp_.bind(this),this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement("span"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.rippleContainerElement_.addEventListener("mouseup",this.boundMouseUpHandler);var d=document.createElement("span");d.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(d),this.element_.appendChild(this.rippleContainerElement_)}this.boundChangeHandler=this.onChange_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.inputElement_.addEventListener("change",this.boundChangeHandler),this.inputElement_.addEventListener("focus",this.boundFocusHandler),this.inputElement_.addEventListener("blur",this.boundBlurHandler),this.element_.addEventListener("mouseup",this.boundMouseUpHandler),this.updateClasses_(),this.element_.classList.add("is-upgraded")}},c.register({constructor:q,classAsString:"MaterialSwitch",cssClass:"mdl-js-switch",widget:!0});var r=function(a){this.element_=a,this.init()};window.MaterialTabs=r,r.prototype.Constant_={},r.prototype.CssClasses_={TAB_CLASS:"mdl-tabs__tab",PANEL_CLASS:"mdl-tabs__panel",ACTIVE_CLASS:"is-active",UPGRADED_CLASS:"is-upgraded",MDL_JS_RIPPLE_EFFECT:"mdl-js-ripple-effect",MDL_RIPPLE_CONTAINER:"mdl-tabs__ripple-container",MDL_RIPPLE:"mdl-ripple",MDL_JS_RIPPLE_EFFECT_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events"},r.prototype.initTabs_=function(){this.element_.classList.contains(this.CssClasses_.MDL_JS_RIPPLE_EFFECT)&&this.element_.classList.add(this.CssClasses_.MDL_JS_RIPPLE_EFFECT_IGNORE_EVENTS),this.tabs_=this.element_.querySelectorAll("."+this.CssClasses_.TAB_CLASS),this.panels_=this.element_.querySelectorAll("."+this.CssClasses_.PANEL_CLASS);for(var b=0;b<this.tabs_.length;b++)new a(this.tabs_[b],this);this.element_.classList.add(this.CssClasses_.UPGRADED_CLASS)},r.prototype.resetTabState_=function(){for(var a=0;a<this.tabs_.length;a++)this.tabs_[a].classList.remove(this.CssClasses_.ACTIVE_CLASS)},r.prototype.resetPanelState_=function(){for(var a=0;a<this.panels_.length;a++)this.panels_[a].classList.remove(this.CssClasses_.ACTIVE_CLASS)},r.prototype.init=function(){this.element_&&this.initTabs_()},c.register({constructor:r,classAsString:"MaterialTabs",cssClass:"mdl-js-tabs"});var s=function(a){this.element_=a,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()};window.MaterialTextfield=s,s.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},s.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},s.prototype.onKeyDown_=function(a){var b=a.target.value.split("\n").length;13===a.keyCode&&b>=this.maxRows&&a.preventDefault()},s.prototype.onFocus_=function(a){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},s.prototype.onBlur_=function(a){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},s.prototype.onReset_=function(a){this.updateClasses_()},s.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},s.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},s.prototype.checkDisabled=s.prototype.checkDisabled,s.prototype.checkFocus=function(){
Boolean(this.element_.querySelector(":focus"))?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},s.prototype.checkFocus=s.prototype.checkFocus,s.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},s.prototype.checkValidity=s.prototype.checkValidity,s.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},s.prototype.checkDirty=s.prototype.checkDirty,s.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},s.prototype.disable=s.prototype.disable,s.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},s.prototype.enable=s.prototype.enable,s.prototype.change=function(a){this.input_.value=a||"",this.updateClasses_()},s.prototype.change=s.prototype.change,s.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var a=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),a&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},c.register({constructor:s,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0});var t=function(a){this.element_=a,this.init()};window.MaterialTooltip=t,t.prototype.Constant_={},t.prototype.CssClasses_={IS_ACTIVE:"is-active",BOTTOM:"mdl-tooltip--bottom",LEFT:"mdl-tooltip--left",RIGHT:"mdl-tooltip--right",TOP:"mdl-tooltip--top"},t.prototype.handleMouseEnter_=function(a){var b=a.target.getBoundingClientRect(),c=b.left+b.width/2,d=b.top+b.height/2,e=this.element_.offsetWidth/2*-1,f=this.element_.offsetHeight/2*-1;this.element_.classList.contains(this.CssClasses_.LEFT)||this.element_.classList.contains(this.CssClasses_.RIGHT)?(c=b.width/2,d+f<0?(this.element_.style.top="0",this.element_.style.marginTop="0"):(this.element_.style.top=d+"px",this.element_.style.marginTop=f+"px")):c+e<0?(this.element_.style.left="0",this.element_.style.marginLeft="0"):(this.element_.style.left=c+"px",this.element_.style.marginLeft=e+"px"),this.element_.classList.contains(this.CssClasses_.TOP)?this.element_.style.top=b.top-this.element_.offsetHeight-10+"px":this.element_.classList.contains(this.CssClasses_.RIGHT)?this.element_.style.left=b.left+b.width+10+"px":this.element_.classList.contains(this.CssClasses_.LEFT)?this.element_.style.left=b.left-this.element_.offsetWidth-10+"px":this.element_.style.top=b.top+b.height+10+"px",this.element_.classList.add(this.CssClasses_.IS_ACTIVE)},t.prototype.hideTooltip_=function(){this.element_.classList.remove(this.CssClasses_.IS_ACTIVE)},t.prototype.init=function(){if(this.element_){var a=this.element_.getAttribute("for")||this.element_.getAttribute("data-mdl-for");a&&(this.forElement_=document.getElementById(a)),this.forElement_&&(this.forElement_.hasAttribute("tabindex")||this.forElement_.setAttribute("tabindex","0"),this.boundMouseEnterHandler=this.handleMouseEnter_.bind(this),this.boundMouseLeaveAndScrollHandler=this.hideTooltip_.bind(this),this.forElement_.addEventListener("mouseenter",this.boundMouseEnterHandler,!1),this.forElement_.addEventListener("touchend",this.boundMouseEnterHandler,!1),this.forElement_.addEventListener("mouseleave",this.boundMouseLeaveAndScrollHandler,!1),window.addEventListener("scroll",this.boundMouseLeaveAndScrollHandler,!0),window.addEventListener("touchstart",this.boundMouseLeaveAndScrollHandler))}},c.register({constructor:t,classAsString:"MaterialTooltip",cssClass:"mdl-tooltip"});var u=function(a){this.element_=a,this.init()};window.MaterialLayout=u,u.prototype.Constant_={MAX_WIDTH:"(max-width: 1024px)",TAB_SCROLL_PIXELS:100,RESIZE_TIMEOUT:100,MENU_ICON:"&#xE5D2;",CHEVRON_LEFT:"chevron_left",CHEVRON_RIGHT:"chevron_right"},u.prototype.Keycodes_={ENTER:13,ESCAPE:27,SPACE:32},u.prototype.Mode_={STANDARD:0,SEAMED:1,WATERFALL:2,SCROLL:3},u.prototype.CssClasses_={CONTAINER:"mdl-layout__container",HEADER:"mdl-layout__header",DRAWER:"mdl-layout__drawer",CONTENT:"mdl-layout__content",DRAWER_BTN:"mdl-layout__drawer-button",ICON:"material-icons",JS_RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-layout__tab-ripple-container",RIPPLE:"mdl-ripple",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",HEADER_SEAMED:"mdl-layout__header--seamed",HEADER_WATERFALL:"mdl-layout__header--waterfall",HEADER_SCROLL:"mdl-layout__header--scroll",FIXED_HEADER:"mdl-layout--fixed-header",OBFUSCATOR:"mdl-layout__obfuscator",TAB_BAR:"mdl-layout__tab-bar",TAB_CONTAINER:"mdl-layout__tab-bar-container",TAB:"mdl-layout__tab",TAB_BAR_BUTTON:"mdl-layout__tab-bar-button",TAB_BAR_LEFT_BUTTON:"mdl-layout__tab-bar-left-button",TAB_BAR_RIGHT_BUTTON:"mdl-layout__tab-bar-right-button",TAB_MANUAL_SWITCH:"mdl-layout__tab-manual-switch",PANEL:"mdl-layout__tab-panel",HAS_DRAWER:"has-drawer",HAS_TABS:"has-tabs",HAS_SCROLLING_HEADER:"has-scrolling-header",CASTING_SHADOW:"is-casting-shadow",IS_COMPACT:"is-compact",IS_SMALL_SCREEN:"is-small-screen",IS_DRAWER_OPEN:"is-visible",IS_ACTIVE:"is-active",IS_UPGRADED:"is-upgraded",IS_ANIMATING:"is-animating",ON_LARGE_SCREEN:"mdl-layout--large-screen-only",ON_SMALL_SCREEN:"mdl-layout--small-screen-only"},u.prototype.contentScrollHandler_=function(){if(!this.header_.classList.contains(this.CssClasses_.IS_ANIMATING)){var a=!this.element_.classList.contains(this.CssClasses_.IS_SMALL_SCREEN)||this.element_.classList.contains(this.CssClasses_.FIXED_HEADER);this.content_.scrollTop>0&&!this.header_.classList.contains(this.CssClasses_.IS_COMPACT)?(this.header_.classList.add(this.CssClasses_.CASTING_SHADOW),this.header_.classList.add(this.CssClasses_.IS_COMPACT),a&&this.header_.classList.add(this.CssClasses_.IS_ANIMATING)):this.content_.scrollTop<=0&&this.header_.classList.contains(this.CssClasses_.IS_COMPACT)&&(this.header_.classList.remove(this.CssClasses_.CASTING_SHADOW),this.header_.classList.remove(this.CssClasses_.IS_COMPACT),a&&this.header_.classList.add(this.CssClasses_.IS_ANIMATING))}},u.prototype.keyboardEventHandler_=function(a){a.keyCode===this.Keycodes_.ESCAPE&&this.drawer_.classList.contains(this.CssClasses_.IS_DRAWER_OPEN)&&this.toggleDrawer()},u.prototype.screenSizeHandler_=function(){this.screenSizeMediaQuery_.matches?this.element_.classList.add(this.CssClasses_.IS_SMALL_SCREEN):(this.element_.classList.remove(this.CssClasses_.IS_SMALL_SCREEN),this.drawer_&&(this.drawer_.classList.remove(this.CssClasses_.IS_DRAWER_OPEN),this.obfuscator_.classList.remove(this.CssClasses_.IS_DRAWER_OPEN)))},u.prototype.drawerToggleHandler_=function(a){if(a&&"keydown"===a.type){if(a.keyCode!==this.Keycodes_.SPACE&&a.keyCode!==this.Keycodes_.ENTER)return;a.preventDefault()}this.toggleDrawer()},u.prototype.headerTransitionEndHandler_=function(){this.header_.classList.remove(this.CssClasses_.IS_ANIMATING)},u.prototype.headerClickHandler_=function(){this.header_.classList.contains(this.CssClasses_.IS_COMPACT)&&(this.header_.classList.remove(this.CssClasses_.IS_COMPACT),this.header_.classList.add(this.CssClasses_.IS_ANIMATING))},u.prototype.resetTabState_=function(a){for(var b=0;b<a.length;b++)a[b].classList.remove(this.CssClasses_.IS_ACTIVE)},u.prototype.resetPanelState_=function(a){for(var b=0;b<a.length;b++)a[b].classList.remove(this.CssClasses_.IS_ACTIVE)},u.prototype.toggleDrawer=function(){var a=this.element_.querySelector("."+this.CssClasses_.DRAWER_BTN);this.drawer_.classList.toggle(this.CssClasses_.IS_DRAWER_OPEN),this.obfuscator_.classList.toggle(this.CssClasses_.IS_DRAWER_OPEN),this.drawer_.classList.contains(this.CssClasses_.IS_DRAWER_OPEN)?(this.drawer_.setAttribute("aria-hidden","false"),a.setAttribute("aria-expanded","true")):(this.drawer_.setAttribute("aria-hidden","true"),a.setAttribute("aria-expanded","false"))},u.prototype.toggleDrawer=u.prototype.toggleDrawer,u.prototype.init=function(){if(this.element_){var a=document.createElement("div");a.classList.add(this.CssClasses_.CONTAINER);var c=this.element_.querySelector(":focus");this.element_.parentElement.insertBefore(a,this.element_),this.element_.parentElement.removeChild(this.element_),a.appendChild(this.element_),c&&c.focus();for(var d=this.element_.childNodes,e=d.length,f=0;f<e;f++){var g=d[f];g.classList&&g.classList.contains(this.CssClasses_.HEADER)&&(this.header_=g),g.classList&&g.classList.contains(this.CssClasses_.DRAWER)&&(this.drawer_=g),g.classList&&g.classList.contains(this.CssClasses_.CONTENT)&&(this.content_=g)}window.addEventListener("pageshow",function(a){a.persisted&&(this.element_.style.overflowY="hidden",requestAnimationFrame(function(){this.element_.style.overflowY=""}.bind(this)))}.bind(this),!1),this.header_&&(this.tabBar_=this.header_.querySelector("."+this.CssClasses_.TAB_BAR));var h=this.Mode_.STANDARD;if(this.header_&&(this.header_.classList.contains(this.CssClasses_.HEADER_SEAMED)?h=this.Mode_.SEAMED:this.header_.classList.contains(this.CssClasses_.HEADER_WATERFALL)?(h=this.Mode_.WATERFALL,this.header_.addEventListener("transitionend",this.headerTransitionEndHandler_.bind(this)),this.header_.addEventListener("click",this.headerClickHandler_.bind(this))):this.header_.classList.contains(this.CssClasses_.HEADER_SCROLL)&&(h=this.Mode_.SCROLL,a.classList.add(this.CssClasses_.HAS_SCROLLING_HEADER)),h===this.Mode_.STANDARD?(this.header_.classList.add(this.CssClasses_.CASTING_SHADOW),this.tabBar_&&this.tabBar_.classList.add(this.CssClasses_.CASTING_SHADOW)):h===this.Mode_.SEAMED||h===this.Mode_.SCROLL?(this.header_.classList.remove(this.CssClasses_.CASTING_SHADOW),this.tabBar_&&this.tabBar_.classList.remove(this.CssClasses_.CASTING_SHADOW)):h===this.Mode_.WATERFALL&&(this.content_.addEventListener("scroll",this.contentScrollHandler_.bind(this)),this.contentScrollHandler_())),this.drawer_){var i=this.element_.querySelector("."+this.CssClasses_.DRAWER_BTN);if(!i){i=document.createElement("div"),i.setAttribute("aria-expanded","false"),i.setAttribute("role","button"),i.setAttribute("tabindex","0"),i.classList.add(this.CssClasses_.DRAWER_BTN);var j=document.createElement("i");j.classList.add(this.CssClasses_.ICON),j.innerHTML=this.Constant_.MENU_ICON,i.appendChild(j)}this.drawer_.classList.contains(this.CssClasses_.ON_LARGE_SCREEN)?i.classList.add(this.CssClasses_.ON_LARGE_SCREEN):this.drawer_.classList.contains(this.CssClasses_.ON_SMALL_SCREEN)&&i.classList.add(this.CssClasses_.ON_SMALL_SCREEN),i.addEventListener("click",this.drawerToggleHandler_.bind(this)),i.addEventListener("keydown",this.drawerToggleHandler_.bind(this)),this.element_.classList.add(this.CssClasses_.HAS_DRAWER),this.element_.classList.contains(this.CssClasses_.FIXED_HEADER)?this.header_.insertBefore(i,this.header_.firstChild):this.element_.insertBefore(i,this.content_);var k=document.createElement("div");k.classList.add(this.CssClasses_.OBFUSCATOR),this.element_.appendChild(k),k.addEventListener("click",this.drawerToggleHandler_.bind(this)),this.obfuscator_=k,this.drawer_.addEventListener("keydown",this.keyboardEventHandler_.bind(this)),this.drawer_.setAttribute("aria-hidden","true")}if(this.screenSizeMediaQuery_=window.matchMedia(this.Constant_.MAX_WIDTH),this.screenSizeMediaQuery_.addListener(this.screenSizeHandler_.bind(this)),this.screenSizeHandler_(),this.header_&&this.tabBar_){this.element_.classList.add(this.CssClasses_.HAS_TABS);var l=document.createElement("div");l.classList.add(this.CssClasses_.TAB_CONTAINER),this.header_.insertBefore(l,this.tabBar_),this.header_.removeChild(this.tabBar_);var m=document.createElement("div");m.classList.add(this.CssClasses_.TAB_BAR_BUTTON),m.classList.add(this.CssClasses_.TAB_BAR_LEFT_BUTTON);var n=document.createElement("i");n.classList.add(this.CssClasses_.ICON),n.textContent=this.Constant_.CHEVRON_LEFT,m.appendChild(n),m.addEventListener("click",function(){this.tabBar_.scrollLeft-=this.Constant_.TAB_SCROLL_PIXELS}.bind(this));var o=document.createElement("div");o.classList.add(this.CssClasses_.TAB_BAR_BUTTON),o.classList.add(this.CssClasses_.TAB_BAR_RIGHT_BUTTON);var p=document.createElement("i");p.classList.add(this.CssClasses_.ICON),p.textContent=this.Constant_.CHEVRON_RIGHT,o.appendChild(p),o.addEventListener("click",function(){this.tabBar_.scrollLeft+=this.Constant_.TAB_SCROLL_PIXELS}.bind(this)),l.appendChild(m),l.appendChild(this.tabBar_),l.appendChild(o);var q=function(){this.tabBar_.scrollLeft>0?m.classList.add(this.CssClasses_.IS_ACTIVE):m.classList.remove(this.CssClasses_.IS_ACTIVE),this.tabBar_.scrollLeft<this.tabBar_.scrollWidth-this.tabBar_.offsetWidth?o.classList.add(this.CssClasses_.IS_ACTIVE):o.classList.remove(this.CssClasses_.IS_ACTIVE)}.bind(this);this.tabBar_.addEventListener("scroll",q),q();var r=function(){this.resizeTimeoutId_&&clearTimeout(this.resizeTimeoutId_),this.resizeTimeoutId_=setTimeout(function(){q(),this.resizeTimeoutId_=null}.bind(this),this.Constant_.RESIZE_TIMEOUT)}.bind(this);window.addEventListener("resize",r),this.tabBar_.classList.contains(this.CssClasses_.JS_RIPPLE_EFFECT)&&this.tabBar_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS);for(var s=this.tabBar_.querySelectorAll("."+this.CssClasses_.TAB),t=this.content_.querySelectorAll("."+this.CssClasses_.PANEL),u=0;u<s.length;u++)new b(s[u],s,t,this)}this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},window.MaterialLayoutTab=b,c.register({constructor:u,classAsString:"MaterialLayout",cssClass:"mdl-js-layout"});var v=function(a){this.element_=a,this.init()};window.MaterialDataTable=v,v.prototype.Constant_={},v.prototype.CssClasses_={DATA_TABLE:"mdl-data-table",SELECTABLE:"mdl-data-table--selectable",SELECT_ELEMENT:"mdl-data-table__select",IS_SELECTED:"is-selected",IS_UPGRADED:"is-upgraded"},v.prototype.selectRow_=function(a,b,c){return b?function(){a.checked?b.classList.add(this.CssClasses_.IS_SELECTED):b.classList.remove(this.CssClasses_.IS_SELECTED)}.bind(this):c?function(){var b,d;if(a.checked)for(b=0;b<c.length;b++)d=c[b].querySelector("td").querySelector(".mdl-checkbox"),d.MaterialCheckbox.check(),c[b].classList.add(this.CssClasses_.IS_SELECTED);else for(b=0;b<c.length;b++)d=c[b].querySelector("td").querySelector(".mdl-checkbox"),d.MaterialCheckbox.uncheck(),c[b].classList.remove(this.CssClasses_.IS_SELECTED)}.bind(this):void 0},v.prototype.createCheckbox_=function(a,b){var d=document.createElement("label"),e=["mdl-checkbox","mdl-js-checkbox","mdl-js-ripple-effect",this.CssClasses_.SELECT_ELEMENT];d.className=e.join(" ");var f=document.createElement("input");return f.type="checkbox",f.classList.add("mdl-checkbox__input"),a?(f.checked=a.classList.contains(this.CssClasses_.IS_SELECTED),f.addEventListener("change",this.selectRow_(f,a))):b&&f.addEventListener("change",this.selectRow_(f,null,b)),d.appendChild(f),c.upgradeElement(d,"MaterialCheckbox"),d},v.prototype.init=function(){if(this.element_){var a=this.element_.querySelector("th"),b=Array.prototype.slice.call(this.element_.querySelectorAll("tbody tr")),c=Array.prototype.slice.call(this.element_.querySelectorAll("tfoot tr")),d=b.concat(c);if(this.element_.classList.contains(this.CssClasses_.SELECTABLE)){var e=document.createElement("th"),f=this.createCheckbox_(null,d);e.appendChild(f),a.parentElement.insertBefore(e,a);for(var g=0;g<d.length;g++){var h=d[g].querySelector("td");if(h){var i=document.createElement("td");if("TBODY"===d[g].parentNode.nodeName.toUpperCase()){var j=this.createCheckbox_(d[g]);i.appendChild(j)}d[g].insertBefore(i,h)}}this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}}},c.register({constructor:v,classAsString:"MaterialDataTable",cssClass:"mdl-js-data-table"});var w=function(a){this.element_=a,this.init()};window.MaterialRipple=w,w.prototype.Constant_={INITIAL_SCALE:"scale(0.0001, 0.0001)",INITIAL_SIZE:"1px",INITIAL_OPACITY:"0.4",FINAL_OPACITY:"0",FINAL_SCALE:""},w.prototype.CssClasses_={RIPPLE_CENTER:"mdl-ripple--center",RIPPLE_EFFECT_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE:"mdl-ripple",IS_ANIMATING:"is-animating",IS_VISIBLE:"is-visible"},w.prototype.downHandler_=function(a){if(!this.rippleElement_.style.width&&!this.rippleElement_.style.height){var b=this.element_.getBoundingClientRect();this.boundHeight=b.height,this.boundWidth=b.width,this.rippleSize_=2*Math.sqrt(b.width*b.width+b.height*b.height)+2,this.rippleElement_.style.width=this.rippleSize_+"px",this.rippleElement_.style.height=this.rippleSize_+"px"}if(this.rippleElement_.classList.add(this.CssClasses_.IS_VISIBLE),"mousedown"===a.type&&this.ignoringMouseDown_)this.ignoringMouseDown_=!1;else{"touchstart"===a.type&&(this.ignoringMouseDown_=!0);if(this.getFrameCount()>0)return;this.setFrameCount(1);var c,d,e=a.currentTarget.getBoundingClientRect();if(0===a.clientX&&0===a.clientY)c=Math.round(e.width/2),d=Math.round(e.height/2);else{var f=void 0!==a.clientX?a.clientX:a.touches[0].clientX,g=void 0!==a.clientY?a.clientY:a.touches[0].clientY;c=Math.round(f-e.left),d=Math.round(g-e.top)}this.setRippleXY(c,d),this.setRippleStyles(!0),window.requestAnimationFrame(this.animFrameHandler.bind(this))}},w.prototype.upHandler_=function(a){a&&2!==a.detail&&window.setTimeout(function(){this.rippleElement_.classList.remove(this.CssClasses_.IS_VISIBLE)}.bind(this),0)},w.prototype.init=function(){if(this.element_){var a=this.element_.classList.contains(this.CssClasses_.RIPPLE_CENTER);this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT_IGNORE_EVENTS)||(this.rippleElement_=this.element_.querySelector("."+this.CssClasses_.RIPPLE),this.frameCount_=0,this.rippleSize_=0,this.x_=0,this.y_=0,this.ignoringMouseDown_=!1,this.boundDownHandler=this.downHandler_.bind(this),this.element_.addEventListener("mousedown",this.boundDownHandler),this.element_.addEventListener("touchstart",this.boundDownHandler),this.boundUpHandler=this.upHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundUpHandler),this.element_.addEventListener("mouseleave",this.boundUpHandler),this.element_.addEventListener("touchend",this.boundUpHandler),this.element_.addEventListener("blur",this.boundUpHandler),this.getFrameCount=function(){return this.frameCount_},this.setFrameCount=function(a){this.frameCount_=a},this.getRippleElement=function(){return this.rippleElement_},this.setRippleXY=function(a,b){this.x_=a,this.y_=b},this.setRippleStyles=function(b){if(null!==this.rippleElement_){var c,d,e="translate("+this.x_+"px, "+this.y_+"px)";b?(d=this.Constant_.INITIAL_SCALE,this.Constant_.INITIAL_SIZE):(d=this.Constant_.FINAL_SCALE,this.rippleSize_+"px",a&&(e="translate("+this.boundWidth/2+"px, "+this.boundHeight/2+"px)")),c="translate(-50%, -50%) "+e+d,this.rippleElement_.style.webkitTransform=c,this.rippleElement_.style.msTransform=c,this.rippleElement_.style.transform=c,b?this.rippleElement_.classList.remove(this.CssClasses_.IS_ANIMATING):this.rippleElement_.classList.add(this.CssClasses_.IS_ANIMATING)}},this.animFrameHandler=function(){this.frameCount_-- >0?window.requestAnimationFrame(this.animFrameHandler.bind(this)):this.setRippleStyles(!1)})}},c.register({constructor:w,classAsString:"MaterialRipple",cssClass:"mdl-js-ripple-effect",widget:!1})}(),function(a){a.version={versionStr:"2.4.1",major:parseInt("2",10),minor:parseInt("4",10),revision:parseInt("1",10)};var b={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},c=Object.prototype.toString,d=Object.prototype.hasOwnProperty;a.isFunction=function(b){return"function"===a.type(b)},a.isArray=Array.isArray||function(b){return"array"===a.type(b)},a.isWindow=function(a){return a&&"object"==typeof a&&"setInterval"in a},a.type=function(a){return null===a||void 0===a?String(a):b[c.call(a)]||"object"},a.isPlainObject=function(b){if(!b||"object"!==OpenSeadragon.type(b)||b.nodeType||a.isWindow(b))return!1;if(b.constructor&&!d.call(b,"constructor")&&!d.call(b.constructor.prototype,"isPrototypeOf"))return!1;var c;for(var e in b)c=e;return void 0===c||d.call(b,c)},a.isEmptyObject=function(a){for(var b in a)return!1;return!0},a.freezeObject=function(b){return Object.freeze?a.freezeObject=Object.freeze:a.freezeObject=function(a){return a},a.freezeObject(b)},a.supportsCanvas=function(){var b=document.createElement("canvas");return!(!a.isFunction(b.getContext)||!b.getContext("2d"))}(),a.isCanvasTainted=function(a){var b=!1;try{a.getContext("2d").getImageData(0,0,1,1)}catch(c){b=!0}return b},a.pixelDensityRatio=function(){if(a.supportsCanvas){var b=document.createElement("canvas").getContext("2d"),c=window.devicePixelRatio||1,d=b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1;return Math.max(c,1)/d}return 1}()}(OpenSeadragon),function($){function getOffsetParent(a,b){return b&&a!=document.body?document.body:a.offsetParent}$.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=arguments.length,i=!1,j=1;for("boolean"==typeof g&&(i=g,g=arguments[1]||{},j=2),"object"==typeof g||OpenSeadragon.isFunction(g)||(g={}),h===j&&(g=this,--j);j<h;j++)if(null!==(a=arguments[j])||void 0!==a)for(b in a)c=g[b],d=a[b],g!==d&&(i&&d&&(OpenSeadragon.isPlainObject(d)||(e=OpenSeadragon.isArray(d)))?(e?(e=!1,f=c&&OpenSeadragon.isArray(c)?c:[]):f=c&&OpenSeadragon.isPlainObject(c)?c:{},g[b]=OpenSeadragon.extend(i,f,d)):void 0!==d&&(g[b]=d));return g};var isIOSDevice=function(){if("object"!=typeof navigator)return!1;var a=navigator.userAgent;return"string"==typeof a&&(-1!==a.indexOf("iPhone")||-1!==a.indexOf("iPad")||-1!==a.indexOf("iPod"))};$.extend($,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:isIOSDevice(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,opacity:1,preload:!1,compositeOperation:null,imageSmoothingEnabled:!0,placeholderFillStyle:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"]},SIGNAL:"----seadragon----",delegate:function(a,b){return function(){var c=arguments;return void 0===c&&(c=[]),b.apply(a,c)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},getElement:function(a){return"string"==typeof a&&(a=document.getElementById(a)),a},getElementPosition:function(a){var b,c,d=new $.Point;for(a=$.getElement(a),b="fixed"==$.getElementStyle(a).position,c=getOffsetParent(a,b);c;)d.x+=a.offsetLeft,d.y+=a.offsetTop,b&&(d=d.plus($.getPageScroll())),a=c,b="fixed"==$.getElementStyle(a).position,c=getOffsetParent(a,b);return d},getElementOffset:function(a){a=$.getElement(a);var b,c,d=a&&a.ownerDocument,e={top:0,left:0};return d?(b=d.documentElement,void 0!==a.getBoundingClientRect&&(e=a.getBoundingClientRect()),c=d==d.window?d:9===d.nodeType&&(d.defaultView||d.parentWindow),new $.Point(e.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0),e.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0))):new $.Point},getElementSize:function(a){return a=$.getElement(a),new $.Point(a.clientWidth,a.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(a){return a=$.getElement(a),a.currentStyle}:function(a){return a=$.getElement(a),window.getComputedStyle(a,"")},getCssPropertyWithVendorPrefix:function(a){var b={};return $.getCssPropertyWithVendorPrefix=function(a){if(void 0!==b[a])return b[a];var c=document.createElement("div").style,d=null;if(void 0!==c[a])d=a;else for(var e=["Webkit","Moz","MS","O","webkit","moz","ms","o"],f=$.capitalizeFirstLetter(a),g=0;g<e.length;g++){var h=e[g]+f;if(void 0!==c[h]){d=h;break}}return b[a]=d,d},$.getCssPropertyWithVendorPrefix(a)},capitalizeFirstLetter:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},positiveModulo:function(a,b){var c=a%b;return c<0&&(c+=b),c},pointInElement:function(a,b){a=$.getElement(a);var c=$.getElementOffset(a),d=$.getElementSize(a);return b.x>=c.x&&b.x<c.x+d.x&&b.y<c.y+d.y&&b.y>=c.y},getEvent:function(a){return $.getEvent=a?function(a){return a}:function(){return window.event},$.getEvent(a)},getMousePosition:function(a){if("number"==typeof a.pageX)$.getMousePosition=function(a){var b=new $.Point;return a=$.getEvent(a),b.x=a.pageX,b.y=a.pageY,b};else{if("number"!=typeof a.clientX)throw new Error("Unknown event mouse position, no known technique.");$.getMousePosition=function(a){var b=new $.Point;return a=$.getEvent(a),b.x=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,b.y=a.clientY+document.body.scrollTop+document.documentElement.scrollTop,b}}return $.getMousePosition(a)},getPageScroll:function(){var a=document.documentElement||{},b=document.body||{};if("number"==typeof window.pageXOffset)$.getPageScroll=function(){return new $.Point(window.pageXOffset,window.pageYOffset)};else if(b.scrollLeft||b.scrollTop)$.getPageScroll=function(){return new $.Point(document.body.scrollLeft,document.body.scrollTop)};else{if(!a.scrollLeft&&!a.scrollTop)return new $.Point(0,0);$.getPageScroll=function(){return new $.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)}}return $.getPageScroll()},setPageScroll:function(a){if(void 0!==window.scrollTo)$.setPageScroll=function(a){window.scrollTo(a.x,a.y)};else{var b=$.getPageScroll();if(b.x===a.x&&b.y===a.y)return;document.body.scrollLeft=a.x,document.body.scrollTop=a.y;var c=$.getPageScroll();if(c.x!==b.x&&c.y!==b.y)return void($.setPageScroll=function(a){document.body.scrollLeft=a.x,document.body.scrollTop=a.y});if(document.documentElement.scrollLeft=a.x,document.documentElement.scrollTop=a.y,c=$.getPageScroll(),c.x!==b.x&&c.y!==b.y)return void($.setPageScroll=function(a){document.documentElement.scrollLeft=a.x,document.documentElement.scrollTop=a.y});$.setPageScroll=function(a){}}return $.setPageScroll(a)},getWindowSize:function(){var a=document.documentElement||{},b=document.body||{};if("number"==typeof window.innerWidth)$.getWindowSize=function(){return new $.Point(window.innerWidth,window.innerHeight)};else if(a.clientWidth||a.clientHeight)$.getWindowSize=function(){return new $.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else{if(!b.clientWidth&&!b.clientHeight)throw new Error("Unknown window size, no known technique.");$.getWindowSize=function(){return new $.Point(document.body.clientWidth,document.body.clientHeight)}}return $.getWindowSize()},makeCenteredNode:function(a){a=$.getElement(a);var b=[$.makeNeutralElement("div"),$.makeNeutralElement("div"),$.makeNeutralElement("div")];return $.extend(b[0].style,{display:"table",height:"100%",width:"100%"}),$.extend(b[1].style,{display:"table-row"}),$.extend(b[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),b[0].appendChild(b[1]),b[1].appendChild(b[2]),b[2].appendChild(a),b[0]},makeNeutralElement:function(a){var b=document.createElement(a),c=b.style;return c.background="transparent none",c.border="none",c.margin="0px",c.padding="0px",c.position="static",b},now:function(){return Date.now?$.now=Date.now:$.now=function(){return(new Date).getTime()},$.now()},makeTransparentImage:function(a){return $.makeTransparentImage=function(a){var b=$.makeNeutralElement("img");return b.src=a,b},
$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<7&&($.makeTransparentImage=function(a){var b=$.makeNeutralElement("img"),c=null;return c=$.makeNeutralElement("span"),c.style.display="inline-block",b.onload=function(){c.style.width=c.style.width||b.width+"px",c.style.height=c.style.height||b.height+"px",b.onload=null,b=null},b.src=a,c.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+a+"', sizingMethod='scale')",c}),$.makeTransparentImage(a)},setElementOpacity:function(a,b,c){var d,e;a=$.getElement(a),c&&!$.Browser.alpha&&(b=Math.round(b)),$.Browser.opacity?a.style.opacity=b<1?b:"":b<1?(d=Math.round(100*b),e="alpha(opacity="+d+")",a.style.filter=e):a.style.filter=""},setElementTouchActionNone:function(a){a=$.getElement(a),void 0!==a.style.touchAction?a.style.touchAction="none":void 0!==a.style.msTouchAction&&(a.style.msTouchAction="none")},addClass:function(a,b){a=$.getElement(a),a.className?-1===(" "+a.className+" ").indexOf(" "+b+" ")&&(a.className+=" "+b):a.className=b},indexOf:function(a,b,c){return Array.prototype.indexOf?this.indexOf=function(a,b,c){return a.indexOf(b,c)}:this.indexOf=function(a,b,c){var d,e,f=c||0;if(!a)throw new TypeError;if(0===(e=a.length)||f>=e)return-1;for(f<0&&(f=e-Math.abs(f)),d=f;d<e;d++)if(a[d]===b)return d;return-1},this.indexOf(a,b,c)},removeClass:function(a,b){var c,d,e=[];for(a=$.getElement(a),c=a.className.split(/\s+/),d=0;d<c.length;d++)c[d]&&c[d]!==b&&e.push(c[d]);a.className=e.join(" ")},addEvent:function(){if(window.addEventListener)return function(a,b,c,d){a=$.getElement(a),a.addEventListener(b,c,d)};if(window.attachEvent)return function(a,b,c,d){a=$.getElement(a),a.attachEvent("on"+b,c)};throw new Error("No known event model.")}(),removeEvent:function(){if(window.removeEventListener)return function(a,b,c,d){a=$.getElement(a),a.removeEventListener(b,c,d)};if(window.detachEvent)return function(a,b,c,d){a=$.getElement(a),a.detachEvent("on"+b,c)};throw new Error("No known event model.")}(),cancelEvent:function(a){a=$.getEvent(a),a.preventDefault?$.cancelEvent=function(a){a.preventDefault()}:$.cancelEvent=function(a){a=$.getEvent(a),a.cancel=!0,a.returnValue=!1},$.cancelEvent(a)},stopEvent:function(a){a=$.getEvent(a),a.stopPropagation?$.stopEvent=function(a){a.stopPropagation()}:$.stopEvent=function(a){a=$.getEvent(a),a.cancelBubble=!0},$.stopEvent(a)},createCallback:function(a,b){var c,d=[];for(c=2;c<arguments.length;c++)d.push(arguments[c]);return function(){var c,e=d.concat([]);for(c=0;c<arguments.length;c++)e.push(arguments[c]);return b.apply(a,e)}},getUrlParameter:function(a){var b=URLPARAMS[a];return b||null},getUrlProtocol:function(a){var b=a.match(/^([a-z]+:)\/\//i);return null===b?window.location.protocol:b[1].toLowerCase()},createAjaxRequest:function(a){var b;try{b=!!new ActiveXObject("Microsoft.XMLHTTP")}catch(c){b=!1}if(b)window.XMLHttpRequest?$.createAjaxRequest=function(a){return a?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:$.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else{if(!window.XMLHttpRequest)throw new Error("Browser doesn't support XMLHttpRequest.");$.createAjaxRequest=function(){return new XMLHttpRequest}}return $.createAjaxRequest(a)},makeAjaxRequest:function(a,b,c){var d,e,f;$.isPlainObject(a)&&(b=a.success,c=a.error,d=a.withCredentials,e=a.headers,f=a.responseType||null,a=a.url);var g=$.getUrlProtocol(a),h=$.createAjaxRequest("file:"===g);if(!$.isFunction(b))throw new Error("makeAjaxRequest requires a success callback");h.onreadystatechange=function(){4==h.readyState&&(h.onreadystatechange=function(){},h.status>=200&&h.status<300||0===h.status&&"http:"!==g&&"https:"!==g?b(h):($.console.log("AJAX request returned %d: %s",h.status,a),$.isFunction(c)&&c(h)))};try{if(h.open("GET",a,!0),f&&(h.responseType=f),e)for(var i in e)e.hasOwnProperty(i)&&e[i]&&h.setRequestHeader(i,e[i]);d&&(h.withCredentials=!0),h.send(null)}catch(m){var j=m.message,k=$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<10;if(k&&void 0!==m.number&&-2147024891==m.number&&(j+="\nSee http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx#xdomain"),$.console.log("%s while making AJAX request: %s",m.name,j),h.onreadystatechange=function(){},window.XDomainRequest){var l=new XDomainRequest;if(l){l.onload=function(a){$.isFunction(b)&&b({responseText:l.responseText,status:200,statusText:"OK"})},l.onerror=function(a){$.isFunction(c)&&c({responseText:l.responseText,status:444,statusText:"An error happened. Due to an XDomainRequest deficiency we can not extract any information about this error. Upgrade your browser."})};try{l.open("GET",a),l.send()}catch(n){$.isFunction(c)&&c(h,m)}}}else $.isFunction(c)&&c(h,m)}return h},jsonp:function(a){var b,c=a.url,d=document.head||document.getElementsByTagName("head")[0]||document.documentElement,e=a.callbackName||"openseadragon"+$.now(),f=window[e],g="$1"+e+"$2",h=a.param||"callback",i=a.callback;c=c.replace(/(\=)\?(&|$)|\?\?/i,g),c+=(/\?/.test(c)?"&":"?")+h+"="+e,window[e]=function(a){if(f)window[e]=f;else try{delete window[e]}catch(b){}i&&$.isFunction(i)&&i(a)},b=document.createElement("script"),void 0===a.async&&!1===a.async||(b.async="async"),a.scriptCharset&&(b.charset=a.scriptCharset),b.src=c,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,d&&b.parentNode&&d.removeChild(b),b=void 0)},d.insertBefore(b,d.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(a){if(window.DOMParser)$.parseXml=function(a){var b;return b=new DOMParser,b.parseFromString(a,"text/xml")};else{if(!window.ActiveXObject)throw new Error("Browser doesn't support XML DOM.");$.parseXml=function(a){var b=null;return b=new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a),b}}return $.parseXml(a)},parseJSON:function(string){return window.JSON&&window.JSON.parse?$.parseJSON=window.JSON.parse:$.parseJSON=function(string){return eval("("+string+")")},$.parseJSON(string)},imageFormatSupported:function(a){return a=a||"",!!FILEFORMATS[a.toLowerCase()]}}),$.Browser={vendor:$.BROWSERS.UNKNOWN,version:0,alpha:!0};var FILEFORMATS={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},URLPARAMS={};!function(){var a,b=navigator.appVersion,c=navigator.userAgent;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(c.substring(c.indexOf("MSIE")+5,c.indexOf(";",c.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(c.indexOf("Firefox")>=0?($.Browser.vendor=$.BROWSERS.FIREFOX,$.Browser.version=parseFloat(c.substring(c.indexOf("Firefox")+8))):c.indexOf("Safari")>=0?($.Browser.vendor=c.indexOf("Chrome")>=0?$.BROWSERS.CHROME:$.BROWSERS.SAFARI,$.Browser.version=parseFloat(c.substring(c.substring(0,c.indexOf("Safari")).lastIndexOf("/")+1,c.indexOf("Safari")))):(a=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!==a.exec(c)&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(RegExp.$1))));break;case"Opera":$.Browser.vendor=$.BROWSERS.OPERA,$.Browser.version=parseFloat(b)}var d,e,f,g=window.location.search.substring(1),h=g.split("&");for(f=0;f<h.length;f++)d=h[f],(e=d.indexOf("="))>0&&(URLPARAMS[d.substring(0,e)]=decodeURIComponent(d.substring(e+1)));$.Browser.alpha=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9||$.Browser.vendor==$.BROWSERS.CHROME&&$.Browser.version<2),$.Browser.opacity=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9)}();var nullfunction=function(a){};$.console=window.console||{log:nullfunction,debug:nullfunction,info:nullfunction,warn:nullfunction,error:nullfunction,assert:nullfunction},function(a){var b=a.requestAnimationFrame||a.mozRequestAnimationFrame||a.webkitRequestAnimationFrame||a.msRequestAnimationFrame,c=a.cancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelAnimationFrame||a.msCancelAnimationFrame;if(b&&c)$.requestAnimationFrame=function(){return b.apply(a,arguments)},$.cancelAnimationFrame=function(){return c.apply(a,arguments)};else{var d,e=[],f=[],g=0;$.requestAnimationFrame=function(a){return e.push([++g,a]),d||(d=setInterval(function(){if(e.length){var a=$.now(),b=f;for(f=e,e=b;f.length;)f.shift()[1](a)}else clearInterval(d),d=void 0},20)),g},$.cancelAnimationFrame=function(a){var b,c;for(b=0,c=e.length;b<c;b+=1)if(e[b][0]===a)return void e.splice(b,1);for(b=0,c=f.length;b<c;b+=1)if(f[b][0]===a)return void f.splice(b,1)}}}(window)}(OpenSeadragon),function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof module&&module.exports?module.exports=b():a.OpenSeadragon=b()}(this,function(){return OpenSeadragon}),function(a){var b={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(b.supportsFullScreen=!0,b.getFullScreenElement=function(){return document.fullscreenElement},b.requestFullScreen=function(a){return a.requestFullscreen()},b.exitFullScreen=function(){document.exitFullscreen()},b.fullScreenEventName="fullscreenchange",b.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(b.supportsFullScreen=!0,b.getFullScreenElement=function(){return document.msFullscreenElement},b.requestFullScreen=function(a){return a.msRequestFullscreen()},b.exitFullScreen=function(){document.msExitFullscreen()},b.fullScreenEventName="MSFullscreenChange",b.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(b.supportsFullScreen=!0,b.getFullScreenElement=function(){return document.webkitFullscreenElement},b.requestFullScreen=function(a){return a.webkitRequestFullscreen()},b.exitFullScreen=function(){document.webkitExitFullscreen()},b.fullScreenEventName="webkitfullscreenchange",b.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(b.supportsFullScreen=!0,b.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},b.requestFullScreen=function(a){return a.webkitRequestFullScreen()},b.exitFullScreen=function(){document.webkitCancelFullScreen()},b.fullScreenEventName="webkitfullscreenchange",b.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(b.supportsFullScreen=!0,b.getFullScreenElement=function(){return document.mozFullScreenElement},b.requestFullScreen=function(a){return a.mozRequestFullScreen()},b.exitFullScreen=function(){document.mozCancelFullScreen()},b.fullScreenEventName="mozfullscreenchange",b.fullScreenErrorEventName="mozfullscreenerror"),b.isFullScreen=function(){return null!==b.getFullScreenElement()},b.cancelFullScreen=function(){a.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),b.exitFullScreen()},a.extend(a,b)}(OpenSeadragon),function(a){a.EventSource=function(){this.events={}},a.EventSource.prototype={addOnceHandler:function(a,b,c,d){var e=this;d=d||1;var f=0,g=function(c){f++,f===d&&e.removeHandler(a,g),b(c)};this.addHandler(a,g,c)},addHandler:function(b,c,d){var e=this.events[b];e||(this.events[b]=e=[]),c&&a.isFunction(c)&&(e[e.length]={handler:c,userData:d||null})},removeHandler:function(b,c){var d,e=this.events[b],f=[];if(e&&a.isArray(e)){for(d=0;d<e.length;d++)e[d].handler!==c&&f.push(e[d]);this.events[b]=f}},removeAllHandlers:function(a){if(a)this.events[a]=[];else for(var b in this.events)this.events[b]=[]},getHandler:function(a){var b=this.events[a];return b&&b.length?(b=1===b.length?[b[0]]:Array.apply(null,b),function(a,c){var d,e=b.length;for(d=0;d<e;d++)b[d]&&(c.eventSource=a,c.userData=b[d].userData,b[d].handler(c))}):null},raiseEvent:function(a,b){var c=this.getHandler(a);c&&(b||(b={}),c(this,b))}}}(OpenSeadragon),function(a){function b(b){var c,d=pa[b.hash],e=d.activePointersLists.length;for(c=0;c<e;c++)d.activePointersLists[c].captureCount>0&&(a.removeEvent(a.MouseTracker.captureElement,"mousemove",d.mousemovecaptured,!0),a.removeEvent(a.MouseTracker.captureElement,"mouseup",d.mouseupcaptured,!0),a.removeEvent(a.MouseTracker.captureElement,a.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",d.pointermovecaptured,!0),a.removeEvent(a.MouseTracker.captureElement,a.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",d.pointerupcaptured,!0),a.removeEvent(a.MouseTracker.captureElement,"touchmove",d.touchmovecaptured,!0),a.removeEvent(a.MouseTracker.captureElement,"touchend",d.touchendcaptured,!0),d.activePointersLists[c].captureCount=0);for(c=0;c<e;c++)d.activePointersLists.pop()}function c(c){var d,e,f=pa[c.hash];if(!f.tracking){for(e=0;e<a.MouseTracker.subscribeEvents.length;e++)d=a.MouseTracker.subscribeEvents[e],a.addEvent(c.element,d,f[d],!1);b(c),f.tracking=!0}}function d(c){var d,e,f=pa[c.hash];if(f.tracking){for(e=0;e<a.MouseTracker.subscribeEvents.length;e++)d=a.MouseTracker.subscribeEvents[e],a.removeEvent(c.element,d,f[d],!1);b(c),f.tracking=!1}}function e(b,c){var d=pa[b.hash];if("pointerevent"===c)return{upName:a.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",upHandler:d.pointerupcaptured,moveName:a.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",moveHandler:d.pointermovecaptured};if("mouse"===c)return{upName:"mouseup",upHandler:d.mouseupcaptured,moveName:"mousemove",moveHandler:d.mousemovecaptured};if("touch"===c)return{upName:"touchend",upHandler:d.touchendcaptured,moveName:"touchmove",moveHandler:d.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function f(b,c,d){var f,g=b.getActivePointersListByType(c);g.captureCount+=d||1,1===g.captureCount&&(a.Browser.vendor===a.BROWSERS.IE&&a.Browser.version<9?b.element.setCapture(!0):(f=e(b,a.MouseTracker.havePointerEvents?"pointerevent":c),qa&&na(window.top)&&a.addEvent(window.top,f.upName,f.upHandler,!0),a.addEvent(a.MouseTracker.captureElement,f.upName,f.upHandler,!0),a.addEvent(a.MouseTracker.captureElement,f.moveName,f.moveHandler,!0)))}function g(b,c,d){var f,g=b.getActivePointersListByType(c);g.captureCount-=d||1,0===g.captureCount&&(a.Browser.vendor===a.BROWSERS.IE&&a.Browser.version<9?b.element.releaseCapture():(f=e(b,a.MouseTracker.havePointerEvents?"pointerevent":c),qa&&na(window.top)&&a.removeEvent(window.top,f.upName,f.upHandler,!0),a.removeEvent(a.MouseTracker.captureElement,f.moveName,f.moveHandler,!0),a.removeEvent(a.MouseTracker.captureElement,f.upName,f.upHandler,!0)))}function h(b){var c;if(a.MouseTracker.unprefixedPointerEvents)c=b.pointerType;else switch(b.pointerType){case 2:c="touch";break;case 3:c="pen";break;case 4:c="mouse";break;default:c=""}return c}function i(b){return a.getMousePosition(b)}function j(a,b){return k(i(a),b)}function k(b,c){var d=a.getElementOffset(c);return b.minus(d)}function l(b,c){return new a.Point((b.x+c.x)/2,(b.y+c.y)/2)}function m(b,c){b.clickHandler&&a.cancelEvent(c)}function n(b,c){b.dblClickHandler&&a.cancelEvent(c)}function o(b,c){b.keyDownHandler&&(c=a.getEvent(c),b.keyDownHandler({eventSource:b,keyCode:c.keyCode?c.keyCode:c.charCode,ctrl:c.ctrlKey,shift:c.shiftKey,alt:c.altKey,meta:c.metaKey,originalEvent:c,preventDefaultAction:!1,userData:b.userData})||a.cancelEvent(c))}function p(b,c){b.keyUpHandler&&(c=a.getEvent(c),b.keyUpHandler({eventSource:b,keyCode:c.keyCode?c.keyCode:c.charCode,ctrl:c.ctrlKey,shift:c.shiftKey,alt:c.altKey,meta:c.metaKey,originalEvent:c,preventDefaultAction:!1,userData:b.userData})||a.cancelEvent(c))}function q(b,c){b.keyHandler&&(c=a.getEvent(c),b.keyHandler({eventSource:b,keyCode:c.keyCode?c.keyCode:c.charCode,ctrl:c.ctrlKey,shift:c.shiftKey,alt:c.altKey,meta:c.metaKey,originalEvent:c,preventDefaultAction:!1,userData:b.userData})||a.cancelEvent(c))}function r(b,c){b.focusHandler&&(c=a.getEvent(c),!1===b.focusHandler({eventSource:b,originalEvent:c,preventDefaultAction:!1,userData:b.userData})&&a.cancelEvent(c))}function s(b,c){b.blurHandler&&(c=a.getEvent(c),!1===b.blurHandler({eventSource:b,originalEvent:c,preventDefaultAction:!1,userData:b.userData})&&a.cancelEvent(c))}function t(a,b){v(a,b,b)}function u(b,c){c=a.getEvent(c);var d={target:c.target||c.srcElement,type:"wheel",shiftKey:c.shiftKey||!1,clientX:c.clientX,clientY:c.clientY,pageX:c.pageX?c.pageX:c.clientX,pageY:c.pageY?c.pageY:c.clientY,deltaMode:"MozMousePixelScroll"==c.type?0:1,deltaX:0,deltaZ:0};"mousewheel"==a.MouseTracker.wheelEventName?d.deltaY=-c.wheelDelta/a.DEFAULT_SETTINGS.pixelsPerWheelLine:d.deltaY=c.detail,v(b,d,c)}function v(b,c,d){var e=0;e=c.deltaY<0?1:-1,b.scrollHandler&&!1===b.scrollHandler({eventSource:b,pointerType:"mouse",position:j(c,b.element),scroll:e,shift:c.shiftKey,isTouchEvent:!1,originalEvent:d,preventDefaultAction:!1,userData:b.userData})&&a.cancelEvent(d)}function w(a,b){if(a===b)return!1;for(;b&&b!==a;)b=b.parentNode;return b===a}function x(b,c){c=a.getEvent(c),z(b,c)}function y(b,c){c=a.getEvent(c),c.currentTarget===c.relatedTarget||w(c.currentTarget,c.relatedTarget)||z(b,c)}function z(b,c){ga(b,c,[{id:a.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:i(c),currentTime:a.now()}])}function A(b,c){c=a.getEvent(c),C(b,c)}function B(b,c){c=a.getEvent(c),c.currentTarget===c.relatedTarget||w(c.currentTarget,c.relatedTarget)||C(b,c)}function C(b,c){ha(b,c,[{id:a.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:i(c),currentTime:a.now()}])}function D(b){return a.Browser.vendor===a.BROWSERS.IE&&a.Browser.version<9?1===b?0:2===b?2:4===b?1:-1:b}function E(b,c){var d;c=a.getEvent(c),d={id:a.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:i(c),currentTime:a.now()},ia(b,c,[d],D(c.button))&&(a.stopEvent(c),f(b,"mouse")),(b.clickHandler||b.dblClickHandler||b.pressHandler||b.dragHandler||b.dragEndHandler)&&a.cancelEvent(c)}function F(a,b){H(a,b)}function G(b,c){H(b,c),a.stopEvent(c)}function H(b,c){var d;c=a.getEvent(c),d={id:a.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:i(c),currentTime:a.now()},ja(b,c,[d],D(c.button))&&g(b,"mouse")}function I(a,b){K(a,b)}function J(b,c){K(b,c),a.stopEvent(c)}function K(b,c){var d;c=a.getEvent(c),d={id:a.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:i(c),currentTime:a.now()},ka(b,c,[d])}function L(a,b,c){var d,e=c.getLength(),f=[];if("touch"===c.type||c.contacts>0){for(d=0;d<e;d++)f.push(c.getByIndex(d));f.length>0&&(ja(a,b,f,0),c.captureCount=1,g(a,c.type),ha(a,b,f))}}function M(b,c){var d,e,g,h,j=c.changedTouches.length,k=[],l=b.getActivePointersListByType("touch");for(d=a.now(),l.getLength()>c.touches.length-j&&(a.console.warn("Tracked touch contact count doesn't match event.touches.length. Removing all tracked touch pointers."),L(b,c,l)),e=0;e<j;e++)k.push({id:c.changedTouches[e].identifier,type:"touch",currentPos:i(c.changedTouches[e]),currentTime:d});for(ga(b,c,k),e=0;e<oa.length;e++)if(oa[e]!==b&&oa[e].isTracking()&&w(oa[e].element,b.element)){for(h=[],g=0;g<j;g++)h.push({id:c.changedTouches[g].identifier,type:"touch",currentPos:i(c.changedTouches[g]),currentTime:d});ga(oa[e],c,h)}ia(b,c,k,0)&&(a.stopEvent(c),f(b,"touch",j)),a.cancelEvent(c)}function N(a,b){P(a,b)}function O(b,c){P(b,c),a.stopEvent(c)}function P(b,c){var d,e,f,h,j=c.changedTouches.length,k=[];for(d=a.now(),e=0;e<j;e++)k.push({id:c.changedTouches[e].identifier,type:"touch",currentPos:i(c.changedTouches[e]),currentTime:d});for(ja(b,c,k,0)&&g(b,"touch",j),ha(b,c,k),e=0;e<oa.length;e++)if(oa[e]!==b&&oa[e].isTracking()&&w(oa[e].element,b.element)){for(h=[],f=0;f<j;f++)h.push({id:c.changedTouches[f].identifier,type:"touch",currentPos:i(c.changedTouches[f]),currentTime:d});ha(oa[e],c,h)}a.cancelEvent(c)}function Q(a,b){S(a,b)}function R(b,c){S(b,c),a.stopEvent(c)}function S(b,c){var d,e=c.changedTouches.length,f=[];for(d=0;d<e;d++)f.push({id:c.changedTouches[d].identifier,type:"touch",currentPos:i(c.changedTouches[d]),currentTime:a.now()});ka(b,c,f),a.cancelEvent(c)}function T(a,b){L(a,b,a.getActivePointersListByType("touch"))}function U(a,b){return b.stopPropagation(),b.preventDefault(),!1}function V(a,b){return b.stopPropagation(),b.preventDefault(),!1}function W(b,c){var d;c.currentTarget===c.relatedTarget||w(c.currentTarget,c.relatedTarget)||(d={id:c.pointerId,type:h(c),isPrimary:c.isPrimary,currentPos:i(c),currentTime:a.now()},ga(b,c,[d]))}function X(b,c){var d;c.currentTarget===c.relatedTarget||w(c.currentTarget,c.relatedTarget)||(d={id:c.pointerId,type:h(c),isPrimary:c.isPrimary,currentPos:i(c),currentTime:a.now()},ha(b,c,[d]))}function Y(b,c){var d;d={id:c.pointerId,type:h(c),isPrimary:c.isPrimary,currentPos:i(c),currentTime:a.now()},ia(b,c,[d],c.button)&&(a.stopEvent(c),f(b,d.type)),(b.clickHandler||b.dblClickHandler||b.pressHandler||b.dragHandler||b.dragEndHandler||b.pinchHandler)&&a.cancelEvent(c)}function Z(a,b){_(a,b)}function $(b,c){b.getActivePointersListByType(h(c)).getById(c.pointerId)&&_(b,c),a.stopEvent(c)}function _(b,c){var d;d={id:c.pointerId,type:h(c),isPrimary:c.isPrimary,currentPos:i(c),currentTime:a.now()},ja(b,c,[d],c.button)&&g(b,d.type)}function aa(a,b){ca(a,b)}function ba(b,c){b.getActivePointersListByType(h(c)).getById(c.pointerId)&&ca(b,c),a.stopEvent(c)}function ca(b,c){var d;d={id:c.pointerId,type:h(c),isPrimary:c.isPrimary,currentPos:i(c),currentTime:a.now()},ka(b,c,[d])}function da(a,b){var c;c={id:b.pointerId,type:h(b)},la(a,b,[c])}function ea(a,b){return b.hasOwnProperty("isPrimary")||(0===a.getLength()?b.isPrimary=!0:b.isPrimary=!1),b.speed=0,b.direction=0,b.contactPos=b.currentPos,b.contactTime=b.currentTime,b.lastPos=b.currentPos,b.lastTime=b.currentTime,a.add(b)}function fa(a,b){var c,d;return a.getById(b.id)?(c=a.removeById(b.id),b.hasOwnProperty("isPrimary")||(d=a.getPrimary())||(d=a.getByIndex(0))&&(d.isPrimary=!0)):c=a.getLength(),c}function ga(b,c,d){var e,f,g,h=b.getActivePointersListByType(d[0].type),i=d.length;for(e=0;e<i;e++)f=d[e],g=h.getById(f.id),g?(g.insideElement=!0,g.lastPos=g.currentPos,g.lastTime=g.currentTime,g.currentPos=f.currentPos,g.currentTime=f.currentTime,f=g):(f.captured=!1,f.insideElementPressed=!1,f.insideElement=!0,ea(h,f)),b.enterHandler&&!1===b.enterHandler({eventSource:b,pointerType:f.type,position:k(f.currentPos,b.element),buttons:h.buttons,pointers:b.getActivePointerCount(),insideElementPressed:f.insideElementPressed,buttonDownAny:0!==h.buttons,isTouchEvent:"touch"===f.type,originalEvent:c,preventDefaultAction:!1,userData:b.userData})&&a.cancelEvent(c)}function ha(b,c,d){var e,f,g,h=b.getActivePointersListByType(d[0].type),i=d.length;for(e=0;e<i;e++)f=d[e],g=h.getById(f.id),g&&(g.captured?(g.insideElement=!1,g.lastPos=g.currentPos,g.lastTime=g.currentTime,g.currentPos=f.currentPos,g.currentTime=f.currentTime):fa(h,g),f=g),b.exitHandler&&!1===b.exitHandler({eventSource:b,pointerType:f.type,position:k(f.currentPos,b.element),buttons:h.buttons,pointers:b.getActivePointerCount(),insideElementPressed:!!g&&g.insideElementPressed,buttonDownAny:0!==h.buttons,isTouchEvent:"touch"===f.type,originalEvent:c,preventDefaultAction:!1,userData:b.userData})&&a.cancelEvent(c)}function ia(b,c,d,e){var f,g,h,i=pa[b.hash],j=b.getActivePointersListByType(d[0].type),m=d.length;void 0!==c.buttons?j.buttons=c.buttons:a.Browser.vendor===a.BROWSERS.IE&&a.Browser.version<9?0===e?j.buttons+=1:1===e?j.buttons+=4:2===e?j.buttons+=2:3===e?j.buttons+=8:4===e?j.buttons+=16:5===e&&(j.buttons+=32):0===e?j.buttons|=1:1===e?j.buttons|=4:2===e?j.buttons|=2:3===e?j.buttons|=8:4===e?j.buttons|=16:5===e&&(j.buttons|=32);var n=b.getActivePointersListsExceptType(d[0].type);for(f=0;f<n.length;f++)L(b,c,n[f]);if(0!==e)return b.nonPrimaryPressHandler&&!1===b.nonPrimaryPressHandler({eventSource:b,pointerType:d[0].type,position:k(d[0].currentPos,b.element),button:e,buttons:j.buttons,isTouchEvent:"touch"===d[0].type,originalEvent:c,preventDefaultAction:!1,userData:b.userData})&&a.cancelEvent(c),!1;for(f=0;f<m;f++)g=d[f],h=j.getById(g.id),h?(h.captured=!0,h.insideElementPressed=!0,h.insideElement=!0,h.contactPos=g.currentPos,h.contactTime=g.currentTime,h.lastPos=h.currentPos,h.lastTime=h.currentTime,h.currentPos=g.currentPos,h.currentTime=g.currentTime,g=h):(g.captured=!0,g.insideElementPressed=!0,g.insideElement=!0,ea(j,g)),j.addContact(),(b.dragHandler||b.dragEndHandler||b.pinchHandler)&&a.MouseTracker.gesturePointVelocityTracker.addPoint(b,g),1===j.contacts?b.pressHandler&&!1===b.pressHandler({eventSource:b,pointerType:g.type,position:k(g.contactPos,b.element),buttons:j.buttons,isTouchEvent:"touch"===g.type,originalEvent:c,preventDefaultAction:!1,userData:b.userData})&&a.cancelEvent(c):2===j.contacts&&b.pinchHandler&&"touch"===g.type&&(i.pinchGPoints=j.asArray(),i.lastPinchDist=i.currentPinchDist=i.pinchGPoints[0].currentPos.distanceTo(i.pinchGPoints[1].currentPos),i.lastPinchCenter=i.currentPinchCenter=l(i.pinchGPoints[0].currentPos,i.pinchGPoints[1].currentPos));return!0}function ja(b,c,d,e){var f,g,h,i,j,m,n=pa[b.hash],o=b.getActivePointersListByType(d[0].type),p=d.length,q=!1,r=!1;if(void 0!==c.buttons?o.buttons=c.buttons:a.Browser.vendor===a.BROWSERS.IE&&a.Browser.version<9?0===e?o.buttons-=1:1===e?o.buttons-=4:2===e?o.buttons-=2:3===e?o.buttons-=8:4===e?o.buttons-=16:5===e&&(o.buttons-=32):0===e?o.buttons^=-2:1===e?o.buttons^=-5:2===e?o.buttons^=-3:3===e?o.buttons^=-9:4===e?o.buttons^=-17:5===e&&(o.buttons^=-33),0!==e){b.nonPrimaryReleaseHandler&&!1===b.nonPrimaryReleaseHandler({eventSource:b,pointerType:d[0].type,position:k(d[0].currentPos,b.element),button:e,buttons:o.buttons,isTouchEvent:"touch"===d[0].type,originalEvent:c,preventDefaultAction:!1,userData:b.userData})&&a.cancelEvent(c);return L(b,c,b.getActivePointersListByType("mouse")),!1}for(h=0;h<p;h++)i=d[h],(j=o.getById(i.id))&&(j.captured&&(j.captured=!1,q=!0,r=!0),j.lastPos=j.currentPos,j.lastTime=j.currentTime,j.currentPos=i.currentPos,j.currentTime=i.currentTime,j.insideElement||fa(o,j),f=j.currentPos,g=j.currentTime,r?(o.removeContact(),(b.dragHandler||b.dragEndHandler||b.pinchHandler)&&a.MouseTracker.gesturePointVelocityTracker.removePoint(b,j),0===o.contacts?(b.releaseHandler&&!1===b.releaseHandler({eventSource:b,pointerType:j.type,position:k(f,b.element),buttons:o.buttons,insideElementPressed:j.insideElementPressed,insideElementReleased:j.insideElement,isTouchEvent:"touch"===j.type,originalEvent:c,preventDefaultAction:!1,userData:b.userData})&&a.cancelEvent(c),b.dragEndHandler&&!j.currentPos.equals(j.contactPos)&&!1===b.dragEndHandler({eventSource:b,pointerType:j.type,position:k(j.currentPos,b.element),speed:j.speed,direction:j.direction,shift:c.shiftKey,isTouchEvent:"touch"===j.type,originalEvent:c,preventDefaultAction:!1,userData:b.userData})&&a.cancelEvent(c),(b.clickHandler||b.dblClickHandler)&&j.insideElement&&(m=g-j.contactTime<=b.clickTimeThreshold&&j.contactPos.distanceTo(f)<=b.clickDistThreshold,b.clickHandler&&!1===b.clickHandler({eventSource:b,pointerType:j.type,position:k(j.currentPos,b.element),quick:m,shift:c.shiftKey,isTouchEvent:"touch"===j.type,originalEvent:c,preventDefaultAction:!1,userData:b.userData})&&a.cancelEvent(c),b.dblClickHandler&&m&&(o.clicks++,1===o.clicks?(n.lastClickPos=f,n.dblClickTimeOut=setTimeout(function(){o.clicks=0},b.dblClickTimeThreshold)):2===o.clicks&&(clearTimeout(n.dblClickTimeOut),o.clicks=0,n.lastClickPos.distanceTo(f)<=b.dblClickDistThreshold&&!1===b.dblClickHandler({eventSource:b,pointerType:j.type,position:k(j.currentPos,b.element),shift:c.shiftKey,isTouchEvent:"touch"===j.type,originalEvent:c,preventDefaultAction:!1,userData:b.userData})&&a.cancelEvent(c),n.lastClickPos=null)))):2===o.contacts&&b.pinchHandler&&"touch"===j.type&&(n.pinchGPoints=o.asArray(),n.lastPinchDist=n.currentPinchDist=n.pinchGPoints[0].currentPos.distanceTo(n.pinchGPoints[1].currentPos),n.lastPinchCenter=n.currentPinchCenter=l(n.pinchGPoints[0].currentPos,n.pinchGPoints[1].currentPos))):b.releaseHandler&&!1===b.releaseHandler({eventSource:b,pointerType:j.type,position:k(f,b.element),buttons:o.buttons,insideElementPressed:j.insideElementPressed,insideElementReleased:j.insideElement,isTouchEvent:"touch"===j.type,originalEvent:c,preventDefaultAction:!1,userData:b.userData})&&a.cancelEvent(c));return q}function ka(b,c,d){var e,f,g,h,i,j=pa[b.hash],m=b.getActivePointersListByType(d[0].type),n=d.length;for(void 0!==c.buttons&&(m.buttons=c.buttons),e=0;e<n;e++)f=d[e],g=m.getById(f.id),g?(f.hasOwnProperty("isPrimary")&&(g.isPrimary=f.isPrimary),g.lastPos=g.currentPos,g.lastTime=g.currentTime,g.currentPos=f.currentPos,g.currentTime=f.currentTime):(f.captured=!1,f.insideElementPressed=!1,f.insideElement=!0,ea(m,f));b.stopHandler&&"mouse"===d[0].type&&(clearTimeout(b.stopTimeOut),b.stopTimeOut=setTimeout(function(){ma(b,c,d[0].type)},b.stopDelay)),0===m.contacts?b.moveHandler&&!1===b.moveHandler({eventSource:b,pointerType:d[0].type,position:k(d[0].currentPos,b.element),buttons:m.buttons,isTouchEvent:"touch"===d[0].type,originalEvent:c,preventDefaultAction:!1,userData:b.userData})&&a.cancelEvent(c):1===m.contacts?(b.moveHandler&&(g=m.asArray()[0],!1===b.moveHandler({eventSource:b,pointerType:g.type,position:k(g.currentPos,b.element),buttons:m.buttons,isTouchEvent:"touch"===g.type,originalEvent:c,preventDefaultAction:!1,userData:b.userData})&&a.cancelEvent(c)),b.dragHandler&&(g=m.asArray()[0],i=g.currentPos.minus(g.lastPos),!1===b.dragHandler({eventSource:b,pointerType:g.type,position:k(g.currentPos,b.element),buttons:m.buttons,delta:i,speed:g.speed,direction:g.direction,shift:c.shiftKey,isTouchEvent:"touch"===g.type,originalEvent:c,preventDefaultAction:!1,userData:b.userData})&&a.cancelEvent(c))):2===m.contacts&&(b.moveHandler&&(h=m.asArray(),!1===b.moveHandler({eventSource:b,pointerType:h[0].type,position:k(l(h[0].currentPos,h[1].currentPos),b.element),buttons:m.buttons,isTouchEvent:"touch"===h[0].type,originalEvent:c,preventDefaultAction:!1,userData:b.userData})&&a.cancelEvent(c)),b.pinchHandler&&"touch"===d[0].type&&(i=j.pinchGPoints[0].currentPos.distanceTo(j.pinchGPoints[1].currentPos))!=j.currentPinchDist&&(j.lastPinchDist=j.currentPinchDist,j.currentPinchDist=i,j.lastPinchCenter=j.currentPinchCenter,j.currentPinchCenter=l(j.pinchGPoints[0].currentPos,j.pinchGPoints[1].currentPos),!1===b.pinchHandler({eventSource:b,pointerType:"touch",gesturePoints:j.pinchGPoints,lastCenter:k(j.lastPinchCenter,b.element),center:k(j.currentPinchCenter,b.element),lastDistance:j.lastPinchDist,distance:j.currentPinchDist,shift:c.shiftKey,originalEvent:c,preventDefaultAction:!1,userData:b.userData})&&a.cancelEvent(c)))}function la(a,b,c){ja(a,b,c,0),ha(a,b,c)}function ma(a,b,c){a.stopHandler&&a.stopHandler({eventSource:a,pointerType:c,position:j(b,a.element),buttons:a.getActivePointersListByType(c).buttons,isTouchEvent:"touch"===c,originalEvent:b,preventDefaultAction:!1,userData:a.userData})}function na(a){try{return a.addEventListener&&a.removeEventListener}catch(b){return!1}}var oa=[],pa={};a.MouseTracker=function(b){oa.push(this);var c=arguments;a.isPlainObject(b)||(b={element:c[0],clickTimeThreshold:c[1],clickDistThreshold:c[2]}),this.hash=Math.random(),this.element=a.getElement(b.element),this.clickTimeThreshold=b.clickTimeThreshold||a.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=b.clickDistThreshold||a.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=b.dblClickTimeThreshold||a.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=b.dblClickDistThreshold||a.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=b.userData||null,this.stopDelay=b.stopDelay||50,this.enterHandler=b.enterHandler||null,this.exitHandler=b.exitHandler||null,this.pressHandler=b.pressHandler||null,this.nonPrimaryPressHandler=b.nonPrimaryPressHandler||null,this.releaseHandler=b.releaseHandler||null,this.nonPrimaryReleaseHandler=b.nonPrimaryReleaseHandler||null,this.moveHandler=b.moveHandler||null,this.scrollHandler=b.scrollHandler||null,this.clickHandler=b.clickHandler||null,this.dblClickHandler=b.dblClickHandler||null,
this.dragHandler=b.dragHandler||null,this.dragEndHandler=b.dragEndHandler||null,this.pinchHandler=b.pinchHandler||null,this.stopHandler=b.stopHandler||null,this.keyDownHandler=b.keyDownHandler||null,this.keyUpHandler=b.keyUpHandler||null,this.keyHandler=b.keyHandler||null,this.focusHandler=b.focusHandler||null,this.blurHandler=b.blurHandler||null;var d=this;pa[this.hash]={click:function(a){m(d,a)},dblclick:function(a){n(d,a)},keydown:function(a){o(d,a)},keyup:function(a){p(d,a)},keypress:function(a){q(d,a)},focus:function(a){r(d,a)},blur:function(a){s(d,a)},wheel:function(a){t(d,a)},mousewheel:function(a){u(d,a)},DOMMouseScroll:function(a){u(d,a)},MozMousePixelScroll:function(a){u(d,a)},mouseenter:function(a){x(d,a)},mouseleave:function(a){A(d,a)},mouseover:function(a){y(d,a)},mouseout:function(a){B(d,a)},mousedown:function(a){E(d,a)},mouseup:function(a){F(d,a)},mouseupcaptured:function(a){G(d,a)},mousemove:function(a){I(d,a)},mousemovecaptured:function(a){J(d,a)},touchstart:function(a){M(d,a)},touchend:function(a){N(d,a)},touchendcaptured:function(a){O(d,a)},touchmove:function(a){Q(d,a)},touchmovecaptured:function(a){R(d,a)},touchcancel:function(a){T(d,a)},gesturestart:function(a){U(d,a)},gesturechange:function(a){V(d,a)},pointerover:function(a){W(d,a)},MSPointerOver:function(a){W(d,a)},pointerout:function(a){X(d,a)},MSPointerOut:function(a){X(d,a)},pointerdown:function(a){Y(d,a)},MSPointerDown:function(a){Y(d,a)},pointerup:function(a){Z(d,a)},MSPointerUp:function(a){Z(d,a)},pointermove:function(a){aa(d,a)},MSPointerMove:function(a){aa(d,a)},pointercancel:function(a){da(d,a)},MSPointerCancel:function(a){da(d,a)},pointerupcaptured:function(a){$(d,a)},pointermovecaptured:function(a){ba(d,a)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null},b.startDisabled||this.setTracking(!0)},a.MouseTracker.prototype={destroy:function(){var a;for(d(this),this.element=null,a=0;a<oa.length;a++)if(oa[a]===this){oa.splice(a,1);break}pa[this.hash]=null,delete pa[this.hash]},isTracking:function(){return pa[this.hash].tracking},setTracking:function(a){return a?c(this):d(this),this},getActivePointersListsExceptType:function(a){for(var b=pa[this.hash],c=[],d=0;d<b.activePointersLists.length;++d)b.activePointersLists[d].type!==a&&c.push(b.activePointersLists[d]);return c},getActivePointersListByType:function(b){var c,d,e=pa[this.hash],f=e.activePointersLists.length;for(c=0;c<f;c++)if(e.activePointersLists[c].type===b)return e.activePointersLists[c];return d=new a.MouseTracker.GesturePointList(b),e.activePointersLists.push(d),d},getActivePointerCount:function(){var a,b=pa[this.hash],c=b.activePointersLists.length,d=0;for(a=0;a<c;a++)d+=b.activePointersLists[a].getLength();return d},enterHandler:function(){},exitHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}},a.MouseTracker.resetAllMouseTrackers=function(){for(var a=0;a<oa.length;a++)oa[a].isTracking()&&(oa[a].setTracking(!1),oa[a].setTracking(!0))},a.MouseTracker.gesturePointVelocityTracker=function(){var b=[],c=0,d=0,e=function(a,b){return a.hash.toString()+b.type+b.id.toString()},f=function(){var c,e,f,g,h,i,j=b.length,k=a.now();for(g=k-d,d=k,c=0;c<j;c++)e=b[c],f=e.gPoint,f.direction=Math.atan2(f.currentPos.y-e.lastPos.y,f.currentPos.x-e.lastPos.x),h=e.lastPos.distanceTo(f.currentPos),e.lastPos=f.currentPos,i=1e3*h/(g+1),f.speed=.75*i+.25*f.speed};return{addPoint:function(g,h){var i=e(g,h);b.push({guid:i,gPoint:h,lastPos:h.currentPos}),1===b.length&&(d=a.now(),c=window.setInterval(f,50))},removePoint:function(a,d){var f,g=e(a,d),h=b.length;for(f=0;f<h;f++)if(b[f].guid===g){b.splice(f,1),0===--h&&window.clearInterval(c);break}}}}(),a.MouseTracker.captureElement=document,a.MouseTracker.wheelEventName=a.Browser.vendor==a.BROWSERS.IE&&a.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",a.MouseTracker.supportsMouseCapture=function(){var b=document.createElement("div");return a.isFunction(b.setCapture)&&a.isFunction(b.releaseCapture)}(),a.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur",a.MouseTracker.wheelEventName],"DOMMouseScroll"==a.MouseTracker.wheelEventName&&a.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent&&(window.navigator.pointerEnabled||a.Browser.vendor!==a.BROWSERS.IE)?(a.MouseTracker.havePointerEvents=!0,a.MouseTracker.subscribeEvents.push("pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),a.MouseTracker.unprefixedPointerEvents=!0,navigator.maxTouchPoints?a.MouseTracker.maxTouchPoints=navigator.maxTouchPoints:a.MouseTracker.maxTouchPoints=0,a.MouseTracker.haveMouseEnter=!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?(a.MouseTracker.havePointerEvents=!0,a.MouseTracker.subscribeEvents.push("MSPointerOver","MSPointerOut","MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"),a.MouseTracker.unprefixedPointerEvents=!1,navigator.msMaxTouchPoints?a.MouseTracker.maxTouchPoints=navigator.msMaxTouchPoints:a.MouseTracker.maxTouchPoints=0,a.MouseTracker.haveMouseEnter=!1):(a.MouseTracker.havePointerEvents=!1,a.Browser.vendor===a.BROWSERS.IE&&a.Browser.version<9?(a.MouseTracker.subscribeEvents.push("mouseenter","mouseleave"),a.MouseTracker.haveMouseEnter=!0):(a.MouseTracker.subscribeEvents.push("mouseover","mouseout"),a.MouseTracker.haveMouseEnter=!1),a.MouseTracker.subscribeEvents.push("mousedown","mouseup","mousemove"),"ontouchstart"in window&&a.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&a.MouseTracker.subscribeEvents.push("gesturestart","gesturechange"),a.MouseTracker.mousePointerId="legacy-mouse",a.MouseTracker.maxTouchPoints=10),a.MouseTracker.GesturePointList=function(a){this._gPoints=[],this.type=a,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},a.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(a){return this._gPoints.push(a)},removeById:function(a){var b,c=this._gPoints.length;for(b=0;b<c;b++)if(this._gPoints[b].id===a){this._gPoints.splice(b,1);break}return this._gPoints.length},getByIndex:function(a){return a<this._gPoints.length?this._gPoints[a]:null},getById:function(a){var b,c=this._gPoints.length;for(b=0;b<c;b++)if(this._gPoints[b].id===a)return this._gPoints[b];return null},getPrimary:function(a){var b,c=this._gPoints.length;for(b=0;b<c;b++)if(this._gPoints[b].isPrimary)return this._gPoints[b];return null},addContact:function(){++this.contacts>1&&("mouse"===this.type||"pen"===this.type)&&(this.contacts=1)},removeContact:function(){--this.contacts<0&&(this.contacts=0)}};var qa=function(){try{return window.self!==window.top}catch(a){return!0}}()}(OpenSeadragon),function(a){a.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},a.Control=function(b,c,d){var e=b.parentNode;"number"==typeof c&&(a.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),c={anchor:c}),c.attachToViewer=void 0===c.attachToViewer||c.attachToViewer,this.autoFade=void 0===c.autoFade||c.autoFade,this.element=b,this.anchor=c.anchor,this.container=d,this.anchor==a.ControlAnchor.ABSOLUTE?(this.wrapper=a.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top="number"==typeof c.top?c.top+"px":c.top,this.wrapper.style.left="number"==typeof c.left?c.left+"px":c.left,this.wrapper.style.height="number"==typeof c.height?c.height+"px":c.height,this.wrapper.style.width="number"==typeof c.width?c.width+"px":c.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=a.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor==a.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),c.attachToViewer?this.anchor==a.ControlAnchor.TOP_RIGHT||this.anchor==a.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):e.appendChild(this.wrapper)},a.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.container.removeChild(this.wrapper)},isVisible:function(){return"none"!=this.wrapper.style.display},setVisible:function(b){this.wrapper.style.display=b?this.anchor==a.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(b){this.element[a.SIGNAL]&&a.Browser.vendor==a.BROWSERS.IE?a.setElementOpacity(this.element,b,!0):a.setElementOpacity(this.wrapper,b,!0)}}}(OpenSeadragon),function(a){function b(a,b){var c,d=a.controls;for(c=d.length-1;c>=0;c--)if(d[c].element==b)return c;return-1}a.ControlDock=function(b){var c,d,e=["topleft","topright","bottomright","bottomleft"];for(a.extend(!0,this,{id:"controldock-"+a.now()+"-"+Math.floor(1e6*Math.random()),container:a.makeNeutralElement("div"),controls:[]},b),this.container.onsubmit=function(){return!1},this.element&&(this.element=a.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),d=0;d<e.length;d++)c=e[d],this.controls[c]=a.makeNeutralElement("div"),this.controls[c].style.position="absolute",c.match("left")&&(this.controls[c].style.left="0px"),c.match("right")&&(this.controls[c].style.right="0px"),c.match("top")&&(this.controls[c].style.top="0px"),c.match("bottom")&&(this.controls[c].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},a.ControlDock.prototype={addControl:function(c,d){c=a.getElement(c);var e=null;if(!(b(this,c)>=0)){switch(d.anchor){case a.ControlAnchor.TOP_RIGHT:e=this.controls.topright,c.style.position="relative",c.style.paddingRight="0px",c.style.paddingTop="0px";break;case a.ControlAnchor.BOTTOM_RIGHT:e=this.controls.bottomright,c.style.position="relative",c.style.paddingRight="0px",c.style.paddingBottom="0px";break;case a.ControlAnchor.BOTTOM_LEFT:e=this.controls.bottomleft,c.style.position="relative",c.style.paddingLeft="0px",c.style.paddingBottom="0px";break;case a.ControlAnchor.TOP_LEFT:e=this.controls.topleft,c.style.position="relative",c.style.paddingLeft="0px",c.style.paddingTop="0px";break;case a.ControlAnchor.ABSOLUTE:e=this.container,c.style.margin="0px",c.style.padding="0px";break;default:case a.ControlAnchor.NONE:e=this.container,c.style.margin="0px",c.style.padding="0px"}this.controls.push(new a.Control(c,d,e)),c.style.display="inline-block"}},removeControl:function(c){c=a.getElement(c);var d=b(this,c);return d>=0&&(this.controls[d].destroy(),this.controls.splice(d,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var a;for(a=this.controls.length-1;a>=0;a--)if(this.controls[a].isVisible())return!0;return!1},setControlsEnabled:function(a){var b;for(b=this.controls.length-1;b>=0;b--)this.controls[b].setVisible(a);return this}}}(OpenSeadragon),function(a){a.Placement=a.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(OpenSeadragon),function(a){function b(b){return b=a.getElement(b),new a.Point(0===b.clientWidth?1:b.clientWidth,0===b.clientHeight?1:b.clientHeight)}function c(b,c,d,e,f){function g(a,b){a.ready?e(a):(a.addHandler("ready",function(){e(a)}),a.addHandler("open-failed",function(a){f({message:a.message,source:b})}))}var h=b;if("string"==a.type(c))if(c.match(/^\s*<.*>\s*$/))c=a.parseXml(c);else if(c.match(/^\s*[\{\[].*[\}\]]\s*$/))try{var i=a.parseJSON(c);c=i}catch(j){}setTimeout(function(){if("string"==a.type(c))c=new a.TileSource({url:c,crossOriginPolicy:void 0!==d.crossOriginPolicy?d.crossOriginPolicy:b.crossOriginPolicy,ajaxWithCredentials:b.ajaxWithCredentials,ajaxHeaders:b.ajaxHeaders,useCanvas:b.useCanvas,success:function(a){e(a.tileSource)}}),c.addHandler("open-failed",function(a){f(a)});else if(a.isPlainObject(c)||c.nodeType)if(void 0!==c.crossOriginPolicy||void 0===d.crossOriginPolicy&&void 0===b.crossOriginPolicy||(c.crossOriginPolicy=void 0!==d.crossOriginPolicy?d.crossOriginPolicy:b.crossOriginPolicy),void 0===c.ajaxWithCredentials&&(c.ajaxWithCredentials=b.ajaxWithCredentials),void 0===c.useCanvas&&(c.useCanvas=b.useCanvas),a.isFunction(c.getTileUrl)){var i=new a.TileSource(c);i.getTileUrl=c.getTileUrl,e(i)}else{var j=a.TileSource.determineType(h,c);if(!j)return void f({message:"Unable to load TileSource",source:c});var k=j.prototype.configure.apply(h,[c]);g(new j(k),c)}else g(c,c)})}function d(b,c){if(c instanceof a.Overlay)return c;var d=null;if(c.element)d=a.getElement(c.element);else{var e=c.id?c.id:"openseadragon-overlay-"+Math.floor(1e7*Math.random());d=a.getElement(c.id),d||(d=document.createElement("a"),d.href="#/overlay/"+e),d.id=e,a.addClass(d,c.className?c.className:"openseadragon-overlay")}var f=c.location,g=c.width,h=c.height;if(!f){var i=c.x,j=c.y;if(void 0!==c.px){var k=b.viewport.imageToViewportRectangle(new a.Rect(c.px,c.py,g||0,h||0));i=k.x,j=k.y,g=void 0!==g?k.width:void 0,h=void 0!==h?k.height:void 0}f=new a.Point(i,j)}var l=c.placement;return l&&"string"===a.type(l)&&(l=a.Placement[c.placement.toUpperCase()]),new a.Overlay({element:d,location:f,placement:l,onDraw:c.onDraw,checkResize:c.checkResize,width:g,height:h,rotationMode:c.rotationMode})}function e(a,b){var c;for(c=a.length-1;c>=0;c--)if(a[c].element===b)return c;return-1}function f(b,c){return a.requestAnimationFrame(function(){c(b)})}function g(b){a.requestAnimationFrame(function(){i(b)})}function h(b){b.autoHideControls&&(b.controlsShouldFade=!0,b.controlsFadeBeginTime=a.now()+b.controlsFadeDelay,window.setTimeout(function(){g(b)},b.controlsFadeDelay))}function i(b){var c,d,e,f;if(b.controlsShouldFade){for(c=a.now(),d=c-b.controlsFadeBeginTime,e=1-d/b.controlsFadeLength,e=Math.min(1,e),e=Math.max(0,e),f=b.controls.length-1;f>=0;f--)b.controls[f].autoFade&&b.controls[f].setOpacity(e);e>0&&g(b)}}function j(a){var b;for(a.controlsShouldFade=!1,b=a.controls.length-1;b>=0;b--)a.controls[b].setOpacity(1)}function k(){j(this)}function l(){h(this)}function m(b){var c={originalEvent:b.originalEvent,preventDefaultAction:b.preventDefaultAction,preventVerticalPan:b.preventVerticalPan,preventHorizontalPan:b.preventHorizontalPan};if(this.raiseEvent("canvas-key",c),c.preventDefaultAction||b.ctrl||b.alt||b.meta)return!0;switch(b.keyCode){case 38:return c.preventVerticalPan||(b.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new a.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 40:return c.preventVerticalPan||(b.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new a.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 37:return c.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new a.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;case 39:return c.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new a.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;default:return!0}}function n(b){var c={originalEvent:b.originalEvent,preventDefaultAction:b.preventDefaultAction,preventVerticalPan:b.preventVerticalPan,preventHorizontalPan:b.preventHorizontalPan};if(this.raiseEvent("canvas-key",c),c.preventDefaultAction||b.ctrl||b.alt||b.meta)return!0;switch(b.keyCode){case 43:case 61:return this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),!1;case 45:return this.viewport.zoomBy(.9),this.viewport.applyConstraints(),!1;case 48:return this.viewport.goHome(),this.viewport.applyConstraints(),!1;case 119:case 87:return c.preventVerticalPan||(b.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new a.Point(0,-40))),this.viewport.applyConstraints()),!1;case 115:case 83:return c.preventVerticalPan||(b.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new a.Point(0,40))),this.viewport.applyConstraints()),!1;case 97:return c.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new a.Point(-40,0))),this.viewport.applyConstraints()),!1;case 100:return c.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new a.Point(40,0))),this.viewport.applyConstraints()),!1;case 114:return this.viewport.flipped?this.viewport.setRotation(a.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)):this.viewport.setRotation(a.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 82:return this.viewport.flipped?this.viewport.setRotation(a.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)):this.viewport.setRotation(a.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 102:return this.viewport.toggleFlip(),!1;default:return!0}}function o(a){var b;document.activeElement==this.canvas||this.canvas.focus(),this.viewport.flipped&&(a.position.x=this.viewport.getContainerSize().x-a.position.x);var c={tracker:a.eventSource,position:a.position,quick:a.quick,shift:a.shift,originalEvent:a.originalEvent,preventDefaultAction:a.preventDefaultAction};this.raiseEvent("canvas-click",c),!c.preventDefaultAction&&this.viewport&&a.quick&&(b=this.gestureSettingsByDeviceType(a.pointerType),b.clickToZoom&&(this.viewport.zoomBy(a.shift?1/this.zoomPerClick:this.zoomPerClick,b.zoomToRefPoint?this.viewport.pointFromPixel(a.position,!0):null),this.viewport.applyConstraints()))}function p(a){var b,c={tracker:a.eventSource,position:a.position,shift:a.shift,originalEvent:a.originalEvent,preventDefaultAction:a.preventDefaultAction};this.raiseEvent("canvas-double-click",c),!c.preventDefaultAction&&this.viewport&&(b=this.gestureSettingsByDeviceType(a.pointerType),b.dblClickToZoom&&(this.viewport.zoomBy(a.shift?1/this.zoomPerClick:this.zoomPerClick,b.zoomToRefPoint?this.viewport.pointFromPixel(a.position,!0):null),this.viewport.applyConstraints()))}function q(a){var b,c={tracker:a.eventSource,position:a.position,delta:a.delta,speed:a.speed,direction:a.direction,shift:a.shift,originalEvent:a.originalEvent,preventDefaultAction:a.preventDefaultAction};if(this.raiseEvent("canvas-drag",c),!c.preventDefaultAction&&this.viewport){if(b=this.gestureSettingsByDeviceType(a.pointerType),this.panHorizontal||(a.delta.x=0),this.panVertical||(a.delta.y=0),this.viewport.flipped&&(a.delta.x=-a.delta.x),this.constrainDuringPan){var d=this.viewport.deltaPointsFromPixels(a.delta.negate());this.viewport.centerSpringX.target.value+=d.x,this.viewport.centerSpringY.target.value+=d.y;var e=this.viewport.getBounds(),f=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=d.x,this.viewport.centerSpringY.target.value-=d.y,e.x!=f.x&&(a.delta.x=0),e.y!=f.y&&(a.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(a.delta.negate()),b.flickEnabled&&!this.constrainDuringPan)}}function r(b){if(!b.preventDefaultAction&&this.viewport){var c=this.gestureSettingsByDeviceType(b.pointerType);if(c.flickEnabled&&b.speed>=c.flickMinSpeed){var d=0;this.panHorizontal&&(d=c.flickMomentum*b.speed*Math.cos(b.direction));var e=0;this.panVertical&&(e=c.flickMomentum*b.speed*Math.sin(b.direction));var f=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),g=this.viewport.pointFromPixel(new a.Point(f.x-d,f.y-e));this.viewport.panTo(g,!1)}this.viewport.applyConstraints()}this.raiseEvent("canvas-drag-end",{tracker:b.eventSource,position:b.position,speed:b.speed,direction:b.direction,shift:b.shift,originalEvent:b.originalEvent})}function s(a){this.raiseEvent("canvas-enter",{tracker:a.eventSource,pointerType:a.pointerType,position:a.position,buttons:a.buttons,pointers:a.pointers,insideElementPressed:a.insideElementPressed,buttonDownAny:a.buttonDownAny,originalEvent:a.originalEvent})}function t(b){window.location!=window.parent.location&&a.MouseTracker.resetAllMouseTrackers(),this.raiseEvent("canvas-exit",{tracker:b.eventSource,pointerType:b.pointerType,position:b.position,buttons:b.buttons,pointers:b.pointers,insideElementPressed:b.insideElementPressed,buttonDownAny:b.buttonDownAny,originalEvent:b.originalEvent})}function u(a){this.raiseEvent("canvas-press",{tracker:a.eventSource,pointerType:a.pointerType,position:a.position,insideElementPressed:a.insideElementPressed,insideElementReleased:a.insideElementReleased,originalEvent:a.originalEvent})}function v(a){this.raiseEvent("canvas-release",{tracker:a.eventSource,pointerType:a.pointerType,position:a.position,insideElementPressed:a.insideElementPressed,insideElementReleased:a.insideElementReleased,originalEvent:a.originalEvent})}function w(a){this.raiseEvent("canvas-nonprimary-press",{tracker:a.eventSource,position:a.position,pointerType:a.pointerType,button:a.button,buttons:a.buttons,originalEvent:a.originalEvent})}function x(a){this.raiseEvent("canvas-nonprimary-release",{tracker:a.eventSource,position:a.position,pointerType:a.pointerType,button:a.button,buttons:a.buttons,originalEvent:a.originalEvent})}function y(a){var b,c,d,e;if(!a.preventDefaultAction&&this.viewport&&(b=this.gestureSettingsByDeviceType(a.pointerType),b.pinchToZoom&&(c=this.viewport.pointFromPixel(a.center,!0),d=this.viewport.pointFromPixel(a.lastCenter,!0),e=d.minus(c),this.panHorizontal||(e.x=0),this.panVertical||(e.y=0),this.viewport.zoomBy(a.distance/a.lastDistance,c,!0),b.zoomToRefPoint&&this.viewport.panBy(e,!0),this.viewport.applyConstraints()),b.pinchRotate)){var f=Math.atan2(a.gesturePoints[0].currentPos.y-a.gesturePoints[1].currentPos.y,a.gesturePoints[0].currentPos.x-a.gesturePoints[1].currentPos.x),g=Math.atan2(a.gesturePoints[0].lastPos.y-a.gesturePoints[1].lastPos.y,a.gesturePoints[0].lastPos.x-a.gesturePoints[1].lastPos.x);this.viewport.setRotation(this.viewport.getRotation()+(f-g)*(180/Math.PI))}return this.raiseEvent("canvas-pinch",{tracker:a.eventSource,gesturePoints:a.gesturePoints,lastCenter:a.lastCenter,center:a.center,lastDistance:a.lastDistance,distance:a.distance,shift:a.shift,originalEvent:a.originalEvent}),!1}function z(b){var c,d,e;if(e=a.now(),e-this._lastScrollTime>this.minScrollDeltaTime){if(this._lastScrollTime=e,this.viewport.flipped&&(b.position.x=this.viewport.getContainerSize().x-b.position.x),!b.preventDefaultAction&&this.viewport&&(c=this.gestureSettingsByDeviceType(b.pointerType),c.scrollToZoom&&(d=Math.pow(this.zoomPerScroll,b.scroll),this.viewport.zoomBy(d,c.zoomToRefPoint?this.viewport.pointFromPixel(b.position,!0):null),this.viewport.applyConstraints())),this.raiseEvent("canvas-scroll",{tracker:b.eventSource,position:b.position,scroll:b.scroll,shift:b.shift,originalEvent:b.originalEvent}),c&&c.scrollToZoom)return!1}else if((c=this.gestureSettingsByDeviceType(b.pointerType))&&c.scrollToZoom)return!1}function A(a){V[this.hash].mouseInside=!0,j(this),this.raiseEvent("container-enter",{tracker:a.eventSource,position:a.position,buttons:a.buttons,pointers:a.pointers,insideElementPressed:a.insideElementPressed,buttonDownAny:a.buttonDownAny,originalEvent:a.originalEvent})}function B(a){a.pointers<1&&(V[this.hash].mouseInside=!1,V[this.hash].animating||h(this)),this.raiseEvent("container-exit",{tracker:a.eventSource,position:a.position,buttons:a.buttons,pointers:a.pointers,insideElementPressed:a.insideElementPressed,buttonDownAny:a.buttonDownAny,originalEvent:a.originalEvent})}function C(a){D(a),a.isOpen()?a._updateRequestId=f(a,C):a._updateRequestId=!1}function D(a){if(!a._opening){if(a.autoResize){var c=b(a.container),d=V[a.hash].prevContainerSize;if(!c.equals(d)){var e=a.viewport;if(a.preserveImageSizeOnResize){var f=d.x/c.x,g=e.getZoom()*f,i=e.getCenter();e.resize(c,!1),e.zoomTo(g,null,!0),e.panTo(i,!0)}else{var k=e.getBounds();e.resize(c,!0),e.fitBoundsWithConstraints(k,!0)}V[a.hash].prevContainerSize=c,V[a.hash].forceRedraw=!0}}var l=a.viewport.update(),m=a.world.update()||l;l&&a.raiseEvent("viewport-change"),a.referenceStrip&&(m=a.referenceStrip.update(a.viewport)||m),!V[a.hash].animating&&m&&(a.raiseEvent("animation-start"),j(a)),(m||V[a.hash].forceRedraw||a.world.needsDraw())&&(E(a),a._drawOverlays(),a.navigator&&a.navigator.update(a.viewport),V[a.hash].forceRedraw=!1,m&&a.raiseEvent("animation")),V[a.hash].animating&&!m&&(a.raiseEvent("animation-finish"),V[a.hash].mouseInside||h(a)),V[a.hash].animating=m}}function E(a){a.imageLoader.clear(),a.drawer.clear(),a.world.draw(),a.raiseEvent("update-viewport",{})}function F(a,b){return a?a+b:b}function G(){V[this.hash].lastZoomTime=a.now(),V[this.hash].zoomFactor=this.zoomPerSecond,V[this.hash].zooming=!0,J(this)}function H(){V[this.hash].lastZoomTime=a.now(),V[this.hash].zoomFactor=1/this.zoomPerSecond,V[this.hash].zooming=!0,J(this)}function I(){V[this.hash].zooming=!1}function J(b){a.requestAnimationFrame(a.delegate(b,K))}function K(){var b,c,d;V[this.hash].zooming&&this.viewport&&(b=a.now(),c=b-V[this.hash].lastZoomTime,d=Math.pow(V[this.hash].zoomFactor,c/1e3),this.viewport.zoomBy(d),this.viewport.applyConstraints(),V[this.hash].lastZoomTime=b,J(this))}function L(){this.viewport&&(V[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function M(){this.viewport&&(V[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function N(){this.buttons.emulateEnter(),this.buttons.emulateExit()}function O(){this.viewport&&this.viewport.goHome()}function P(){this.isFullPage()&&!a.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttons&&this.buttons.emulateExit(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function Q(){if(this.viewport){var b=this.viewport.getRotation();b=this.viewport.flipped?a.positiveModulo(b+this.rotationIncrement,360):a.positiveModulo(b-this.rotationIncrement,360),this.viewport.setRotation(b)}}function R(){if(this.viewport){var b=this.viewport.getRotation();b=this.viewport.flipped?a.positiveModulo(b-this.rotationIncrement,360):a.positiveModulo(b+this.rotationIncrement,360),this.viewport.setRotation(b)}}function S(){this.viewport.toggleFlip()}function T(){var a=this._sequenceIndex-1;this.navPrevNextWrap&&a<0&&(a+=this.tileSources.length),this.goToPage(a)}function U(){var a=this._sequenceIndex+1;this.navPrevNextWrap&&a>=this.tileSources.length&&(a=0),this.goToPage(a)}var V={},W=1;a.Viewer=function(c){var d,e=arguments,g=this;if(a.isPlainObject(c)||(c={id:e[0],xmlPath:e.length>1?e[1]:void 0,prefixUrl:e.length>2?e[2]:void 0,controls:e.length>3?e[3]:void 0,overlays:e.length>4?e[4]:void 0}),c.config&&(a.extend(!0,c,c.config),delete c.config),a.extend(!0,this,{id:c.id,hash:c.hash||W++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},a.DEFAULT_SETTINGS,c),void 0===this.hash)throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for(void 0!==V[this.hash]&&a.console.warn("Hash "+this.hash+" has already been used."),V[this.hash]={fsBoundsDelta:new a.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._lastScrollTime=a.now(),a.EventSource.call(this),this.addHandler("open-failed",function(b){var c=a.getString("Errors.OpenFailed",b.eventSource,b.message);g._showMessage(c)}),a.ControlDock.call(this,c),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=a.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",function(a){a.width="100%",a.height="100%",a.overflow="hidden",a.position="absolute",a.top="0px",a.left="0px"}(this.canvas.style),a.setElementTouchActionNone(this.canvas),""!==c.tabIndex&&(this.canvas.tabIndex=void 0===c.tabIndex?0:c.tabIndex),this.container.className="openseadragon-container",function(a){a.width="100%",a.height="100%",a.position="relative",a.overflow="hidden",a.left="0px",a.top="0px",a.textAlign="left"}(this.container.style),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new a.MouseTracker({element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,keyDownHandler:a.delegate(this,m),keyHandler:a.delegate(this,n),clickHandler:a.delegate(this,o),dblClickHandler:a.delegate(this,p),dragHandler:a.delegate(this,q),dragEndHandler:a.delegate(this,r),enterHandler:a.delegate(this,s),exitHandler:a.delegate(this,t),pressHandler:a.delegate(this,u),releaseHandler:a.delegate(this,v),nonPrimaryPressHandler:a.delegate(this,w),nonPrimaryReleaseHandler:a.delegate(this,x),scrollHandler:a.delegate(this,z),pinchHandler:a.delegate(this,y)}),this.outerTracker=new a.MouseTracker({element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:a.delegate(this,A),exitHandler:a.delegate(this,B)}),this.toolbar&&(this.toolbar=new a.ControlDock({element:this.toolbar})),this.bindStandardControls(),V[this.hash].prevContainerSize=b(this.container),this.world=new a.World({viewer:this}),this.world.addHandler("add-item",function(a){
g.source=g.world.getItemAt(0).source,V[g.hash].forceRedraw=!0,g._updateRequestId||(g._updateRequestId=f(g,C))}),this.world.addHandler("remove-item",function(a){g.world.getItemCount()?g.source=g.world.getItemAt(0).source:g.source=null,V[g.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(a){g.viewport&&g.viewport._setContentBounds(g.world.getHomeBounds(),g.world.getContentFactor())}),this.world.addHandler("item-index-change",function(a){g.source=g.world.getItemAt(0).source}),this.viewport=new a.Viewport({containerSize:V[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new a.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:c.timeout}),this.tileCache=new a.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new a.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=a.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(d=this.buttons.buttons.indexOf(this.rotateLeft),this.buttons.buttons.splice(d,1),this.buttons.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(d=this.buttons.buttons.indexOf(this.rotateRight),this.buttons.buttons.splice(d,1),this.buttons.element.removeChild(this.rotateRight.element))),this.showNavigator&&(this.navigator=new a.Navigator({id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),d=0;d<this.customControls.length;d++)this.addControl(this.customControls[d].id,{anchor:this.customControls[d].anchor});a.requestAnimationFrame(function(){h(g)}),void 0===this.imageSmoothingEnabled||this.imageSmoothingEnabled||this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled)},a.extend(a.Viewer.prototype,a.EventSource.prototype,a.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(b){return a.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(b)},openTileSource:function(b){return a.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(b)},open:function(b,c){var e=this;if(this.close(),b){if(this.sequenceMode&&a.isArray(b))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),void 0===c||isNaN(c)||(this.initialPage=c),this.tileSources=b,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),void this._updateSequenceButtons(this._sequenceIndex);if(a.isArray(b)||(b=[b]),b.length){this._opening=!0;for(var f,g=b.length,h=0,i=0,j=function(){if(h+i===g)if(h){!e._firstOpen&&e.preserveViewport||(e.viewport.goHome(!0),e.viewport.update()),e._firstOpen=!1;var a=b[0];if(a.tileSource&&(a=a.tileSource),e.overlays&&!e.preserveOverlays)for(var c=0;c<e.overlays.length;c++)e.currentOverlays[c]=d(e,e.overlays[c]);e._drawOverlays(),e._opening=!1,e.raiseEvent("open",{source:a})}else e._opening=!1,e.raiseEvent("open-failed",f)},k=function(b){a.isPlainObject(b)&&b.tileSource||(b={tileSource:b}),void 0!==b.index&&(a.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete b.index),void 0===b.collectionImmediately&&(b.collectionImmediately=!0);var c=b.success;b.success=function(a){if(h++,b.tileSource.overlays)for(var d=0;d<b.tileSource.overlays.length;d++)e.addOverlay(b.tileSource.overlays[d]);c&&c(a),j()};var d=b.error;b.error=function(a){i++,f||(f=a),d&&d(a),j()},e.addTiledImage(b)},l=0;l<b.length;l++)k(b[l]);return this}}},close:function(){return V[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),V[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(V[this.hash]){if(this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),null!==this._updateRequestId&&(a.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.removeAllHandlers(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),V[this.hash]=null,delete V[this.hash],this.canvas=null,this.container=null,this.element=null}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(a){return this.innerTracker.setTracking(a),this.outerTracker.setTracking(a),this.raiseEvent("mouse-enabled",{enabled:a}),this},areControlsEnabled:function(){var a,b=this.controls.length;for(a=0;a<this.controls.length;a++)b=b&&this.controls[a].isVisible();return b},setControlsEnabled:function(a){return a?j(this):h(this),this.raiseEvent("controls-enabled",{enabled:a}),this},setDebugMode:function(a){for(var b=0;b<this.world.getItemCount();b++)this.world.getItemAt(b).debugMode=a;this.debugMode=a,this.forceRedraw()},isFullPage:function(){return V[this.hash].fullPage},setFullPage:function(b){var c,d,e=document.body,f=e.style,g=document.documentElement.style,h=this;if(b==this.isFullPage())return this;var i={fullPage:b,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",i),i.preventDefaultAction)return this;if(b){for(this.elementSize=a.getElementSize(this.element),this.pageScroll=a.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=f.margin,this.docMargin=g.margin,f.margin="0",g.margin="0",this.bodyPadding=f.padding,this.docPadding=g.padding,f.padding="0",g.padding="0",this.bodyWidth=f.width,this.docWidth=g.width,f.width="100%",g.width="100%",this.bodyHeight=f.height,this.docHeight=g.height,f.height="100%",g.height="100%",this.previousBody=[],V[this.hash].prevElementParent=this.element.parentNode,V[this.hash].prevNextSibling=this.element.nextSibling,V[this.hash].prevElementWidth=this.element.style.width,V[this.hash].prevElementHeight=this.element.style.height,c=e.childNodes.length,d=0;d<c;d++)this.previousBody.push(e.childNodes[0]),e.removeChild(e.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,e.appendChild(this.toolbar.element),a.addClass(this.toolbar.element,"fullpage")),a.addClass(this.element,"fullpage"),e.appendChild(this.element),this.element.style.height=a.getWindowSize().y+"px",this.element.style.width=a.getWindowSize().x+"px",this.toolbar&&this.toolbar.element&&(this.element.style.height=a.getElementSize(this.element).y-a.getElementSize(this.toolbar.element).y+"px"),V[this.hash].fullPage=!0,a.delegate(this,A)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,f.margin=this.bodyMargin,g.margin=this.docMargin,f.padding=this.bodyPadding,g.padding=this.docPadding,f.width=this.bodyWidth,g.width=this.docWidth,f.height=this.bodyHeight,g.height=this.docHeight,e.removeChild(this.element),c=this.previousBody.length,d=0;d<c;d++)e.appendChild(this.previousBody.shift());a.removeClass(this.element,"fullpage"),V[this.hash].prevElementParent.insertBefore(this.element,V[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(e.removeChild(this.toolbar.element),a.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=V[this.hash].prevElementWidth,this.element.style.height=V[this.hash].prevElementHeight;var j=0,k=function(){a.setPageScroll(h.pageScroll);var b=a.getPageScroll();++j<10&&(b.x!==h.pageScroll.x||b.y!==h.pageScroll.y)&&a.requestAnimationFrame(k)};a.requestAnimationFrame(k),V[this.hash].fullPage=!1,a.delegate(this,B)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:b}),this},setFullScreen:function(b){var c=this;if(!a.supportsFullScreen)return this.setFullPage(b);if(a.isFullScreen()===b)return this;var d={fullScreen:b,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",d),d.preventDefaultAction)return this;if(b){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var e=function(){var b=a.isFullScreen();b||(a.removeEvent(document,a.fullScreenEventName,e),a.removeEvent(document,a.fullScreenErrorEventName,e),c.setFullPage(!1),c.isFullPage()&&(c.element.style.width=c.fullPageStyleWidth,c.element.style.height=c.fullPageStyleHeight)),c.navigator&&c.viewport&&setTimeout(function(){c.navigator.update(c.viewport)}),c.raiseEvent("full-screen",{fullScreen:b})};a.addEvent(document,a.fullScreenEventName,e),a.addEvent(document,a.fullScreenErrorEventName,e),a.requestFullScreen(document.body)}else a.exitFullScreen();return this},isVisible:function(){return"hidden"!=this.container.style.visibility},setVisible:function(a){return this.container.style.visibility=a?"":"hidden",this.raiseEvent("visible",{visible:a}),this},addTiledImage:function(b){function d(a){for(var c=0;c<g._loadQueue.length;c++)if(g._loadQueue[c]===h){g._loadQueue.splice(c,1);break}0===g._loadQueue.length&&e(h),g.raiseEvent("add-item-failed",a),b.error&&b.error(a)}function e(a){g.collectionMode&&(g.world.arrange({immediately:a.options.collectionImmediately,rows:g.collectionRows,columns:g.collectionColumns,layout:g.collectionLayout,tileSize:g.collectionTileSize,tileMargin:g.collectionTileMargin}),g.world.setAutoRefigureSizes(!0))}function f(){for(var b,c,d;g._loadQueue.length&&(b=g._loadQueue[0],b.tileSource);){if(g._loadQueue.splice(0,1),b.options.replace){var f=g.world.getIndexOfItem(b.options.replaceItem);-1!=f&&(b.options.index=f),g.world.removeItem(b.options.replaceItem)}c=new a.TiledImage({viewer:g,source:b.tileSource,viewport:g.viewport,drawer:g.drawer,tileCache:g.tileCache,imageLoader:g.imageLoader,x:b.options.x,y:b.options.y,width:b.options.width,height:b.options.height,fitBounds:b.options.fitBounds,fitBoundsPlacement:b.options.fitBoundsPlacement,clip:b.options.clip,placeholderFillStyle:b.options.placeholderFillStyle,opacity:b.options.opacity,preload:b.options.preload,degrees:b.options.degrees,compositeOperation:b.options.compositeOperation,springStiffness:g.springStiffness,animationTime:g.animationTime,minZoomImageRatio:g.minZoomImageRatio,wrapHorizontal:g.wrapHorizontal,wrapVertical:g.wrapVertical,immediateRender:g.immediateRender,blendTime:g.blendTime,alwaysBlend:g.alwaysBlend,minPixelRatio:g.minPixelRatio,smoothTileEdgesMinZoom:g.smoothTileEdgesMinZoom,iOSDevice:g.iOSDevice,crossOriginPolicy:b.options.crossOriginPolicy,ajaxWithCredentials:b.options.ajaxWithCredentials,loadTilesWithAjax:b.options.loadTilesWithAjax,ajaxHeaders:b.options.ajaxHeaders,debugMode:g.debugMode}),g.collectionMode&&g.world.setAutoRefigureSizes(!1),g.world.addItem(c,{index:b.options.index}),0===g._loadQueue.length&&e(b),1!==g.world.getItemCount()||g.preserveViewport||g.viewport.goHome(!0),g.navigator&&(d=a.extend({},b.options,{replace:!1,originalTiledImage:c,tileSource:b.tileSource}),g.navigator.addTiledImage(d)),b.options.success&&b.options.success({item:c})}}a.console.assert(b,"[Viewer.addTiledImage] options is required"),a.console.assert(b.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),a.console.assert(!b.replace||b.index>-1&&b.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var g=this;b.replace&&(b.replaceItem=g.world.getItemAt(b.index)),this._hideMessage(),void 0===b.placeholderFillStyle&&(b.placeholderFillStyle=this.placeholderFillStyle),void 0===b.opacity&&(b.opacity=this.opacity),void 0===b.preload&&(b.preload=this.preload),void 0===b.compositeOperation&&(b.compositeOperation=this.compositeOperation),void 0===b.crossOriginPolicy&&(b.crossOriginPolicy=void 0!==b.tileSource.crossOriginPolicy?b.tileSource.crossOriginPolicy:this.crossOriginPolicy),void 0===b.ajaxWithCredentials&&(b.ajaxWithCredentials=this.ajaxWithCredentials),void 0===b.loadTilesWithAjax&&(b.loadTilesWithAjax=this.loadTilesWithAjax),void 0===b.ajaxHeaders||null===b.ajaxHeaders?b.ajaxHeaders=this.ajaxHeaders:a.isPlainObject(b.ajaxHeaders)&&a.isPlainObject(this.ajaxHeaders)&&(b.ajaxHeaders=a.extend({},this.ajaxHeaders,b.ajaxHeaders));var h={options:b};if(a.isArray(b.tileSource))return void setTimeout(function(){d({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:b.tileSource,options:b})});this._loadQueue.push(h),c(this,b.tileSource,b,function(a){h.tileSource=a,f()},function(a){a.options=b,d(a),f()})},addSimpleImage:function(b){a.console.assert(b,"[Viewer.addSimpleImage] options is required"),a.console.assert(b.url,"[Viewer.addSimpleImage] options.url is required");var c=a.extend({},b,{tileSource:{type:"image",url:b.url}});delete c.url,this.addTiledImage(c)},addLayer:function(b){var c=this;a.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var d=a.extend({},b,{success:function(a){c.raiseEvent("add-layer",{options:b,drawer:a.item})},error:function(a){c.raiseEvent("add-layer-failed",a)}});return this.addTiledImage(d),this},getLayerAtLevel:function(b){return a.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(b)},getLevelOfLayer:function(b){return a.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(b)},getLayersCount:function(){return a.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(b,c){return a.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(b,c)},removeLayer:function(b){return a.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(b)},forceRedraw:function(){return V[this.hash].forceRedraw=!0,this},bindSequenceControls:function(){var b=a.delegate(this,k),c=a.delegate(this,l),d=a.delegate(this,U),e=a.delegate(this,T),f=this.navImages,g=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(g=!1),this.previousButton=new a.Button({element:this.previousButton?a.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:a.getString("Tooltips.PreviousPage"),srcRest:F(this.prefixUrl,f.previous.REST),srcGroup:F(this.prefixUrl,f.previous.GROUP),srcHover:F(this.prefixUrl,f.previous.HOVER),srcDown:F(this.prefixUrl,f.previous.DOWN),onRelease:e,onFocus:b,onBlur:c}),this.nextButton=new a.Button({element:this.nextButton?a.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:a.getString("Tooltips.NextPage"),srcRest:F(this.prefixUrl,f.next.REST),srcGroup:F(this.prefixUrl,f.next.GROUP),srcHover:F(this.prefixUrl,f.next.HOVER),srcDown:F(this.prefixUrl,f.next.DOWN),onRelease:d,onFocus:b,onBlur:c}),this.navPrevNextWrap||this.previousButton.disable(),this.tileSources&&this.tileSources.length||this.nextButton.disable(),g&&(this.paging=new a.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:a.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||a.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var b=a.delegate(this,G),c=a.delegate(this,I),d=a.delegate(this,L),e=a.delegate(this,H),f=a.delegate(this,M),g=a.delegate(this,O),h=a.delegate(this,P),i=a.delegate(this,Q),j=a.delegate(this,R),m=a.delegate(this,S),n=a.delegate(this,k),o=a.delegate(this,l),p=this.navImages,q=[],r=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(r=!1),this.showZoomControl&&(q.push(this.zoomInButton=new a.Button({element:this.zoomInButton?a.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:a.getString("Tooltips.ZoomIn"),srcRest:F(this.prefixUrl,p.zoomIn.REST),srcGroup:F(this.prefixUrl,p.zoomIn.GROUP),srcHover:F(this.prefixUrl,p.zoomIn.HOVER),srcDown:F(this.prefixUrl,p.zoomIn.DOWN),onPress:b,onRelease:c,onClick:d,onEnter:b,onExit:c,onFocus:n,onBlur:o})),q.push(this.zoomOutButton=new a.Button({element:this.zoomOutButton?a.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:a.getString("Tooltips.ZoomOut"),srcRest:F(this.prefixUrl,p.zoomOut.REST),srcGroup:F(this.prefixUrl,p.zoomOut.GROUP),srcHover:F(this.prefixUrl,p.zoomOut.HOVER),srcDown:F(this.prefixUrl,p.zoomOut.DOWN),onPress:e,onRelease:c,onClick:f,onEnter:e,onExit:c,onFocus:n,onBlur:o}))),this.showHomeControl&&q.push(this.homeButton=new a.Button({element:this.homeButton?a.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:a.getString("Tooltips.Home"),srcRest:F(this.prefixUrl,p.home.REST),srcGroup:F(this.prefixUrl,p.home.GROUP),srcHover:F(this.prefixUrl,p.home.HOVER),srcDown:F(this.prefixUrl,p.home.DOWN),onRelease:g,onFocus:n,onBlur:o})),this.showFullPageControl&&q.push(this.fullPageButton=new a.Button({element:this.fullPageButton?a.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:a.getString("Tooltips.FullPage"),srcRest:F(this.prefixUrl,p.fullpage.REST),srcGroup:F(this.prefixUrl,p.fullpage.GROUP),srcHover:F(this.prefixUrl,p.fullpage.HOVER),srcDown:F(this.prefixUrl,p.fullpage.DOWN),onRelease:h,onFocus:n,onBlur:o})),this.showRotationControl&&(q.push(this.rotateLeftButton=new a.Button({element:this.rotateLeftButton?a.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:a.getString("Tooltips.RotateLeft"),srcRest:F(this.prefixUrl,p.rotateleft.REST),srcGroup:F(this.prefixUrl,p.rotateleft.GROUP),srcHover:F(this.prefixUrl,p.rotateleft.HOVER),srcDown:F(this.prefixUrl,p.rotateleft.DOWN),onRelease:i,onFocus:n,onBlur:o})),q.push(this.rotateRightButton=new a.Button({element:this.rotateRightButton?a.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:a.getString("Tooltips.RotateRight"),srcRest:F(this.prefixUrl,p.rotateright.REST),srcGroup:F(this.prefixUrl,p.rotateright.GROUP),srcHover:F(this.prefixUrl,p.rotateright.HOVER),srcDown:F(this.prefixUrl,p.rotateright.DOWN),onRelease:j,onFocus:n,onBlur:o}))),this.showFlipControl&&q.push(this.flipButton=new a.Button({element:this.flipButton?a.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:a.getString("Tooltips.Flip"),srcRest:F(this.prefixUrl,p.flip.REST),srcGroup:F(this.prefixUrl,p.flip.GROUP),srcHover:F(this.prefixUrl,p.flip.HOVER),srcDown:F(this.prefixUrl,p.flip.DOWN),onRelease:m,onFocus:n,onBlur:o})),r&&(this.buttons=new a.ButtonGroup({buttons:q,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttons.element,this.addHandler("open",a.delegate(this,N)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||a.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||a.ControlAnchor.TOP_LEFT}))),this},currentPage:function(){return this._sequenceIndex},goToPage:function(a){return this.tileSources&&a>=0&&a<this.tileSources.length&&(this._sequenceIndex=a,this._updateSequenceButtons(a),this.open(this.tileSources[a]),this.referenceStrip&&this.referenceStrip.setFocus(a),this.raiseEvent("page",{page:a})),this},addOverlay:function(b,c,f,g){var h;if(h=a.isPlainObject(b)?b:{element:b,location:c,placement:f,onDraw:g},b=a.getElement(h.element),e(this.currentOverlays,b)>=0)return this;var i=d(this,h);return this.currentOverlays.push(i),i.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:b,location:h.location,placement:h.placement}),this},updateOverlay:function(b,c,d){var f;return b=a.getElement(b),f=e(this.currentOverlays,b),f>=0&&(this.currentOverlays[f].update(c,d),V[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:b,location:c,placement:d})),this},removeOverlay:function(b){var c;return b=a.getElement(b),c=e(this.currentOverlays,b),c>=0&&(this.currentOverlays[c].destroy(),this.currentOverlays.splice(c,1),V[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:b})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return V[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(b){var c;return b=a.getElement(b),c=e(this.currentOverlays,b),c>=0?this.currentOverlays[c]:null},_updateSequenceButtons:function(a){this.nextButton&&(this.tileSources&&this.tileSources.length-1!==a?this.nextButton.enable():this.navPrevNextWrap||this.nextButton.disable()),this.previousButton&&(a>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(b){this._hideMessage();var c=a.makeNeutralElement("div");c.appendChild(document.createTextNode(b)),this.messageDiv=a.makeCenteredNode(c),a.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var a=this.messageDiv;a&&(a.parentNode.removeChild(a),delete this.messageDiv)},gestureSettingsByDeviceType:function(a){switch(a){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var a,b=this.currentOverlays.length;for(a=0;a<b;a++)this.currentOverlays[a].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new a.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else a.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')}})}(OpenSeadragon),function(a){function b(a){var b={tracker:a.eventSource,position:a.position,quick:a.quick,shift:a.shift,originalEvent:a.originalEvent,preventDefaultAction:a.preventDefaultAction};if(this.viewer.raiseEvent("navigator-click",b),!b.preventDefaultAction&&a.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(a.position.x=this.viewport.getContainerSize().x-a.position.x);var c=this.viewport.pointFromPixel(a.position);this.panVertical?this.panHorizontal||(c.x=this.viewer.viewport.getCenter(!0).x):c.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(c),this.viewer.viewport.applyConstraints()}}function c(a){var b={tracker:a.eventSource,position:a.position,delta:a.delta,speed:a.speed,direction:a.direction,shift:a.shift,originalEvent:a.originalEvent,preventDefaultAction:a.preventDefaultAction};this.viewer.raiseEvent("navigator-drag",b),!b.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(a.delta.x=0),this.panVertical||(a.delta.y=0),this.viewer.viewport.flipped&&(a.delta.x=-a.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(a.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function d(a){a.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function e(a){return this.viewer.raiseEvent("navigator-scroll",{tracker:a.eventSource,position:a.position,scroll:a.scroll,shift:a.shift,originalEvent:a.originalEvent}),!1}function f(a,b){g(a,"rotate("+b+"deg)")}function g(a,b){a.style.webkitTransform=b,a.style.mozTransform=b,a.style.msTransform=b,a.style.oTransform=b,a.style.transform=b}a.Navigator=function(g){function h(a){f(l.displayRegionContainer,a),f(l.displayRegion,-a),l.viewport.setRotation(a)}var i,j,k=g.viewer,l=this;if(g.id?(this.element=document.getElementById(g.id),g.controlOptions={anchor:a.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(g.id="navigator-"+a.now(),this.element=a.makeNeutralElement("div"),g.controlOptions={anchor:a.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:g.autoFade},g.position&&("BOTTOM_RIGHT"==g.position?g.controlOptions.anchor=a.ControlAnchor.BOTTOM_RIGHT:"BOTTOM_LEFT"==g.position?g.controlOptions.anchor=a.ControlAnchor.BOTTOM_LEFT:"TOP_RIGHT"==g.position?g.controlOptions.anchor=a.ControlAnchor.TOP_RIGHT:"TOP_LEFT"==g.position?g.controlOptions.anchor=a.ControlAnchor.TOP_LEFT:"ABSOLUTE"==g.position&&(g.controlOptions.anchor=a.ControlAnchor.ABSOLUTE,g.controlOptions.top=g.top,g.controlOptions.left=g.left,g.controlOptions.height=g.height,g.controlOptions.width=g.width))),this.element.id=g.id,this.element.className+=" navigator",g=a.extend(!0,{sizeRatio:a.DEFAULT_SETTINGS.navigatorSizeRatio},g,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,autoResize:g.autoResize,minZoomImageRatio:1,background:g.background,opacity:g.opacity,borderColor:g.borderColor,displayRegionColor:g.displayRegionColor}),g.minPixelRatio=this.minPixelRatio=k.minPixelRatio,a.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new a.Point(1,1),this.totalBorderWidths=new a.Point(2*this.borderWidth,2*this.borderWidth).minus(this.fudge),g.controlOptions.anchor!=a.ControlAnchor.NONE&&function(a,b){a.margin="0px",a.border=b+"px solid "+g.borderColor,a.padding="0px",a.background=g.background,a.opacity=g.opacity,a.overflow="hidden"}(this.element.style,this.borderWidth),this.displayRegion=a.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(a,b){a.position="relative",a.top="0px",a.left="0px",a.fontSize="0px",a.overflow="hidden",a.border=b+"px solid "+g.displayRegionColor,a.margin="0px",a.padding="0px",a.background="transparent",a.float="left",a.cssFloat="left",a.styleFloat="left",a.zIndex=999999999,a.cursor="default"}(this.displayRegion.style,this.borderWidth),this.displayRegionContainer=a.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",k.addControl(this.element,g.controlOptions),this._resizeWithViewer=g.controlOptions.anchor!=a.ControlAnchor.ABSOLUTE&&g.controlOptions.anchor!=a.ControlAnchor.NONE,this._resizeWithViewer&&(g.width&&g.height?(this.element.style.height="number"==typeof g.height?g.height+"px":g.height,this.element.style.width="number"==typeof g.width?g.width+"px":g.width):(i=a.getElementSize(k.element),this.element.style.height=Math.round(i.y*g.sizeRatio)+"px",this.element.style.width=Math.round(i.x*g.sizeRatio)+"px",this.oldViewerSize=i),j=a.getElementSize(this.element),this.elementArea=j.x*j.y),this.oldContainerSize=new a.Point(0,0),a.Viewer.apply(this,[g]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer),g.navigatorRotate){h(g.viewer.viewport?g.viewer.viewport.getRotation():g.viewer.degrees||0),g.viewer.addHandler("rotate",function(a){h(a.degrees)})}this.innerTracker.destroy(),this.innerTracker=new a.MouseTracker({element:this.element,dragHandler:a.delegate(this,c),clickHandler:a.delegate(this,b),releaseHandler:a.delegate(this,d),scrollHandler:a.delegate(this,e)}),this.addHandler("reset-size",function(){l.viewport&&l.viewport.goHome(!0)}),k.world.addHandler("item-index-change",function(a){window.setTimeout(function(){var b=l.world.getItemAt(a.previousIndex);l.world.setItemIndex(b,a.newIndex)},1)}),k.world.addHandler("remove-item",function(a){var b=a.item,c=l._getMatchingItem(b);c&&l.world.removeItem(c)}),this.update(k.viewport)},a.extend(a.Navigator.prototype,a.EventSource.prototype,a.Viewer.prototype,{updateSize:function(){if(this.viewport){var b=new a.Point(0===this.container.clientWidth?1:this.container.clientWidth,0===this.container.clientHeight?1:this.container.clientHeight);b.equals(this.oldContainerSize)||(this.viewport.resize(b,!0),this.viewport.goHome(!0),this.oldContainerSize=b,this.drawer.clear(),this.world.draw())}},setFlip:function(a){return this.viewport.setFlip(a),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(a){g(this.displayRegion,a),g(this.canvas,a),g(this.element,a)},update:function(b){var c,d,e,f,g,h;if(c=a.getElementSize(this.viewer.element),this._resizeWithViewer&&c.x&&c.y&&!c.equals(this.oldViewerSize)&&(this.oldViewerSize=c,this.maintainSizeRatio||!this.elementArea?(d=c.x*this.sizeRatio,e=c.y*this.sizeRatio):(d=Math.sqrt(this.elementArea*(c.x/c.y)),e=this.elementArea/d),this.element.style.width=Math.round(d)+"px",this.element.style.height=Math.round(e)+"px",this.elementArea||(this.elementArea=d*e),this.updateSize()),b&&this.viewport){f=b.getBoundsNoRotate(!0),g=this.viewport.pixelFromPointNoRotate(f.getTopLeft(),!1),h=this.viewport.pixelFromPointNoRotate(f.getBottomRight(),!1).minus(this.totalBorderWidths);var i=this.displayRegion.style
;i.display=this.world.getItemCount()?"block":"none",i.top=Math.round(g.y)+"px",i.left=Math.round(g.x)+"px";var j=Math.abs(g.x-h.x),k=Math.abs(g.y-h.y);i.width=Math.round(Math.max(j,0))+"px",i.height=Math.round(Math.max(k,0))+"px"}},addTiledImage:function(b){var c=this,d=b.originalTiledImage;delete b.original;var e=a.extend({},b,{success:function(a){function b(){c._matchBounds(g,d)}function e(){c._matchOpacity(g,d)}function f(){c._matchCompositeOperation(g,d)}var g=a.item;g._originalForNavigator=d,c._matchBounds(g,d,!0),d.addHandler("bounds-change",b),d.addHandler("clip-change",b),d.addHandler("opacity-change",e),d.addHandler("composite-operation-change",f)}});return a.Viewer.prototype.addTiledImage.apply(this,[e])},_getMatchingItem:function(a){for(var b,c=this.world.getItemCount(),d=0;d<c;d++)if(b=this.world.getItemAt(d),b._originalForNavigator===a)return b;return null},_matchBounds:function(a,b,c){var d=b.getBoundsNoRotate();a.setPosition(d.getTopLeft(),c),a.setWidth(d.width,c),a.setRotation(b.getRotation(),c),a.setClip(b.getClip())},_matchOpacity:function(a,b){a.setOpacity(b.opacity)},_matchCompositeOperation:function(a,b){a.setCompositeOperation(b.compositeOperation)}})}(OpenSeadragon),function(a){var b={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};a.extend(a,{getString:function(c){var d,e=c.split("."),f=null,g=arguments,h=b;for(d=0;d<e.length-1;d++)h=h[e[d]]||{};return f=h[e[d]],"string"!=typeof f&&(a.console.log("Untranslated source string:",c),f=""),f.replace(/\{\d+\}/g,function(a){var b=parseInt(a.match(/\d+/),10)+1;return b<g.length?g[b]:""})},setString:function(a,c){var d,e=a.split("."),f=b;for(d=0;d<e.length-1;d++)f[e[d]]||(f[e[d]]={}),f=f[e[d]];f[e[d]]=c}})}(OpenSeadragon),function(a){a.Point=function(a,b){this.x="number"==typeof a?a:0,this.y="number"==typeof b?b:0},a.Point.prototype={clone:function(){return new a.Point(this.x,this.y)},plus:function(b){return new a.Point(this.x+b.x,this.y+b.y)},minus:function(b){return new a.Point(this.x-b.x,this.y-b.y)},times:function(b){return new a.Point(this.x*b,this.y*b)},divide:function(b){return new a.Point(this.x/b,this.y/b)},negate:function(){return new a.Point(-this.x,-this.y)},distanceTo:function(a){return Math.sqrt(Math.pow(this.x-a.x,2)+Math.pow(this.y-a.y,2))},squaredDistanceTo:function(a){return Math.pow(this.x-a.x,2)+Math.pow(this.y-a.y,2)},apply:function(b){return new a.Point(b(this.x),b(this.y))},equals:function(b){return b instanceof a.Point&&this.x===b.x&&this.y===b.y},rotate:function(b,c){c=c||new a.Point(0,0);var d,e;if(b%90==0){switch(a.positiveModulo(b,360)){case 0:d=1,e=0;break;case 90:d=0,e=1;break;case 180:d=-1,e=0;break;case 270:d=0,e=-1}}else{var f=b*Math.PI/180;d=Math.cos(f),e=Math.sin(f)}var g=d*(this.x-c.x)-e*(this.y-c.y)+c.x,h=e*(this.x-c.x)+d*(this.y-c.y)+c.y;return new a.Point(g,h)},toString:function(){return"("+Math.round(100*this.x)/100+","+Math.round(100*this.y)/100+")"}}}(OpenSeadragon),function(a){function b(b){var c,d,e=b.responseText,f=b.status;if(!b)throw new Error(a.getString("Errors.Security"));if(200!==b.status&&0!==b.status)throw f=b.status,c=404==f?"Not Found":b.statusText,new Error(a.getString("Errors.Status",f,c));if(e.match(/\s*<.*/))try{d=b.responseXML&&b.responseXML.documentElement?b.responseXML:a.parseXml(e)}catch(g){d=b.responseText}else if(e.match(/\s*[\{\[].*/))try{d=a.parseJSON(e)}catch(g){d=e}else d=e;return d}a.TileSource=function(b,c,d,e,f,g){var h,i,j=this,k=arguments;if(h=a.isPlainObject(b)?b:{width:k[0],height:k[1],tileSize:k[2],tileOverlap:k[3],minLevel:k[4],maxLevel:k[5]},a.EventSource.call(this),a.extend(!0,this,h),!this.success)for(i=0;i<arguments.length;i++)if(a.isFunction(arguments[i])){this.success=arguments[i];break}this.success&&this.addHandler("ready",function(a){j.success(a)}),"string"==a.type(arguments[0])&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new a.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=h.width&&h.height?h.width/h.height:1,this.dimensions=new a.Point(h.width,h.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=h.tileOverlap?h.tileOverlap:0,this.minLevel=h.minLevel?h.minLevel:0,this.maxLevel=void 0!==h.maxLevel&&null!==h.maxLevel?h.maxLevel:h.width&&h.height?Math.ceil(Math.log(Math.max(h.width,h.height))/Math.log(2)):0,this.success&&a.isFunction(this.success)&&this.success(this))},a.TileSource.prototype={getTileSize:function(b){return a.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(a){return this._tileWidth?this._tileWidth:this.getTileSize(a)},getTileHeight:function(a){return this._tileHeight?this._tileHeight:this.getTileSize(a)},getLevelScale:function(a){var b,c={};for(b=0;b<=this.maxLevel;b++)c[b]=1/Math.pow(2,this.maxLevel-b);return this.getLevelScale=function(a){return c[a]},this.getLevelScale(a)},getNumTiles:function(b){var c=this.getLevelScale(b),d=Math.ceil(c*this.dimensions.x/this.getTileWidth(b)),e=Math.ceil(c*this.dimensions.y/this.getTileHeight(b));return new a.Point(d,e)},getPixelRatio:function(b){var c=this.dimensions.times(this.getLevelScale(b)),d=1/c.x,e=1/c.y;return new a.Point(d,e)},getClosestLevel:function(){var a,b;for(a=this.minLevel+1;a<=this.maxLevel&&(b=this.getNumTiles(a),!(b.x>1||b.y>1));a++);return a-1},getTileAtPoint:function(b,c){var d=c.x>=0&&c.x<=1&&c.y>=0&&c.y<=1/this.aspectRatio;a.console.assert(d,"[TileSource.getTileAtPoint] must be called with a valid point.");var e=this.dimensions.x*this.getLevelScale(b),f=c.x*e,g=c.y*e,h=Math.floor(f/this.getTileWidth(b)),i=Math.floor(g/this.getTileHeight(b));return c.x>=1&&(h=this.getNumTiles(b).x-1),c.y>=1/this.aspectRatio-1e-15&&(i=this.getNumTiles(b).y-1),new a.Point(h,i)},getTileBounds:function(b,c,d,e){var f=this.dimensions.times(this.getLevelScale(b)),g=this.getTileWidth(b),h=this.getTileHeight(b),i=0===c?0:g*c-this.tileOverlap,j=0===d?0:h*d-this.tileOverlap,k=g+(0===c?1:2)*this.tileOverlap,l=h+(0===d?1:2)*this.tileOverlap,m=1/f.x;return k=Math.min(k,f.x-i),l=Math.min(l,f.y-j),e?new a.Rect(0,0,k,l):new a.Rect(i*m,j*m,k*m,l*m)},getImageInfo:function(c){var d,e,f,g,h,i,j,k=this;c&&(h=c.split("/"),i=h[h.length-1],(j=i.lastIndexOf("."))>-1&&(h[h.length-1]=i.slice(0,j))),e=function(b){"string"==typeof b&&(b=a.parseXml(b));var d=a.TileSource.determineType(k,b,c);if(!d)return void k.raiseEvent("open-failed",{message:"Unable to load TileSource",source:c});g=d.prototype.configure.apply(k,[b,c]),void 0===g.ajaxWithCredentials&&(g.ajaxWithCredentials=k.ajaxWithCredentials),f=new d(g),k.ready=!0,k.raiseEvent("ready",{tileSource:f})},c.match(/\.js$/)?(d=c.split("/").pop().replace(".js",""),a.jsonp({url:c,async:!1,callbackName:d,callback:e})):a.makeAjaxRequest({url:c,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(a){var c=b(a);e(c)},error:function(a,b){var d;try{d="HTTP "+a.status+" attempting to load TileSource"}catch(f){var e;e=void 0!==b&&b.toString?b.toString():"Unknown error",d=e+" attempting to load TileSource"}k.raiseEvent("open-failed",{message:d,source:c})}})},supports:function(a,b){return!1},configure:function(a,b){throw new Error("Method not implemented.")},getTileUrl:function(a,b,c){throw new Error("Method not implemented.")},getTileAjaxHeaders:function(a,b,c){return{}},tileExists:function(a,b,c){var d=this.getNumTiles(a);return a>=this.minLevel&&a<=this.maxLevel&&b>=0&&c>=0&&b<d.x&&c<d.y}},a.extend(!0,a.TileSource.prototype,a.EventSource.prototype),a.TileSource.determineType=function(b,c,d){var e;for(e in OpenSeadragon)if(e.match(/.+TileSource$/)&&a.isFunction(OpenSeadragon[e])&&a.isFunction(OpenSeadragon[e].prototype.supports)&&OpenSeadragon[e].prototype.supports.call(b,c,d))return OpenSeadragon[e];a.console.error("No TileSource was able to open %s %s",d,c)}}(OpenSeadragon),function(a){function b(b,d){if(!d||!d.documentElement)throw new Error(a.getString("Errors.Xml"));var e,f,g,h,i,j=d.documentElement,k=j.localName||j.tagName,l=d.documentElement.namespaceURI,m=null,n=[];if("Image"==k)try{if(h=j.getElementsByTagName("Size")[0],void 0===h&&(h=j.getElementsByTagNameNS(l,"Size")[0]),m={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:j.getAttribute("Url"),Format:j.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(j.getAttribute("Overlap"),10),TileSize:parseInt(j.getAttribute("TileSize"),10),Size:{Height:parseInt(h.getAttribute("Height"),10),Width:parseInt(h.getAttribute("Width"),10)}}},!a.imageFormatSupported(m.Image.Format))throw new Error(a.getString("Errors.ImageFormat",m.Image.Format.toUpperCase()));for(e=j.getElementsByTagName("DisplayRect"),void 0===e&&(e=j.getElementsByTagNameNS(l,"DisplayRect")[0]),i=0;i<e.length;i++)f=e[i],g=f.getElementsByTagName("Rect")[0],void 0===g&&(g=f.getElementsByTagNameNS(l,"Rect")[0]),n.push({Rect:{X:parseInt(g.getAttribute("X"),10),Y:parseInt(g.getAttribute("Y"),10),Width:parseInt(g.getAttribute("Width"),10),Height:parseInt(g.getAttribute("Height"),10),MinLevel:parseInt(f.getAttribute("MinLevel"),10),MaxLevel:parseInt(f.getAttribute("MaxLevel"),10)}});return n.length&&(m.Image.DisplayRect=n),c(b,m)}catch(q){throw q instanceof Error?q:new Error(a.getString("Errors.Dzi"))}else{if("Collection"==k)throw new Error(a.getString("Errors.Dzc"));if("Error"==k){var o=j.getElementsByTagName("Message")[0],p=o.firstChild.nodeValue;throw new Error(p)}}throw new Error(a.getString("Errors.Dzi"))}function c(b,c){var d,e,f=c.Image,g=f.Url,h=f.Format,i=f.Size,j=f.DisplayRect||[],k=parseInt(i.Width,10),l=parseInt(i.Height,10),m=parseInt(f.TileSize,10),n=parseInt(f.Overlap,10),o=[];for(e=0;e<j.length;e++)d=j[e].Rect,o.push(new a.DisplayRect(parseInt(d.X,10),parseInt(d.Y,10),parseInt(d.Width,10),parseInt(d.Height,10),parseInt(d.MinLevel,10),parseInt(d.MaxLevel,10)));return a.extend(!0,{width:k,height:l,tileSize:m,tileOverlap:n,minLevel:null,maxLevel:null,tilesUrl:g,fileFormat:h,displayRects:o},c)}a.DziTileSource=function(b,c,d,e,f,g,h,i,j){var k,l,m,n;if(n=a.isPlainObject(b)?b:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=n.tilesUrl,this.fileFormat=n.fileFormat,this.displayRects=n.displayRects,this.displayRects)for(k=this.displayRects.length-1;k>=0;k--)for(l=this.displayRects[k],m=l.minLevel;m<=l.maxLevel;m++)this._levelRects[m]||(this._levelRects[m]=[]),this._levelRects[m].push(l);a.TileSource.apply(this,[n])},a.extend(a.DziTileSource.prototype,a.TileSource.prototype,{supports:function(a,b){var c;return a.Image?c=a.Image.xmlns:a.documentElement&&("Image"!=a.documentElement.localName&&"Image"!=a.documentElement.tagName||(c=a.documentElement.namespaceURI)),c=(c||"").toLowerCase(),-1!==c.indexOf("schemas.microsoft.com/deepzoom/2008")||-1!==c.indexOf("schemas.microsoft.com/deepzoom/2009")},configure:function(d,e){var f;return f=a.isPlainObject(d)?c(this,d):b(this,d),e&&!f.tilesUrl&&(f.tilesUrl=e.replace(/([^\/]+?)(\.(dzi|xml|js)?(\?[^\/]*)?)?\/?$/,"$1_files/"),-1!=e.search(/\.(dzi|xml|js)\?/)?f.queryParams=e.match(/\?.*/):f.queryParams=""),f},getTileUrl:function(a,b,c){return[this.tilesUrl,a,"/",b,"_",c,".",this.fileFormat,this.queryParams].join("")},tileExists:function(a,b,c){var d,e,f,g,h,i,j,k=this._levelRects[a];if(this.minLevel&&a<this.minLevel||this.maxLevel&&a>this.maxLevel)return!1;if(!k||!k.length)return!0;for(j=k.length-1;j>=0;j--)if(d=k[j],!(a<d.minLevel||a>d.maxLevel)&&(e=this.getLevelScale(a),f=d.x*e,g=d.y*e,h=f+d.width*e,i=g+d.height*e,f=Math.floor(f/this._tileWidth),g=Math.floor(g/this._tileWidth),h=Math.ceil(h/this._tileWidth),i=Math.ceil(i/this._tileWidth),f<=b&&b<h&&g<=c&&c<i))return!0;return!1}})}(OpenSeadragon),function(a){function b(a){var b=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json"],c=-1!==b.indexOf(a[0]),d=!1;return a.length>1&&a[1].supports&&(d=-1!==a[1].supports.indexOf("sizeByW")),!c||d}function c(a){for(var b=[],c=0;c<a.sizes.length;c++)b.push({url:a["@id"]+"/full/"+a.sizes[c].width+",/0/default."+a.tileFormat,width:a.sizes[c].width,height:a.sizes[c].height});return b.sort(function(a,b){return a.width-b.width})}function d(b){if(!b||!b.documentElement)throw new Error(a.getString("Errors.Xml"));var c=b.documentElement,d=c.tagName,f=null;if("info"==d)try{return f={},e(c,f),f}catch(g){throw g instanceof Error?g:new Error(a.getString("Errors.IIIF"))}throw new Error(a.getString("Errors.IIIF"))}function e(b,c,d){var f,g;if(3==b.nodeType&&d)g=b.nodeValue.trim(),g.match(/^\d*$/)&&(g=Number(g)),c[d]?(a.isArray(c[d])||(c[d]=[c[d]]),c[d].push(g)):c[d]=g;else if(1==b.nodeType)for(f=0;f<b.childNodes.length;f++)e(b.childNodes[f],c,b.nodeName)}a.IIIFTileSource=function(d){if(a.extend(!0,this,d),!(this.height&&this.width&&this["@id"]))throw new Error("IIIF required parameters not provided.");if(d.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.tile_width&&this.tile_height)d.tileWidth=this.tile_width,d.tileHeight=this.tile_height;else if(this.tile_width)d.tileSize=this.tile_width;else if(this.tile_height)d.tileSize=this.tile_height;else if(this.tiles)if(1==this.tiles.length)d.tileWidth=this.tiles[0].width,d.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var e=0;e<this.tiles.length;e++)for(var f=0;f<this.tiles[e].scaleFactors.length;f++){var g=this.tiles[e].scaleFactors[f];this.scale_factors.push(g),d.tileSizePerScaleFactor[g]={width:this.tiles[e].width,height:this.tiles[e].height||this.tiles[e].width}}}else if(b(d.profile)){for(var h=Math.min(this.height,this.width),i=[256,512,1024],j=[],k=0;k<i.length;k++)i[k]<=h&&j.push(i[k]);j.length>0?d.tileSize=Math.max.apply(null,j):d.tileSize=h}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,d.levels=c(this),a.extend(!0,d,{width:d.levels[d.levels.length-1].width,height:d.levels[d.levels.length-1].height,tileSize:Math.max(d.height,d.width),tileOverlap:0,minLevel:0,maxLevel:d.levels.length-1}),this.levels=d.levels):a.console.error("Nothing in the info.json to construct image pyramids from");if(!d.maxLevel&&!this.emulateLegacyImagePyramid)if(this.scale_factors){var l=Math.max.apply(null,this.scale_factors);d.maxLevel=Math.round(Math.log(l)*Math.LOG2E)}else d.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)));a.TileSource.apply(this,[d])},a.extend(a.IIIFTileSource.prototype,a.TileSource.prototype,{supports:function(a,b){return!(!a.protocol||"http://iiif.io/api/image"!=a.protocol)||(!(!a["@context"]||"http://library.stanford.edu/iiif/image-api/1.1/context.json"!=a["@context"]&&"http://iiif.io/api/image/1/context.json"!=a["@context"])||(!(!a.profile||0!==a.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html"))||(!!(a.identifier&&a.width&&a.height)||!(!a.documentElement||"info"!=a.documentElement.tagName||"http://library.stanford.edu/iiif/image-api/ns/"!=a.documentElement.namespaceURI))))},configure:function(b,c){if(a.isPlainObject(b)){if(b["@context"]||(b["@context"]="http://iiif.io/api/image/1.0/context.json",b["@id"]=c.replace("/info.json","")),b.preferredFormats)for(var e=0;e<b.preferredFormats.length;e++)if(OpenSeadragon.imageFormatSupported(b.preferredFormats[e])){b.tileFormat=b.preferredFormats[e];break}return b}var f=d(b);return f["@context"]="http://iiif.io/api/image/1.0/context.json",f["@id"]=c.replace("/info.xml",""),f},getTileWidth:function(b){if(this.emulateLegacyImagePyramid)return a.TileSource.prototype.getTileWidth.call(this,b);var c=Math.pow(2,this.maxLevel-b);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[c]?this.tileSizePerScaleFactor[c].width:this._tileWidth},getTileHeight:function(b){if(this.emulateLegacyImagePyramid)return a.TileSource.prototype.getTileHeight.call(this,b);var c=Math.pow(2,this.maxLevel-b);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[c]?this.tileSizePerScaleFactor[c].height:this._tileHeight},getLevelScale:function(b){if(this.emulateLegacyImagePyramid){var c=NaN;return this.levels.length>0&&b>=this.minLevel&&b<=this.maxLevel&&(c=this.levels[b].width/this.levels[this.maxLevel].width),c}return a.TileSource.prototype.getLevelScale.call(this,b)},getNumTiles:function(b){if(this.emulateLegacyImagePyramid){return this.getLevelScale(b)?new a.Point(1,1):new a.Point(0,0)}return a.TileSource.prototype.getNumTiles.call(this,b)},getTileAtPoint:function(b,c){return this.emulateLegacyImagePyramid?new a.Point(0,0):a.TileSource.prototype.getTileAtPoint.call(this,b,c)},getTileUrl:function(a,b,c){if(this.emulateLegacyImagePyramid){var d=null;return this.levels.length>0&&a>=this.minLevel&&a<=this.maxLevel&&(d=this.levels[a].url),d}var e,f,g,h,i,j,k,l,m,n,o,p,q,r="0",s=Math.pow(.5,this.maxLevel-a),t=Math.ceil(this.width*s),u=Math.ceil(this.height*s);return e=this.getTileWidth(a),f=this.getTileHeight(a),g=Math.ceil(e/s),h=Math.ceil(f/s),q=this["@context"].indexOf("/1.0/context.json")>-1||this["@context"].indexOf("/1.1/context.json")>-1||this["@context"].indexOf("/1/context.json")>-1,p=q?"native."+this.tileFormat:"default."+this.tileFormat,t<e&&u<f?(n=q||t!==this.width?t+",":"max",i="full"):(j=b*g,k=c*h,l=Math.min(g,this.width-j),m=Math.min(h,this.height-k),i=0===b&&0===c&&l===this.width&&m===this.height?"full":[j,k,l,m].join(","),o=Math.ceil(l*s),n=q||o!==this.width?o+",":"max"),[this["@id"],i,n,r,p].join("/")}})}(OpenSeadragon),function(a){a.OsmTileSource=function(b,c,d,e,f){var g;g=a.isPlainObject(b)?b:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},g.width&&g.height||(g.width=65572864,g.height=65572864),g.tileSize||(g.tileSize=256,g.tileOverlap=0),g.tilesUrl||(g.tilesUrl="http://tile.openstreetmap.org/"),g.minLevel=8,a.TileSource.apply(this,[g])},a.extend(a.OsmTileSource.prototype,a.TileSource.prototype,{supports:function(a,b){return a.type&&"openstreetmaps"==a.type},configure:function(a,b){return a},getTileUrl:function(a,b,c){return this.tilesUrl+(a-8)+"/"+b+"/"+c+".png"}})}(OpenSeadragon),function(a){a.TmsTileSource=function(b,c,d,e,f){var g;g=a.isPlainObject(b)?b:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var h,i=256*Math.ceil(g.width/256),j=256*Math.ceil(g.height/256);h=i>j?i/256:j/256,g.maxLevel=Math.ceil(Math.log(h)/Math.log(2))-1,g.tileSize=256,g.width=i,g.height=j,a.TileSource.apply(this,[g])},a.extend(a.TmsTileSource.prototype,a.TileSource.prototype,{supports:function(a,b){return a.type&&"tiledmapservice"==a.type},configure:function(a,b){return a},getTileUrl:function(a,b,c){var d=this.getNumTiles(a).y-1;return this.tilesUrl+a+"/"+b+"/"+(d-c)+".png"}})}(OpenSeadragon),function(a){a.ZoomifyTileSource=function(a){a.tileSize=256;var b={x:a.width,y:a.height};for(a.imageSizes=[{x:a.width,y:a.height}],a.gridSize=[this._getGridSize(a.width,a.height,a.tileSize)];parseInt(b.x,10)>a.tileSize||parseInt(b.y,10)>a.tileSize;)b.x=Math.floor(b.x/2),b.y=Math.floor(b.y/2),a.imageSizes.push({x:b.x,y:b.y}),a.gridSize.push(this._getGridSize(b.x,b.y,a.tileSize));a.imageSizes.reverse(),a.gridSize.reverse(),a.minLevel=0,a.maxLevel=a.gridSize.length-1,OpenSeadragon.TileSource.apply(this,[a])},a.extend(a.ZoomifyTileSource.prototype,a.TileSource.prototype,{_getGridSize:function(a,b,c){return{x:Math.ceil(a/c),y:Math.ceil(b/c)}},_calculateAbsoluteTileNumber:function(a,b,c){for(var d=0,e={},f=0;f<a;f++)e=this.gridSize[f],d+=e.x*e.y;return e=this.gridSize[a],d+=e.x*c+b},supports:function(a,b){return a.type&&"zoomifytileservice"==a.type},configure:function(a,b){return a},getTileUrl:function(a,b,c){var d=0,e=this._calculateAbsoluteTileNumber(a,b,c);return d=Math.floor(e/256),this.tilesUrl+"TileGroup"+d+"/"+a+"-"+b+"-"+c+".jpg"}})}(OpenSeadragon),function(a){function b(b){var c,d,e=[];for(d=0;d<b.length;d++)c=b[d],c.height&&c.width&&c.url?e.push({url:c.url,width:Number(c.width),height:Number(c.height)}):a.console.error("Unsupported image format: %s",c.url?c.url:"<no URL>");return e.sort(function(a,b){return a.height-b.height})}function c(b,c){if(!c||!c.documentElement)throw new Error(a.getString("Errors.Xml"));var e,f,g=c.documentElement,h=g.tagName,i=null,j=[];if("image"==h)try{for(i={type:g.getAttribute("type"),levels:[]},j=g.getElementsByTagName("level"),f=0;f<j.length;f++)e=j[f],i.levels.push({url:e.getAttribute("url"),width:parseInt(e.getAttribute("width"),10),height:parseInt(e.getAttribute("height"),10)});return d(b,i)}catch(k){throw k instanceof Error?k:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if("collection"==h)throw new Error("Legacy Image Pyramid Collections not yet supported.");if("error"==h)throw new Error("Error: "+c)}throw new Error("Unknown element "+h)}function d(a,b){return b.levels}a.LegacyTileSource=function(c){var d,e,f;a.isArray(c)&&(d={type:"legacy-image-pyramid",levels:c}),d.levels=b(d.levels),d.levels.length>0?(e=d.levels[d.levels.length-1].width,f=d.levels[d.levels.length-1].height):(e=0,f=0,a.console.error("No supported image formats found")),a.extend(!0,d,{width:e,height:f,tileSize:Math.max(f,e),tileOverlap:0,minLevel:0,maxLevel:d.levels.length>0?d.levels.length-1:0}),a.TileSource.apply(this,[d]),this.levels=d.levels},a.extend(a.LegacyTileSource.prototype,a.TileSource.prototype,{supports:function(a,b){return a.type&&"legacy-image-pyramid"==a.type||a.documentElement&&"legacy-image-pyramid"==a.documentElement.getAttribute("type")},configure:function(b,e){return a.isPlainObject(b)?d(this,b):c(this,b)},getLevelScale:function(a){var b=NaN;return this.levels.length>0&&a>=this.minLevel&&a<=this.maxLevel&&(b=this.levels[a].width/this.levels[this.maxLevel].width),b},getNumTiles:function(b){return this.getLevelScale(b)?new a.Point(1,1):new a.Point(0,0)},getTileUrl:function(a,b,c){var d=null;return this.levels.length>0&&a>=this.minLevel&&a<=this.maxLevel&&(d=this.levels[a].url),d}})}(OpenSeadragon),function(a){a.ImageTileSource=function(b){b=a.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},b),a.TileSource.apply(this,[b])},a.extend(a.ImageTileSource.prototype,a.TileSource.prototype,{supports:function(a,b){return a.type&&"image"===a.type},configure:function(a,b){return a},getImageInfo:function(b){var c=this._image=new Image,d=this;this.crossOriginPolicy&&(c.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(c.useCredentials=this.ajaxWithCredentials),a.addEvent(c,"load",function(){d.width=Object.prototype.hasOwnProperty.call(c,"naturalWidth")?c.naturalWidth:c.width,d.height=Object.prototype.hasOwnProperty.call(c,"naturalHeight")?c.naturalHeight:c.height,d.aspectRatio=d.width/d.height,d.dimensions=new a.Point(d.width,d.height),d._tileWidth=d.width,d._tileHeight=d.height,d.tileOverlap=0,d.minLevel=0,d.levels=d._buildLevels(),d.maxLevel=d.levels.length-1,d.ready=!0,d.raiseEvent("ready",{tileSource:d})}),a.addEvent(c,"error",function(){d.raiseEvent("open-failed",{message:"Error loading image at "+b,source:b})}),c.src=b},getLevelScale:function(a){var b=NaN;return a>=this.minLevel&&a<=this.maxLevel&&(b=this.levels[a].width/this.levels[this.maxLevel].width),b},getNumTiles:function(b){return this.getLevelScale(b)?new a.Point(1,1):new a.Point(0,0)},getTileUrl:function(a,b,c){var d=null;return a>=this.minLevel&&a<=this.maxLevel&&(d=this.levels[a].url),d},getContext2D:function(a,b,c){var d=null;return a>=this.minLevel&&a<=this.maxLevel&&(d=this.levels[a].context2D),d},_buildLevels:function(){var b=[{url:this._image.src,width:Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,height:Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height}];if(!this.buildPyramid||!a.supportsCanvas||!this.useCanvas)return delete this._image,b;var c=Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,d=Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height,e=document.createElement("canvas"),f=e.getContext("2d");if(e.width=c,e.height=d,f.drawImage(this._image,0,0,c,d),b[0].context2D=f,delete this._image,a.isCanvasTainted(e))return b;for(;c>=2&&d>=2;){c=Math.floor(c/2),d=Math.floor(d/2);var g=document.createElement("canvas"),h=g.getContext("2d");g.width=c,g.height=d,h.drawImage(e,0,0,c,d),b.splice(0,0,{context2D:h,width:c,height:d}),e=g,f=h}return b}})}(OpenSeadragon),function(a){a.TileSourceCollection=function(b,c,d,e){a.console.error("TileSourceCollection is deprecated; use World instead")}}(OpenSeadragon),function(a){function b(b){a.requestAnimationFrame(function(){c(b)})}function c(c){var d,e,f;c.shouldFade&&(d=a.now(),e=d-c.fadeBeginTime,f=1-e/c.fadeLength,f=Math.min(1,f),f=Math.max(0,f),c.imgGroup&&a.setElementOpacity(c.imgGroup,f,!0),f>0&&b(c))}function d(c){c.shouldFade=!0,c.fadeBeginTime=a.now()+c.fadeDelay,window.setTimeout(function(){b(c)},c.fadeDelay)}function e(b){b.shouldFade=!1,b.imgGroup&&a.setElementOpacity(b.imgGroup,1,!0)}function f(b,c){b.element.disabled||(c>=a.ButtonState.GROUP&&b.currentState==a.ButtonState.REST&&(e(b),b.currentState=a.ButtonState.GROUP),c>=a.ButtonState.HOVER&&b.currentState==a.ButtonState.GROUP&&(b.imgHover&&(b.imgHover.style.visibility=""),b.currentState=a.ButtonState.HOVER),c>=a.ButtonState.DOWN&&b.currentState==a.ButtonState.HOVER&&(b.imgDown&&(b.imgDown.style.visibility=""),b.currentState=a.ButtonState.DOWN))}function g(b,c){b.element.disabled||(c<=a.ButtonState.HOVER&&b.currentState==a.ButtonState.DOWN&&(b.imgDown&&(b.imgDown.style.visibility="hidden"),b.currentState=a.ButtonState.HOVER),c<=a.ButtonState.GROUP&&b.currentState==a.ButtonState.HOVER&&(b.imgHover&&(b.imgHover.style.visibility="hidden"),b.currentState=a.ButtonState.GROUP),c<=a.ButtonState.REST&&b.currentState==a.ButtonState.GROUP&&(d(b),b.currentState=a.ButtonState.REST))}a.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},a.Button=function(b){var c=this;a.EventSource.call(this),a.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:a.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:a.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null},b),this.element=b.element||a.makeNeutralElement("div"),b.element||(this.imgRest=a.makeTransparentImage(this.srcRest),this.imgGroup=a.makeTransparentImage(this.srcGroup),this.imgHover=a.makeTransparentImage(this.srcHover),this.imgDown=a.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,this.element.style.position="relative",a.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",a.Browser.vendor==a.BROWSERS.FIREFOX&&a.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=a.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new a.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(b){b.insideElementPressed?(f(c,a.ButtonState.DOWN),c.raiseEvent("enter",{originalEvent:b.originalEvent})):b.buttonDownAny||f(c,a.ButtonState.HOVER)},focusHandler:function(a){this.enterHandler(a),c.raiseEvent("focus",{originalEvent:a.originalEvent})},exitHandler:function(b){g(c,a.ButtonState.GROUP),b.insideElementPressed&&c.raiseEvent("exit",{originalEvent:b.originalEvent})},blurHandler:function(a){this.exitHandler(a),c.raiseEvent("blur",{originalEvent:a.originalEvent})},pressHandler:function(b){f(c,a.ButtonState.DOWN),c.raiseEvent("press",{originalEvent:b.originalEvent})},releaseHandler:function(b){b.insideElementPressed&&b.insideElementReleased?(g(c,a.ButtonState.HOVER),c.raiseEvent("release",{originalEvent:b.originalEvent})):b.insideElementPressed?g(c,a.ButtonState.GROUP):f(c,a.ButtonState.HOVER)},clickHandler:function(a){a.quick&&c.raiseEvent("click",{originalEvent:a.originalEvent})},keyHandler:function(a){return 13!==a.keyCode||(c.raiseEvent("click",{originalEvent:a.originalEvent}),c.raiseEvent("release",{originalEvent:a.originalEvent}),!1)}}),g(this,a.ButtonState.REST)},a.extend(a.Button.prototype,a.EventSource.prototype,{notifyGroupEnter:function(){f(this,a.ButtonState.GROUP)},notifyGroupExit:function(){g(this,a.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,a.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,a.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()}})}(OpenSeadragon),function(a){a.ButtonGroup=function(b){a.extend(!0,this,{buttons:[],clickTimeThreshold:a.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:a.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},b);var c,d=this.buttons.concat([]),e=this;if(this.element=b.element||a.makeNeutralElement("div"),!b.group)for(this.element.style.display="inline-block",c=0;c<d.length;c++)this.element.appendChild(d[c].element);a.setElementTouchActionNone(this.element),this.tracker=new a.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(a){var b;for(b=0;b<e.buttons.length;b++)e.buttons[b].notifyGroupEnter()},exitHandler:function(a){var b;if(!a.insideElementPressed)for(b=0;b<e.buttons.length;b++)e.buttons[b].notifyGroupExit()}})},a.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateExit:function(){this.tracker.exitHandler({eventSource:this.tracker})}}}(OpenSeadragon),function(a){a.Rect=function(b,c,d,e,f){this.x="number"==typeof b?b:0,this.y="number"==typeof c?c:0,this.width="number"==typeof d?d:0,this.height="number"==typeof e?e:0,this.degrees="number"==typeof f?f:0,this.degrees=a.positiveModulo(this.degrees,360);var g,h;this.degrees>=270?(g=this.getTopRight(),this.x=g.x,this.y=g.y,h=this.height,this.height=this.width,
this.width=h,this.degrees-=270):this.degrees>=180?(g=this.getBottomRight(),this.x=g.x,this.y=g.y,this.degrees-=180):this.degrees>=90&&(g=this.getBottomLeft(),this.x=g.x,this.y=g.y,h=this.height,this.height=this.width,this.width=h,this.degrees-=90)},a.Rect.fromSummits=function(b,c,d){var e=b.distanceTo(c),f=b.distanceTo(d),g=c.minus(b),h=Math.atan(g.y/g.x);return g.x<0?h+=Math.PI:g.y<0&&(h+=2*Math.PI),new a.Rect(b.x,b.y,e,f,h/Math.PI*180)},a.Rect.prototype={clone:function(){return new a.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new a.Point(this.x,this.y)},getBottomRight:function(){return new a.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new a.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new a.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new a.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new a.Point(this.width,this.height)},equals:function(b){return b instanceof a.Rect&&this.x===b.x&&this.y===b.y&&this.width===b.width&&this.height===b.height&&this.degrees===b.degrees},times:function(b){return new a.Rect(this.x*b,this.y*b,this.width*b,this.height*b,this.degrees)},translate:function(b){return new a.Rect(this.x+b.x,this.y+b.y,this.width,this.height,this.degrees)},union:function(b){var c=this.getBoundingBox(),d=b.getBoundingBox(),e=Math.min(c.x,d.x),f=Math.min(c.y,d.y),g=Math.max(c.x+c.width,d.x+d.width),h=Math.max(c.y+c.height,d.y+d.height);return new a.Rect(e,f,g-e,h-f)},intersection:function(b){function c(b,c,e,f){var g=c.minus(b),h=f.minus(e),i=-h.x*g.y+g.x*h.y;if(0===i)return null;var j=(g.x*(b.y-e.y)-g.y*(b.x-e.x))/i,k=(h.x*(b.y-e.y)-h.y*(b.x-e.x))/i;return-d<=j&&j<=1-d&&-d<=k&&k<=1-d?new a.Point(b.x+k*g.x,b.y+k*g.y):null}var d=1e-10,e=[],f=this.getTopLeft();b.containsPoint(f,d)&&e.push(f);var g=this.getTopRight();b.containsPoint(g,d)&&e.push(g);var h=this.getBottomLeft();b.containsPoint(h,d)&&e.push(h);var i=this.getBottomRight();b.containsPoint(i,d)&&e.push(i);var j=b.getTopLeft();this.containsPoint(j,d)&&e.push(j);var k=b.getTopRight();this.containsPoint(k,d)&&e.push(k);var l=b.getBottomLeft();this.containsPoint(l,d)&&e.push(l);var m=b.getBottomRight();this.containsPoint(m,d)&&e.push(m);for(var n=this._getSegments(),o=b._getSegments(),p=0;p<n.length;p++)for(var q=n[p],r=0;r<o.length;r++){var s=o[r],t=c(q[0],q[1],s[0],s[1]);t&&e.push(t)}if(0===e.length)return null;for(var u=e[0].x,v=e[0].x,w=e[0].y,x=e[0].y,y=1;y<e.length;y++){var z=e[y];z.x<u&&(u=z.x),z.x>v&&(v=z.x),z.y<w&&(w=z.y),z.y>x&&(x=z.y)}return new a.Rect(u,w,v-u,x-w)},_getSegments:function(){var a=this.getTopLeft(),b=this.getTopRight(),c=this.getBottomLeft(),d=this.getBottomRight();return[[a,b],[b,d],[d,c],[c,a]]},rotate:function(b,c){if(0===(b=a.positiveModulo(b,360)))return this.clone();c=c||this.getCenter();var d=this.getTopLeft().rotate(b,c),e=this.getTopRight().rotate(b,c),f=e.minus(d);f=f.apply(function(a){return Math.abs(a)<1e-15?0:a});var g=Math.atan(f.y/f.x);return f.x<0?g+=Math.PI:f.y<0&&(g+=2*Math.PI),new a.Rect(d.x,d.y,this.width,this.height,g/Math.PI*180)},getBoundingBox:function(){if(0===this.degrees)return this.clone();var b=this.getTopLeft(),c=this.getTopRight(),d=this.getBottomLeft(),e=this.getBottomRight(),f=Math.min(b.x,c.x,d.x,e.x),g=Math.max(b.x,c.x,d.x,e.x),h=Math.min(b.y,c.y,d.y,e.y),i=Math.max(b.y,c.y,d.y,e.y);return new a.Rect(f,h,g-f,i-h)},getIntegerBoundingBox:function(){var b=this.getBoundingBox(),c=Math.floor(b.x),d=Math.floor(b.y),e=Math.ceil(b.width+b.x-c),f=Math.ceil(b.height+b.y-d);return new a.Rect(c,d,e,f)},containsPoint:function(a,b){b=b||0;var c=this.getTopLeft(),d=this.getTopRight(),e=this.getBottomLeft(),f=d.minus(c),g=e.minus(c);return(a.x-c.x)*f.x+(a.y-c.y)*f.y>=-b&&(a.x-d.x)*f.x+(a.y-d.y)*f.y<=b&&(a.x-c.x)*g.x+(a.y-c.y)*g.y>=-b&&(a.x-e.x)*g.x+(a.y-e.y)*g.y<=b},toString:function(){return"["+Math.round(100*this.x)/100+", "+Math.round(100*this.y)/100+", "+Math.round(100*this.width)/100+"x"+Math.round(100*this.height)/100+", "+Math.round(100*this.degrees)/100+"deg]"}}}(OpenSeadragon),function(a){function b(b){var c=Number(this.element.style.marginLeft.replace("px","")),e=Number(this.element.style.marginTop.replace("px","")),f=Number(this.element.style.width.replace("px","")),g=Number(this.element.style.height.replace("px","")),h=a.getElementSize(this.viewer.canvas);return this.dragging=!0,this.element&&("horizontal"==this.scroll?-b.delta.x>0?c>-(f-h.x)&&(this.element.style.marginLeft=c+2*b.delta.x+"px",d(this,h.x,c+2*b.delta.x)):-b.delta.x<0&&c<0&&(this.element.style.marginLeft=c+2*b.delta.x+"px",d(this,h.x,c+2*b.delta.x)):-b.delta.y>0?e>-(g-h.y)&&(this.element.style.marginTop=e+2*b.delta.y+"px",d(this,h.y,e+2*b.delta.y)):-b.delta.y<0&&e<0&&(this.element.style.marginTop=e+2*b.delta.y+"px",d(this,h.y,e+2*b.delta.y))),!1}function c(b){var c=Number(this.element.style.marginLeft.replace("px","")),e=Number(this.element.style.marginTop.replace("px","")),f=Number(this.element.style.width.replace("px","")),g=Number(this.element.style.height.replace("px","")),h=a.getElementSize(this.viewer.canvas);return this.element&&("horizontal"==this.scroll?b.scroll>0?c>-(f-h.x)&&(this.element.style.marginLeft=c-60*b.scroll+"px",d(this,h.x,c-60*b.scroll)):b.scroll<0&&c<0&&(this.element.style.marginLeft=c-60*b.scroll+"px",d(this,h.x,c-60*b.scroll)):b.scroll<0?e>h.y-g&&(this.element.style.marginTop=e+60*b.scroll+"px",d(this,h.y,e+60*b.scroll)):b.scroll>0&&e<0&&(this.element.style.marginTop=e+60*b.scroll+"px",d(this,h.y,e+60*b.scroll))),!1}function d(b,c,d){var e,f,g,h,i,j,k;for(e="horizontal"==b.scroll?b.panelWidth:b.panelHeight,f=Math.ceil(c/e)+5,g=Math.ceil((Math.abs(d)+c)/e)+1,f=g-f,f=f<0?0:f,j=f;j<g&&j<b.panels.length;j++)if(k=b.panels[j],!k.activePanel){var l,m=b.viewer.tileSources[j];l=m.referenceStripThumbnailUrl?{type:"image",url:m.referenceStripThumbnailUrl}:m,h=new a.Viewer({id:k.id,tileSources:[l],element:k,navigatorSizeRatio:b.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0}),h.displayRegion=a.makeNeutralElement("div"),h.displayRegion.id=k.id+"-displayregion",h.displayRegion.className="displayregion",i=h.displayRegion.style,i.position="relative",i.top="0px",i.left="0px",i.fontSize="0px",i.overflow="hidden",i.float="left",i.cssFloat="left",i.styleFloat="left",i.zIndex=999999999,i.cursor="default",i.width=b.panelWidth-4+"px",i.height=b.panelHeight-4+"px",h.displayRegion.innerTracker=new a.MouseTracker({element:h.displayRegion,startDisabled:!0}),k.getElementsByTagName("div")[0].appendChild(h.displayRegion),b.miniViewers[k.id]=h,k.activePanel=!0}}function e(a){var b=a.eventSource.element;return"horizontal"==this.scroll?b.style.marginBottom="0px":b.style.marginLeft="0px",!1}function f(b){var c=b.eventSource.element;return"horizontal"==this.scroll?c.style.marginBottom="-"+a.getElementSize(c).y/2+"px":c.style.marginLeft="-"+a.getElementSize(c).x/2+"px",!1}function g(a){if(a.preventDefaultAction||a.ctrl||a.alt||a.meta)return!0;switch(a.keyCode){case 38:return c.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 40:case 37:return c.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 39:return c.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}}function h(a){if(a.preventDefaultAction||a.ctrl||a.alt||a.meta)return!0;switch(a.keyCode){case 61:return c.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 45:return c.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 48:case 119:case 87:return c.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 115:case 83:case 97:return c.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 100:return c.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}}var i={};a.ReferenceStrip=function(j){var k,l,m,n=this,o=j.viewer,p=a.getElementSize(o.element);for(j.id||(j.id="referencestrip-"+a.now(),this.element=a.makeNeutralElement("div"),this.element.id=j.id,this.element.className="referencestrip"),j=a.extend(!0,{sizeRatio:a.DEFAULT_SETTINGS.referenceStripSizeRatio,position:a.DEFAULT_SETTINGS.referenceStripPosition,scroll:a.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:a.DEFAULT_SETTINGS.clickTimeThreshold},j,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1}),a.extend(this,j),i[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,l=this.element.style,l.marginTop="0px",l.marginRight="0px",l.marginBottom="0px",l.marginLeft="0px",l.left="0px",l.bottom="0px",l.border="0px",l.background="#000",l.position="relative",a.setElementTouchActionNone(this.element),a.setElementOpacity(this.element,.8),this.viewer=o,this.innerTracker=new a.MouseTracker({element:this.element,dragHandler:a.delegate(this,b),scrollHandler:a.delegate(this,c),enterHandler:a.delegate(this,e),exitHandler:a.delegate(this,f),keyDownHandler:a.delegate(this,g),keyHandler:a.delegate(this,h)}),j.width&&j.height?(this.element.style.width=j.width+"px",this.element.style.height=j.height+"px",o.addControl(this.element,{anchor:a.ControlAnchor.BOTTOM_LEFT})):"horizontal"==j.scroll?(this.element.style.width=p.x*j.sizeRatio*o.tileSources.length+12*o.tileSources.length+"px",this.element.style.height=p.y*j.sizeRatio+"px",o.addControl(this.element,{anchor:a.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=p.y*j.sizeRatio*o.tileSources.length+12*o.tileSources.length+"px",this.element.style.width=p.x*j.sizeRatio+"px",o.addControl(this.element,{anchor:a.ControlAnchor.TOP_LEFT})),this.panelWidth=p.x*this.sizeRatio+8,this.panelHeight=p.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},m=0;m<o.tileSources.length;m++)k=a.makeNeutralElement("div"),k.id=this.element.id+"-"+m,k.style.width=n.panelWidth+"px",k.style.height=n.panelHeight+"px",k.style.display="inline",k.style.float="left",k.style.cssFloat="left",k.style.styleFloat="left",k.style.padding="2px",a.setElementTouchActionNone(k),k.innerTracker=new a.MouseTracker({element:k,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,pressHandler:function(b){b.eventSource.dragging=a.now()},releaseHandler:function(b){var c=b.eventSource,d=c.element.id,e=Number(d.split("-")[2]),f=a.now();b.insideElementPressed&&b.insideElementReleased&&c.dragging&&f-c.dragging<c.clickTimeThreshold&&(c.dragging=null,o.goToPage(e))}}),this.element.appendChild(k),k.activePanel=!1,this.panels.push(k);d(this,"vertical"==this.scroll?p.y:p.x,0),this.setFocus(0)},a.extend(a.ReferenceStrip.prototype,a.EventSource.prototype,a.Viewer.prototype,{setFocus:function(b){var c,f=a.getElement(this.element.id+"-"+b),g=a.getElementSize(this.viewer.canvas),h=Number(this.element.style.width.replace("px","")),i=Number(this.element.style.height.replace("px","")),j=-Number(this.element.style.marginLeft.replace("px","")),k=-Number(this.element.style.marginTop.replace("px",""));this.currentSelected!==f&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=f,this.currentSelected.style.background="#999","horizontal"==this.scroll?(c=Number(b)*(this.panelWidth+3),c>j+g.x-this.panelWidth?(c=Math.min(c,h-g.x),this.element.style.marginLeft=-c+"px",d(this,g.x,-c)):c<j&&(c=Math.max(0,c-g.x/2),this.element.style.marginLeft=-c+"px",d(this,g.x,-c))):(c=Number(b)*(this.panelHeight+3),c>k+g.y-this.panelHeight?(c=Math.min(c,i-g.y),this.element.style.marginTop=-c+"px",d(this,g.y,-c)):c<k&&(c=Math.max(0,c-g.y/2),this.element.style.marginTop=-c+"px",d(this,g.y,-c))),this.currentPage=b,e.call(this,{eventSource:this.innerTracker}))},update:function(){return!!i[this.id].animating&&(a.console.log("image reference strip update"),!0)},destroy:function(){if(this.miniViewers)for(var a in this.miniViewers)this.miniViewers[a].destroy();this.element&&this.element.parentNode.removeChild(this.element)}})}(OpenSeadragon),function(a){a.DisplayRect=function(b,c,d,e,f,g){a.Rect.apply(this,[b,c,d,e]),this.minLevel=f,this.maxLevel=g},a.extend(a.DisplayRect.prototype,a.Rect.prototype)}(OpenSeadragon),function(a){function b(a,b){return(1-Math.exp(a*-b))/(1-Math.exp(-a))}a.Spring=function(b){var c=arguments;"object"!=typeof b&&(b={initial:c.length&&"number"==typeof c[0]?c[0]:void 0,springStiffness:c.length>1?c[1].springStiffness:5,animationTime:c.length>1?c[1].animationTime:1.5}),a.console.assert("number"==typeof b.springStiffness&&0!==b.springStiffness,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),a.console.assert("number"==typeof b.animationTime&&b.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),b.exponential&&(this._exponential=!0,delete b.exponential),a.extend(!0,this,b),this.current={value:"number"==typeof this.initial?this.initial:this._exponential?0:1,time:a.now()},a.console.assert(!this._exponential||0!==this.current.value,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},a.Spring.prototype={resetTo:function(b){a.console.assert(!this._exponential||0!==b,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=b,this.start.time=this.target.time=this.current.time=a.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(b){a.console.assert(!this._exponential||0!==b,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=b,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(b){this.start.value+=b,this.target.value+=b,this._exponential&&(a.console.assert(0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(b){this._exponential=b,this._exponential&&(a.console.assert(0!==this.current.value&&0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){this.current.time=a.now();var c,d;this._exponential?(c=this.start._logValue,d=this.target._logValue):(c=this.start.value,d=this.target.value);var e=this.current.time>=this.target.time?d:c+(d-c)*b(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time)),f=this.current.value;return this._exponential?this.current.value=Math.exp(e):this.current.value=e,f!=this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}}}(OpenSeadragon),function(a){function b(b){a.extend(!0,this,{timeout:a.DEFAULT_SETTINGS.timeout,jobId:null},b),this.image=null}function c(a,b,c){var d;a.jobsInProgress--,(!a.jobLimit||a.jobsInProgress<a.jobLimit)&&a.jobQueue.length>0&&(d=a.jobQueue.shift(),d.start(),a.jobsInProgress++),c(b.image,b.errorMsg,b.request)}b.prototype={errorMsg:null,start:function(){var b=this,c=this.abort;this.image=new Image,this.image.onload=function(){b.finish(!0)},this.image.onabort=this.image.onerror=function(){b.errorMsg="Image load aborted",b.finish(!1)},this.jobId=window.setTimeout(function(){b.errorMsg="Image load exceeded timeout ("+b.timeout+" ms)",b.finish(!1)},this.timeout),this.loadWithAjax?(this.request=a.makeAjaxRequest({url:this.src,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,responseType:"arraybuffer",success:function(a){var c;try{c=new window.Blob([a.response])}catch(g){var d=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if("TypeError"===g.name&&d){var e=new d;e.append(a.response),c=e.getBlob()}}0===c.size&&(b.errorMsg="Empty image response.",b.finish(!1));var f=(window.URL||window.webkitURL).createObjectURL(c);b.image.src=f},error:function(a){b.errorMsg="Image load aborted - XHR error",b.finish(!1)}}),this.abort=function(){b.request.abort(),"function"==typeof c&&c()}):(!1!==this.crossOriginPolicy&&(this.image.crossOrigin=this.crossOriginPolicy),this.image.src=this.src)},finish:function(a){this.image.onload=this.image.onerror=this.image.onabort=null,a||(this.image=null),this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},a.ImageLoader=function(b){a.extend(!0,this,{jobLimit:a.DEFAULT_SETTINGS.imageLoaderLimit,timeout:a.DEFAULT_SETTINGS.timeout,jobQueue:[],jobsInProgress:0},b)},a.ImageLoader.prototype={addJob:function(a){var d=this,e=function(b){c(d,b,a.callback)},f={src:a.src,loadWithAjax:a.loadWithAjax,ajaxHeaders:a.loadWithAjax?a.ajaxHeaders:null,crossOriginPolicy:a.crossOriginPolicy,ajaxWithCredentials:a.ajaxWithCredentials,callback:e,abort:a.abort,timeout:this.timeout},g=new b(f);!this.jobLimit||this.jobsInProgress<this.jobLimit?(g.start(),this.jobsInProgress++):this.jobQueue.push(g)},clear:function(){for(var a=0;a<this.jobQueue.length;a++){var b=this.jobQueue[a];"function"==typeof b.abort&&b.abort()}this.jobQueue=[]}}}(OpenSeadragon),function(a){a.Tile=function(a,b,c,d,e,f,g,h,i,j){this.level=a,this.x=b,this.y=c,this.bounds=d,this.sourceBounds=j,this.exists=e,this.url=f,this.context2D=g,this.loadWithAjax=h,this.ajaxHeaders=i,this.ajaxHeaders?this.cacheKey=this.url+"+"+JSON.stringify(this.ajaxHeaders):this.cacheKey=this.url,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.image=null,this.style=null,this.position=null,this.size=null,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},a.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return!!this.context2D||this.url.match(".png")},drawHTML:function(b){return this.cacheImageRecord?this.loaded?(this.element||(this.element=a.makeNeutralElement("div"),this.imgElement=this.cacheImageRecord.getImage().cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!=b&&b.appendChild(this.element),this.imgElement.parentNode!=this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",void a.setElementOpacity(this.element,this.opacity)):void a.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString()):void a.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString())},drawCanvas:function(b,c,d,e){var f,g=this.position.times(a.pixelDensityRatio),h=this.size.times(a.pixelDensityRatio);if(!this.context2D&&!this.cacheImageRecord)return void a.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString());if(f=this.context2D||this.cacheImageRecord.getRenderedContext(),!this.loaded||!f)return void a.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());b.save(),b.globalAlpha=this.opacity,"number"==typeof d&&1!==d&&(g=g.times(d),h=h.times(d)),e instanceof a.Point&&(g=g.plus(e)),1===b.globalAlpha&&this._hasTransparencyChannel()&&b.clearRect(g.x,g.y,h.x,h.y),c({context:b,tile:this,rendered:f});var i,j;this.sourceBounds?(i=Math.min(this.sourceBounds.width,f.canvas.width),j=Math.min(this.sourceBounds.height,f.canvas.height)):(i=f.canvas.width,j=f.canvas.height),b.drawImage(f.canvas,0,0,i,j,g.x,g.y,h.x,h.y),b.restore()},getScaleForEdgeSmoothing:function(){var b;if(this.cacheImageRecord)b=this.cacheImageRecord.getRenderedContext();else{if(!this.context2D)return a.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;b=this.context2D}return b.canvas.width/(this.size.x*a.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(b,c,d){var e=Math.max(1,Math.ceil((d.x-c.x)/2)),f=Math.max(1,Math.ceil((d.y-c.y)/2));return new a.Point(e,f).minus(this.position.times(a.pixelDensityRatio).times(b||1).apply(function(a){return a%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(OpenSeadragon),function(a){a.OverlayPlacement=a.Placement,a.OverlayRotationMode=a.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),a.Overlay=function(b,c,d){var e;e=a.isPlainObject(b)?b:{element:b,location:c,placement:d},this.element=e.element,this.style=e.element.style,this._init(e)},a.Overlay.prototype={_init:function(b){this.location=b.location,this.placement=void 0===b.placement?a.Placement.TOP_LEFT:b.placement,this.onDraw=b.onDraw,this.checkResize=void 0===b.checkResize||b.checkResize,this.width=void 0===b.width?null:b.width,this.height=void 0===b.height?null:b.height,this.rotationMode=b.rotationMode||a.OverlayRotationMode.EXACT,this.location instanceof a.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=a.Placement.TOP_LEFT),this.scales=null!==this.width&&null!==this.height,this.bounds=new a.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(b,c){var d=a.Placement.properties[this.placement];d&&(d.isHorizontallyCentered?b.x-=c.x/2:d.isRight&&(b.x-=c.x),d.isVerticallyCentered?b.y-=c.y/2:d.isBottom&&(b.y-=c.y))},destroy:function(){var b=this.element,c=this.style;b.parentNode&&(b.parentNode.removeChild(b),b.prevElementParent&&(c.display="none",document.body.appendChild(b))),this.onDraw=null,c.top="",c.left="",c.position="",null!==this.width&&(c.width=""),null!==this.height&&(c.height="");var d=a.getCssPropertyWithVendorPrefix("transformOrigin"),e=a.getCssPropertyWithVendorPrefix("transform");d&&e&&(c[d]="",c[e]="")},drawHTML:function(b,c){var d=this.element;d.parentNode!==b&&(d.prevElementParent=d.parentNode,d.prevNextSibling=d.nextSibling,b.appendChild(d),this.style.position="absolute",this.size=a.getElementSize(d));var e=this._getOverlayPositionAndSize(c),f=e.position,g=this.size=e.size,h=e.rotate;if(this.onDraw)this.onDraw(f,g,this.element);else{var i=this.style;i.left=f.x+"px",i.top=f.y+"px",null!==this.width&&(i.width=g.x+"px"),null!==this.height&&(i.height=g.y+"px");var j=a.getCssPropertyWithVendorPrefix("transformOrigin"),k=a.getCssPropertyWithVendorPrefix("transform");j&&k&&(h?(i[j]=this._getTransformOrigin(),i[k]="rotate("+h+"deg)"):(i[j]="",i[k]="")),"none"!==i.display&&(i.display="block")}},_getOverlayPositionAndSize:function(b){var c=b.pixelFromPoint(this.location,!0),d=this._getSizeInPixels(b);this.adjust(c,d);var e=0;if(b.degrees&&this.rotationMode!==a.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===a.OverlayRotationMode.BOUNDING_BOX&&null!==this.width&&null!==this.height){var f=new a.Rect(c.x,c.y,d.x,d.y),g=this._getBoundingBox(f,b.degrees);c=g.getTopLeft(),d=g.getSize()}else e=b.degrees;return{position:c,size:d,rotate:e}},_getSizeInPixels:function(b){var c=this.size.x,d=this.size.y;if(null!==this.width||null!==this.height){var e=b.deltaPixelsFromPointsNoRotate(new a.Point(this.width||0,this.height||0),!0);null!==this.width&&(c=e.x),null!==this.height&&(d=e.y)}if(this.checkResize&&(null===this.width||null===this.height)){var f=this.size=a.getElementSize(this.element);null===this.width&&(c=f.x),null===this.height&&(d=f.y)}return new a.Point(c,d)},_getBoundingBox:function(a,b){var c=this._getPlacementPoint(a);return a.rotate(b,c).getBoundingBox()},_getPlacementPoint:function(b){var c=new a.Point(b.x,b.y),d=a.Placement.properties[this.placement];return d&&(d.isHorizontallyCentered?c.x+=b.width/2:d.isRight&&(c.x+=b.width),d.isVerticallyCentered?c.y+=b.height/2:d.isBottom&&(c.y+=b.height)),c},_getTransformOrigin:function(){var b="",c=a.Placement.properties[this.placement];return c?(c.isLeft?b="left":c.isRight&&(b="right"),c.isTop?b+=" top":c.isBottom&&(b+=" bottom"),b):b},update:function(b,c){var d=a.isPlainObject(b)?b:{location:b,placement:c};this._init({location:d.location||this.location,placement:void 0!==d.placement?d.placement:this.placement,onDraw:d.onDraw||this.onDraw,checkResize:d.checkResize||this.checkResize,width:void 0!==d.width?d.width:this.width,height:void 0!==d.height?d.height:this.height,rotationMode:d.rotationMode||this.rotationMode})},getBounds:function(b){a.console.assert(b,"A viewport must now be passed to Overlay.getBounds.");var c=this.width,d=this.height;if(null===c||null===d){var e=b.deltaPointsFromPixelsNoRotate(this.size,!0);null===c&&(c=e.x),null===d&&(d=e.y)}var f=this.location.clone();return this.adjust(f,new a.Point(c,d)),this._adjustBoundsForRotation(b,new a.Rect(f.x,f.y,c,d))},_adjustBoundsForRotation:function(b,c){if(!b||0===b.degrees||this.rotationMode===a.OverlayRotationMode.EXACT)return c;if(this.rotationMode===a.OverlayRotationMode.BOUNDING_BOX){if(null===this.width||null===this.height)return c;var d=this._getOverlayPositionAndSize(b);return b.viewerElementToViewportRectangle(new a.Rect(d.position.x,d.position.y,d.size.x,d.size.y))}return c.rotate(-b.degrees,this._getPlacementPoint(c))}}}(OpenSeadragon),function(a){a.Drawer=function(b){a.console.assert(b.viewer,"[Drawer] options.viewer is required");var c=arguments;if(a.isPlainObject(b)||(b={source:c[0],viewport:c[1],element:c[2]}),a.console.assert(b.viewport,"[Drawer] options.viewport is required"),a.console.assert(b.element,"[Drawer] options.element is required"),b.source&&a.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=b.viewer,this.viewport=b.viewport,this.debugGridColor="string"==typeof b.debugGridColor?[b.debugGridColor]:b.debugGridColor||a.DEFAULT_SETTINGS.debugGridColor,b.opacity&&a.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=a.supportsCanvas&&(!this.viewer||this.viewer.useCanvas),this.container=a.getElement(b.element),this.canvas=a.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var d=this._calculateCanvasSize();this.canvas.width=d.x,this.canvas.height=d.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",a.setElementOpacity(this.canvas,this.opacity,!0),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._imageSmoothingEnabled=!0},a.Drawer.prototype={addOverlay:function(b,c,d,e){return a.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(b,c,d,e),this},updateOverlay:function(b,c,d){return a.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(b,c,d),this},removeOverlay:function(b){return a.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(b),this},clearOverlays:function(){return a.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},setOpacity:function(b){a.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var c=this.viewer.world,d=0;d<c.getItemCount();d++)c.getItemAt(d).setOpacity(b);return this},getOpacity:function(){a.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var b=this.viewer.world,c=0,d=0;d<b.getItemCount();d++){var e=b.getItemAt(d).getOpacity();e>c&&(c=e)}return c},needsUpdate:function(){return a.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return a.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return a.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return a.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var a=this._calculateCanvasSize();if((this.canvas.width!=a.x||this.canvas.height!=a.y)&&(this.canvas.width=a.x,this.canvas.height=a.y,this._updateImageSmoothingEnabled(this.context),null!==this.sketchCanvas)){var b=this._calculateSketchCanvasSize();this.sketchCanvas.width=b.x,this.sketchCanvas.height=b.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}},_clear:function(a,b){if(this.useCanvas){var c=this._getContext(a);if(b)c.clearRect(b.x,b.y,b.width,b.height);else{var d=c.canvas;c.clearRect(0,0,d.width,d.height)}}},viewportToDrawerRectangle:function(b){var c=this.viewport.pixelFromPointNoRotate(b.getTopLeft(),!0),d=this.viewport.deltaPixelsFromPointsNoRotate(b.getSize(),!0);return new a.Rect(c.x*a.pixelDensityRatio,c.y*a.pixelDensityRatio,d.x*a.pixelDensityRatio,d.y*a.pixelDensityRatio)},drawTile:function(b,c,d,e,f){if(a.console.assert(b,"[Drawer.drawTile] tile is required"),a.console.assert(c,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var g=this._getContext(d);e=e||1,b.drawCanvas(g,c,e,f)}else b.drawHTML(this.canvas)},_getContext:function(a){var b=this.context;if(a){if(null===this.sketchCanvas){this.sketchCanvas=document.createElement("canvas");var c=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=c.x,this.sketchCanvas.height=c.y,this.sketchContext=this.sketchCanvas.getContext("2d"),0===this.viewport.getRotation()){var d=this;this.viewer.addHandler("rotate",function a(){if(0!==d.viewport.getRotation()){d.viewer.removeHandler("rotate",a);var b=d._calculateSketchCanvasSize();d.sketchCanvas.width=b.x,d.sketchCanvas.height=b.y}})}this._updateImageSmoothingEnabled(this.sketchContext)}b=this.sketchContext}return b},saveContext:function(a){this.useCanvas&&this._getContext(a).save()},restoreContext:function(a){this.useCanvas&&this._getContext(a).restore()},setClip:function(a,b){if(this.useCanvas){var c=this._getContext(b);c.beginPath(),c.rect(a.x,a.y,a.width,a.height),c.clip()}},drawRectangle:function(a,b,c){if(this.useCanvas){var d=this._getContext(c);d.save(),d.fillStyle=b,d.fillRect(a.x,a.y,a.width,a.height),d.restore()}},blendSketch:function(b,c,d,e){var f=b
;if(a.isPlainObject(f)||(f={opacity:b,scale:c,translate:d,compositeOperation:e}),this.useCanvas&&this.sketchCanvas){b=f.opacity,e=f.compositeOperation;var g=f.bounds;if(this.context.save(),this.context.globalAlpha=b,e&&(this.context.globalCompositeOperation=e),g)g.x<0&&(g.width+=g.x,g.x=0),g.x+g.width>this.canvas.width&&(g.width=this.canvas.width-g.x),g.y<0&&(g.height+=g.y,g.y=0),g.y+g.height>this.canvas.height&&(g.height=this.canvas.height-g.y),this.context.drawImage(this.sketchCanvas,g.x,g.y,g.width,g.height,g.x,g.y,g.width,g.height);else{c=f.scale||1,d=f.translate;var h=d instanceof a.Point?d:new a.Point(0,0),i=0,j=0;if(d){var k=this.sketchCanvas.width-this.canvas.width,l=this.sketchCanvas.height-this.canvas.height;i=Math.round(k/2),j=Math.round(l/2)}this.context.drawImage(this.sketchCanvas,h.x-i*c,h.y-j*c,(this.canvas.width+2*i)*c,(this.canvas.height+2*j)*c,-i,-j,this.canvas.width+2*i,this.canvas.height+2*j)}this.context.restore()}},drawDebugInfo:function(b,c,d,e){if(this.useCanvas){var f=this.viewer.world.getIndexOfItem(e)%this.debugGridColor.length,g=this.context;g.save(),g.lineWidth=2*a.pixelDensityRatio,g.font="small-caps bold "+13*a.pixelDensityRatio+"px arial",g.strokeStyle=this.debugGridColor[f],g.fillStyle=this.debugGridColor[f],0!==this.viewport.degrees&&this._offsetForRotation({degrees:this.viewport.degrees}),e.getRotation(!0)%360!=0&&this._offsetForRotation({degrees:e.getRotation(!0),point:e.viewport.pixelFromPointNoRotate(e._getRotationPoint(!0),!0)}),0===e.viewport.degrees&&e.getRotation(!0)%360==0&&e._drawer.viewer.viewport.getFlip()&&e._drawer._flip(),g.strokeRect(b.position.x*a.pixelDensityRatio,b.position.y*a.pixelDensityRatio,b.size.x*a.pixelDensityRatio,b.size.y*a.pixelDensityRatio);var h=(b.position.x+b.size.x/2)*a.pixelDensityRatio,i=(b.position.y+b.size.y/2)*a.pixelDensityRatio;g.translate(h,i),g.rotate(Math.PI/180*-this.viewport.degrees),g.translate(-h,-i),0===b.x&&0===b.y&&(g.fillText("Zoom: "+this.viewport.getZoom(),b.position.x*a.pixelDensityRatio,(b.position.y-30)*a.pixelDensityRatio),g.fillText("Pan: "+this.viewport.getBounds().toString(),b.position.x*a.pixelDensityRatio,(b.position.y-20)*a.pixelDensityRatio)),g.fillText("Level: "+b.level,(b.position.x+10)*a.pixelDensityRatio,(b.position.y+20)*a.pixelDensityRatio),g.fillText("Column: "+b.x,(b.position.x+10)*a.pixelDensityRatio,(b.position.y+30)*a.pixelDensityRatio),g.fillText("Row: "+b.y,(b.position.x+10)*a.pixelDensityRatio,(b.position.y+40)*a.pixelDensityRatio),g.fillText("Order: "+d+" of "+c,(b.position.x+10)*a.pixelDensityRatio,(b.position.y+50)*a.pixelDensityRatio),g.fillText("Size: "+b.size.toString(),(b.position.x+10)*a.pixelDensityRatio,(b.position.y+60)*a.pixelDensityRatio),g.fillText("Position: "+b.position.toString(),(b.position.x+10)*a.pixelDensityRatio,(b.position.y+70)*a.pixelDensityRatio),0!==this.viewport.degrees&&this._restoreRotationChanges(),e.getRotation(!0)%360!=0&&this._restoreRotationChanges(),0===e.viewport.degrees&&e.getRotation(!0)%360==0&&e._drawer.viewer.viewport.getFlip()&&e._drawer._flip(),g.restore()}},debugRect:function(b){if(this.useCanvas){var c=this.context;c.save(),c.lineWidth=2*a.pixelDensityRatio,c.strokeStyle=this.debugGridColor[0],c.fillStyle=this.debugGridColor[0],c.strokeRect(b.x*a.pixelDensityRatio,b.y*a.pixelDensityRatio,b.width*a.pixelDensityRatio,b.height*a.pixelDensityRatio),c.restore()}},setImageSmoothingEnabled:function(a){this.useCanvas&&(this._imageSmoothingEnabled=a,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw())},_updateImageSmoothingEnabled:function(a){a.mozImageSmoothingEnabled=this._imageSmoothingEnabled,a.webkitImageSmoothingEnabled=this._imageSmoothingEnabled,a.msImageSmoothingEnabled=this._imageSmoothingEnabled,a.imageSmoothingEnabled=this._imageSmoothingEnabled},getCanvasSize:function(b){var c=this._getContext(b).canvas;return new a.Point(c.width,c.height)},getCanvasCenter:function(){return new a.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(b){var c=b.point?b.point.times(a.pixelDensityRatio):this.getCanvasCenter(),d=this._getContext(b.useSketch);d.save(),d.translate(c.x,c.y),this.viewer.viewport.flipped?(d.rotate(Math.PI/180*-b.degrees),d.scale(-1,1)):d.rotate(Math.PI/180*b.degrees),d.translate(-c.x,-c.y)},_flip:function(b){b=b||{};var c=b.point?b.point.times(a.pixelDensityRatio):this.getCanvasCenter(),d=this._getContext(b.useSketch);d.translate(c.x,0),d.scale(-1,1),d.translate(-c.x,0)},_restoreRotationChanges:function(a){this._getContext(a).restore()},_calculateCanvasSize:function(){var b=a.pixelDensityRatio,c=this.viewport.getContainerSize();return{x:Math.round(c.x*b),y:Math.round(c.y*b)}},_calculateSketchCanvasSize:function(){var a=this._calculateCanvasSize();if(0===this.viewport.getRotation())return a;var b=Math.ceil(Math.sqrt(a.x*a.x+a.y*a.y));return{x:b,y:b}}}}(OpenSeadragon),function(a){a.Viewport=function(b){var c=arguments;c.length&&c[0]instanceof a.Point&&(b={containerSize:c[0],contentSize:c[1],config:c[2]}),b.config&&(a.extend(!0,b,b.config),delete b.config),this._margins=a.extend({left:0,top:0,right:0,bottom:0},b.margins||{}),delete b.margins,a.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:a.DEFAULT_SETTINGS.springStiffness,animationTime:a.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:a.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:a.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:a.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:a.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:a.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:a.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:a.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:a.DEFAULT_SETTINGS.maxZoomLevel,degrees:a.DEFAULT_SETTINGS.degrees,flipped:a.DEFAULT_SETTINGS.flipped,homeFillsViewer:a.DEFAULT_SETTINGS.homeFillsViewer},b),this._updateContainerInnerSize(),this.centerSpringX=new a.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new a.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new a.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._setContentBounds(new a.Rect(0,0,1,1),1),this.goHome(!0),this.update()},a.Viewport.prototype={resetContentSize:function(b){return a.console.assert(b,"[Viewport.resetContentSize] contentSize is required"),a.console.assert(b instanceof a.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),a.console.assert(b.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),a.console.assert(b.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new a.Rect(0,0,1,b.y/b.x),b.x),this},setHomeBounds:function(b,c){a.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(b,c)},_setContentBounds:function(b,c){a.console.assert(b,"[Viewport._setContentBounds] bounds is required"),a.console.assert(b instanceof a.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),a.console.assert(b.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),a.console.assert(b.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=b.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(c),this._contentBounds=b.rotate(this.degrees).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(c),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:c,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var a=this._contentAspectRatio/this.getAspectRatio();return(this.homeFillsViewer?a>=1?a:1:a>=1?1:a)/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var b=this._contentBounds.getCenter(),c=1/this.getHomeZoom(),d=c/this.getAspectRatio();return new a.Rect(b.x-c/2,b.y-d/2,c,d)},goHome:function(a){return this.viewer&&this.viewer.raiseEvent("home",{immediately:a}),this.fitBounds(this.getHomeBounds(),a)},getMinZoom:function(){var a=this.getHomeZoom();return this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*a},getMaxZoom:function(){var a=this.maxZoomLevel;return a||(a=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,a/=this._contentBounds.width),Math.max(a,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new a.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return a.extend({},this._margins)},setMargins:function(b){a.console.assert("object"===a.type(b),"[Viewport.setMargins] margins must be an object"),this._margins=a.extend({left:0,top:0,right:0,bottom:0},b),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(a){return this.getBoundsNoRotate(a).rotate(-this.getRotation())},getBoundsNoRotate:function(b){var c=this.getCenter(b),d=1/this.getZoom(b),e=d/this.getAspectRatio();return new a.Rect(c.x-d/2,c.y-e/2,d,e)},getBoundsWithMargins:function(a){return this.getBoundsNoRotateWithMargins(a).rotate(-this.getRotation(),this.getCenter(a))},getBoundsNoRotateWithMargins:function(a){var b=this.getBoundsNoRotate(a),c=this._containerInnerSize.x*this.getZoom(a);return b.x-=this._margins.left/c,b.y-=this._margins.top/c,b.width+=(this._margins.left+this._margins.right)/c,b.height+=(this._margins.top+this._margins.bottom)/c,b},getCenter:function(b){var c,d,e,f,g,h,i,j,k=new a.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),l=new a.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return b?k:this.zoomPoint?(c=this.pixelFromPoint(this.zoomPoint,!0),d=this.getZoom(),e=1/d,f=e/this.getAspectRatio(),g=new a.Rect(k.x-e/2,k.y-f/2,e,f),h=this._pixelFromPoint(this.zoomPoint,g),i=h.minus(c),j=i.divide(this._containerInnerSize.x*d),l.plus(j)):l},getZoom:function(a){return a?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(a){return Math.max(Math.min(a,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(b){var c=new a.Rect(b.x,b.y,b.width,b.height);if(this.wrapHorizontal);else{var d=this.visibilityRatio*c.width,e=c.x+c.width,f=this._contentBoundsNoRotate.x+this._contentBoundsNoRotate.width,g=this._contentBoundsNoRotate.x-e+d,h=f-c.x-d;d>this._contentBoundsNoRotate.width?c.x+=(g+h)/2:h<0?c.x+=h:g>0&&(c.x+=g)}if(this.wrapVertical);else{var i=this.visibilityRatio*c.height,j=c.y+c.height,k=this._contentBoundsNoRotate.y+this._contentBoundsNoRotate.height,l=this._contentBoundsNoRotate.y-j+i,m=k-c.y-i;i>this._contentBoundsNoRotate.height?c.y+=(l+m)/2:m<0?c.y+=m:l>0&&(c.y+=l)}return c},_raiseConstraintsEvent:function(a){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:a})},applyConstraints:function(a){var b=this.getZoom(),c=this._applyZoomConstraints(b);b!==c&&this.zoomTo(c,this.zoomPoint,a);var d=this.getBoundsNoRotate(),e=this._applyBoundaryConstraints(d);return this._raiseConstraintsEvent(a),(d.x!==e.x||d.y!==e.y||a)&&this.fitBounds(e.rotate(-this.getRotation()),a),this},ensureVisible:function(a){return this.applyConstraints(a)},_fitBounds:function(b,c){c=c||{};var d=c.immediately||!1,e=c.constraints||!1,f=this.getAspectRatio(),g=b.getCenter(),h=new a.Rect(b.x,b.y,b.width,b.height,b.degrees+this.getRotation()).getBoundingBox();h.getAspectRatio()>=f?h.height=h.width/f:h.width=h.height*f,h.x=g.x-h.width/2,h.y=g.y-h.height/2;var i=1/h.width;if(e){var j=h.getAspectRatio(),k=this._applyZoomConstraints(i);i!==k&&(i=k,h.width=1/i,h.x=g.x-h.width/2,h.height=h.width/j,h.y=g.y-h.height/2),h=this._applyBoundaryConstraints(h),g=h.getCenter(),this._raiseConstraintsEvent(d)}if(d)return this.panTo(g,!0),this.zoomTo(i,null,!0);this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0);var l=this.getBounds(),m=this.getZoom();if(0===m||Math.abs(i/m-1)<1e-8)return this.zoomTo(i,!0),this.panTo(g,d);h=h.rotate(-this.getRotation());var n=h.getTopLeft().times(i).minus(l.getTopLeft().times(m)).divide(i-m);return this.zoomTo(i,n,d)},fitBounds:function(a,b){return this._fitBounds(a,{immediately:b,constraints:!1})},fitBoundsWithConstraints:function(a,b){return this._fitBounds(a,{immediately:b,constraints:!0})},fitVertically:function(b){var c=new a.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(c,b)},fitHorizontally:function(b){var c=new a.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(c,b)},getConstrainedBounds:function(a){var b;return b=this.getBounds(a),this._applyBoundaryConstraints(b)},panBy:function(b,c){var d=new a.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(d.plus(b),c)},panTo:function(a,b){return b?(this.centerSpringX.resetTo(a.x),this.centerSpringY.resetTo(a.y)):(this.centerSpringX.springTo(a.x),this.centerSpringY.springTo(a.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:a,immediately:b}),this},zoomBy:function(a,b,c){return this.zoomTo(this.zoomSpring.target.value*a,b,c)},zoomTo:function(b,c,d){var e=this;return this.zoomPoint=c instanceof a.Point&&!isNaN(c.x)&&!isNaN(c.y)?c:null,d?this._adjustCenterSpringsForZoomPoint(function(){e.zoomSpring.resetTo(b)}):this.zoomSpring.springTo(b),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:b,refPoint:c,immediately:d}),this},setRotation:function(b){return this.viewer&&this.viewer.drawer.canRotate()?(this.degrees=a.positiveModulo(b,360),this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:b}),this):this},getRotation:function(){return this.degrees},resize:function(a,b){var c,d=this.getBoundsNoRotate(),e=d;return this.containerSize.x=a.x,this.containerSize.y=a.y,this._updateContainerInnerSize(),b&&(c=a.x/this.containerSize.x,e.width=d.width*c,e.height=e.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:a,maintain:b}),this.fitBounds(e,!0)},_updateContainerInnerSize:function(){this._containerInnerSize=new a.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var a=this;this._adjustCenterSpringsForZoomPoint(function(){a.zoomSpring.update()}),this.centerSpringX.update(),this.centerSpringY.update();var b=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,b},_adjustCenterSpringsForZoomPoint:function(a){if(this.zoomPoint){var b=this.pixelFromPoint(this.zoomPoint,!0);a();var c=this.pixelFromPoint(this.zoomPoint,!0),d=c.minus(b),e=this.deltaPointsFromPixels(d,!0);this.centerSpringX.shiftBy(e.x),this.centerSpringY.shiftBy(e.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else a()},deltaPixelsFromPointsNoRotate:function(a,b){return a.times(this._containerInnerSize.x*this.getZoom(b))},deltaPixelsFromPoints:function(a,b){return this.deltaPixelsFromPointsNoRotate(a.rotate(this.getRotation()),b)},deltaPointsFromPixelsNoRotate:function(a,b){return a.divide(this._containerInnerSize.x*this.getZoom(b))},deltaPointsFromPixels:function(a,b){return this.deltaPointsFromPixelsNoRotate(a,b).rotate(-this.getRotation())},pixelFromPointNoRotate:function(a,b){return this._pixelFromPointNoRotate(a,this.getBoundsNoRotate(b))},pixelFromPoint:function(a,b){return this._pixelFromPoint(a,this.getBoundsNoRotate(b))},_pixelFromPointNoRotate:function(b,c){return b.minus(c.getTopLeft()).times(this._containerInnerSize.x/c.width).plus(new a.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(a,b){return this._pixelFromPointNoRotate(a.rotate(this.getRotation(),this.getCenter(!0)),b)},pointFromPixelNoRotate:function(b,c){var d=this.getBoundsNoRotate(c);return b.minus(new a.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/d.width).plus(d.getTopLeft())},pointFromPixel:function(a,b){return this.pointFromPixelNoRotate(a,b).rotate(-this.getRotation(),this.getCenter(!0))},_viewportToImageDelta:function(b,c){var d=this._contentBoundsNoRotate.width;return new a.Point(b*this._contentSizeNoRotate.x/d,c*this._contentSizeNoRotate.x/d)},viewportToImageCoordinates:function(b,c){if(b instanceof a.Point)return this.viewportToImageCoordinates(b.x,b.y);if(this.viewer){var d=this.viewer.world.getItemCount();if(d>1)a.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(1===d){var e=this.viewer.world.getItemAt(0);return e.viewportToImageCoordinates(b,c,!0)}}return this._viewportToImageDelta(b-this._contentBoundsNoRotate.x,c-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(b,c){var d=this._contentBoundsNoRotate.width;return new a.Point(b/this._contentSizeNoRotate.x*d,c/this._contentSizeNoRotate.x*d)},imageToViewportCoordinates:function(b,c){if(b instanceof a.Point)return this.imageToViewportCoordinates(b.x,b.y);if(this.viewer){var d=this.viewer.world.getItemCount();if(d>1)a.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(1===d){var e=this.viewer.world.getItemAt(0);return e.imageToViewportCoordinates(b,c,!0)}}var f=this._imageToViewportDelta(b,c);return f.x+=this._contentBoundsNoRotate.x,f.y+=this._contentBoundsNoRotate.y,f},imageToViewportRectangle:function(b,c,d,e){var f=b;if(f instanceof a.Rect||(f=new a.Rect(b,c,d,e)),this.viewer){var g=this.viewer.world.getItemCount();if(g>1)a.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(1===g){var h=this.viewer.world.getItemAt(0);return h.imageToViewportRectangle(b,c,d,e,!0)}}var i=this.imageToViewportCoordinates(f.x,f.y),j=this._imageToViewportDelta(f.width,f.height);return new a.Rect(i.x,i.y,j.x,j.y,f.degrees)},viewportToImageRectangle:function(b,c,d,e){var f=b;if(f instanceof a.Rect||(f=new a.Rect(b,c,d,e)),this.viewer){var g=this.viewer.world.getItemCount();if(g>1)a.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(1===g){var h=this.viewer.world.getItemAt(0);return h.viewportToImageRectangle(b,c,d,e,!0)}}var i=this.viewportToImageCoordinates(f.x,f.y),j=this._viewportToImageDelta(f.width,f.height);return new a.Rect(i.x,i.y,j.x,j.y,f.degrees)},viewerElementToImageCoordinates:function(a){var b=this.pointFromPixel(a,!0);return this.viewportToImageCoordinates(b)},imageToViewerElementCoordinates:function(a){var b=this.imageToViewportCoordinates(a);return this.pixelFromPoint(b,!0)},windowToImageCoordinates:function(b){a.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var c=b.minus(a.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(c)},imageToWindowCoordinates:function(b){return a.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer."),this.imageToViewerElementCoordinates(b).plus(a.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(a){return this.pointFromPixel(a,!0)},viewportToViewerElementCoordinates:function(a){return this.pixelFromPoint(a,!0)},viewerElementToViewportRectangle:function(b){return a.Rect.fromSummits(this.pointFromPixel(b.getTopLeft(),!0),this.pointFromPixel(b.getTopRight(),!0),this.pointFromPixel(b.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(b){return a.Rect.fromSummits(this.pixelFromPoint(b.getTopLeft(),!0),this.pixelFromPoint(b.getTopRight(),!0),this.pixelFromPoint(b.getBottomLeft(),!0))},windowToViewportCoordinates:function(b){a.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var c=b.minus(a.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(c)},viewportToWindowCoordinates:function(b){return a.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer."),this.viewportToViewerElementCoordinates(b).plus(a.getElementPosition(this.viewer.element))},viewportToImageZoom:function(b){if(this.viewer){var c=this.viewer.world.getItemCount();if(c>1)a.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(1===c){var d=this.viewer.world.getItemAt(0);return d.viewportToImageZoom(b)}}var e=this._contentSizeNoRotate.x;return b*(this._containerInnerSize.x/e*this._contentBoundsNoRotate.width)},imageToViewportZoom:function(b){if(this.viewer){var c=this.viewer.world.getItemCount();if(c>1)a.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(1===c){var d=this.viewer.world.getItemAt(0);return d.imageToViewportZoom(b)}}return b*(this._contentSizeNoRotate.x/this._containerInnerSize.x/this._contentBoundsNoRotate.width)},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(a){return this.flipped===a?this:(this.flipped=a,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:a}),this)}}}(OpenSeadragon),function(a){function b(a,b,d,e,f,g,h,i,j){var k=h.getBoundingBox().getTopLeft(),l=h.getBoundingBox().getBottomRight();a.viewer&&a.viewer.raiseEvent("update-level",{tiledImage:a,havedrawn:b,level:e,opacity:f,visibility:g,drawArea:h,topleft:k,bottomright:l,currenttime:i,best:j}),m(a.coverage,e),m(a.loadingCoverage,e);for(var n=a._getCornerTiles(e,k,l),o=n.topLeft,p=n.bottomRight,q=a.source.getNumTiles(e),r=a.viewport.pixelFromPoint(a.viewport.getCenter()),s=o.x;s<=p.x;s++)for(var t=o.y;t<=p.y;t++){if(!a.wrapHorizontal&&!a.wrapVertical){var u=a.source.getTileBounds(e,s,t);if(null===h.intersection(u))continue}j=c(a,d,b,s,t,e,f,g,r,q,i,j)}return j}function c(a,b,c,e,f,j,m,o,p,q,r,s){var t=d(e,f,j,a,a.source,a.tilesMatrix,r,q,a._worldWidthCurrent,a._worldHeightCurrent),u=c;a.viewer&&a.viewer.raiseEvent("update-tile",{tiledImage:a,tile:t}),l(a.coverage,j,e,f,!1);var v=t.loaded||t.loading||k(a.loadingCoverage,j,e,f);if(l(a.loadingCoverage,j,e,f,v),!t.exists)return s;if(b&&!u&&(k(a.coverage,j,e,f)?l(a.coverage,j,e,f,!0):u=!0),!u)return s;if(h(t,a.source.tileOverlap,a.viewport,p,o,a),!t.loaded)if(t.context2D)g(a,t);else{var w=a._tileCache.getImageRecord(t.cacheKey);if(w){var x=w.getImage();g(a,t,x)}}if(t.loaded){i(a,t,e,f,j,m,r)&&(a._needsDraw=!0)}else t.loading?a._tilesLoading++:v||(s=n(s,t));return s}function d(b,c,d,e,f,g,h,i,j,k){var l,m,n,o,p,q,r,s,t;return g[d]||(g[d]={}),g[d][b]||(g[d][b]={}),g[d][b][c]||(l=(i.x+b%i.x)%i.x,m=(i.y+c%i.y)%i.y,n=f.getTileBounds(d,l,m),o=f.getTileBounds(d,l,m,!0),p=f.tileExists(d,l,m),q=f.getTileUrl(d,l,m),e.loadTilesWithAjax?(r=f.getTileAjaxHeaders(d,l,m),a.isPlainObject(e.ajaxHeaders)&&(r=a.extend({},e.ajaxHeaders,r))):r=null,s=f.getContext2D?f.getContext2D(d,l,m):void 0,n.x+=(b-l)/i.x,n.y+=k/j*((c-m)/i.y),t=new a.Tile(d,b,c,n,p,q,s,e.loadTilesWithAjax,r,o),l===i.x-1&&(t.isRightMost=!0),m===i.y-1&&(t.isBottomMost=!0),g[d][b][c]=t),t=g[d][b][c],t.lastTouchTime=h,t}function e(a,b,c){b.loading=!0,a._imageLoader.addJob({src:b.url,loadWithAjax:b.loadWithAjax,ajaxHeaders:b.ajaxHeaders,crossOriginPolicy:a.crossOriginPolicy,ajaxWithCredentials:a.ajaxWithCredentials,callback:function(d,e,g){f(a,b,c,d,e,g)},abort:function(){b.loading=!1}})}function f(b,c,d,e,f,h){if(!e)return a.console.log("Tile %s failed to load: %s - error: %s",c,c.url,f),b.viewer.raiseEvent("tile-load-failed",{tile:c,tiledImage:b,time:d,message:f,tileRequest:h}),c.loading=!1,void(c.exists=!1);if(d<b.lastResetTime)return a.console.log("Ignoring tile %s loaded before reset: %s",c,c.url),void(c.loading=!1);var i=function(){var a=b.source.getClosestLevel();g(b,c,e,a,h)};b._midDraw?window.setTimeout(i,1):i()}function g(a,b,c,d,e){function f(){return h++,g}function g(){0===--h&&(b.loading=!1,b.loaded=!0,b.context2D||a._tileCache.cacheTile({image:c,tile:b,cutoff:d,tiledImage:a}),a._needsDraw=!0)}var h=0;a.viewer.raiseEvent("tile-loaded",{tile:b,tiledImage:a,tileRequest:e,image:c,getCompletionCallback:f}),f()()}function h(b,c,d,e,f,g){var h=b.bounds.getTopLeft();h.x*=g._scaleSpring.current.value,h.y*=g._scaleSpring.current.value,h.x+=g._xSpring.current.value,h.y+=g._ySpring.current.value;var i=b.bounds.getSize();i.x*=g._scaleSpring.current.value,i.y*=g._scaleSpring.current.value;var j=d.pixelFromPointNoRotate(h,!0),k=d.pixelFromPointNoRotate(h,!1),l=d.deltaPixelsFromPointsNoRotate(i,!0),m=d.deltaPixelsFromPointsNoRotate(i,!1),n=k.plus(m.divide(2)),o=e.squaredDistanceTo(n);c||(l=l.plus(new a.Point(1,1))),b.isRightMost&&g.wrapHorizontal&&(l.x+=.75),b.isBottomMost&&g.wrapVertical&&(l.y+=.75),b.position=j,b.size=l,b.squaredDistance=o,b.visibility=f}function i(a,b,c,d,e,f,g){var h,i,j=1e3*a.blendTime;if(b.blendStart||(b.blendStart=g),h=g-b.blendStart,i=j?Math.min(1,h/j):1,a.alwaysBlend&&(i*=f),b.opacity=i,a.lastDrawn.push(b),1===i)l(a.coverage,e,c,d,!0),a._hasOpaqueTile=!0;else if(h<j)return!0;return!1}function j(a,b,c,d){var e,f,g,h;if(!a[b])return!1;if(void 0===c||void 0===d){e=a[b];for(g in e)if(e.hasOwnProperty(g)){f=e[g];for(h in f)if(f.hasOwnProperty(h)&&!f[h])return!1}return!0}return void 0===a[b][c]||void 0===a[b][c][d]||!0===a[b][c][d]}function k(a,b,c,d){return void 0===c||void 0===d?j(a,b+1):j(a,b+1,2*c,2*d)&&j(a,b+1,2*c,2*d+1)&&j(a,b+1,2*c+1,2*d)&&j(a,b+1,2*c+1,2*d+1)}function l(b,c,d,e,f){if(!b[c])return void a.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",c);b[c][d]||(b[c][d]={}),b[c][d][e]=f}function m(a,b){a[b]={}}function n(a,b){return a?b.visibility>a.visibility?b:b.visibility==a.visibility&&b.squaredDistance<a.squaredDistance?b:a:b}function o(b,c){if(0!==b.opacity&&(0!==c.length||b.placeholderFillStyle)){var d,e=c[0];e&&(d=b.opacity<1||b.compositeOperation&&"source-over"!==b.compositeOperation||!b._isBottomItem()&&e._hasTransparencyChannel());var f,g,h=b.viewport.getZoom(!0),i=b.viewportToImageZoom(h);c.length>1&&i>b.smoothTileEdgesMinZoom&&!b.iOSDevice&&b.getRotation(!0)%360==0&&a.supportsCanvas&&(d=!0,f=e.getScaleForEdgeSmoothing(),g=e.getTranslationForEdgeSmoothing(f,b._drawer.getCanvasSize(!1),b._drawer.getCanvasSize(!0)));var j;d&&(f||(j=b.viewport.viewportToViewerElementRectangle(b.getClippedBounds(!0)).getIntegerBoundingBox().times(a.pixelDensityRatio),b._drawer.viewer.viewport.getFlip()&&(0===b.viewport.degrees&&b.getRotation(!0)%360==0||(j.x=b._drawer.viewer.container.clientWidth-(j.x+j.width)))),b._drawer._clear(!0,j)),f||(0!==b.viewport.degrees&&b._drawer._offsetForRotation({degrees:b.viewport.degrees,useSketch:d}),b.getRotation(!0)%360!=0&&b._drawer._offsetForRotation({degrees:b.getRotation(!0),point:b.viewport.pixelFromPointNoRotate(b._getRotationPoint(!0),!0),useSketch:d}),0===b.viewport.degrees&&b.getRotation(!0)%360==0&&b._drawer.viewer.viewport.getFlip()&&b._drawer._flip());var k=!1;if(b._clip){b._drawer.saveContext(d);var l=b.imageToViewportRectangle(b._clip,!0);l=l.rotate(-b.getRotation(!0),b._getRotationPoint(!0));var m=b._drawer.viewportToDrawerRectangle(l);f&&(m=m.times(f)),g&&(m=m.translate(g)),b._drawer.setClip(m,d),k=!0}if(b.placeholderFillStyle&&!1===b._hasOpaqueTile){var n=b._drawer.viewportToDrawerRectangle(b.getBounds(!0));f&&(n=n.times(f)),g&&(n=n.translate(g));var o=null;o="function"==typeof b.placeholderFillStyle?b.placeholderFillStyle(b,b._drawer.context):b.placeholderFillStyle,b._drawer.drawRectangle(n,o,d)}for(var q=c.length-1;q>=0;q--)e=c[q],b._drawer.drawTile(e,b._drawingHandler,d,f,g),e.beingDrawn=!0,b.viewer&&b.viewer.raiseEvent("tile-drawn",{tiledImage:b,tile:e});k&&b._drawer.restoreContext(d),f||(b.getRotation(!0)%360!=0&&b._drawer._restoreRotationChanges(d),0!==b.viewport.degrees&&b._drawer._restoreRotationChanges(d)),d&&(f&&(0!==b.viewport.degrees&&b._drawer._offsetForRotation({degrees:b.viewport.degrees,useSketch:!1}),b.getRotation(!0)%360!=0&&b._drawer._offsetForRotation({degrees:b.getRotation(!0),point:b.viewport.pixelFromPointNoRotate(b._getRotationPoint(!0),!0),useSketch:!1})),b._drawer.blendSketch({opacity:b.opacity,scale:f,translate:g,compositeOperation:b.compositeOperation,bounds:j}),f&&(b.getRotation(!0)%360!=0&&b._drawer._restoreRotationChanges(!1),0!==b.viewport.degrees&&b._drawer._restoreRotationChanges(!1))),f||0===b.viewport.degrees&&b.getRotation(!0)%360==0&&b._drawer.viewer.viewport.getFlip()&&b._drawer._flip(),p(b,c)}}function p(b,c){if(b.debugMode)for(var d=c.length-1;d>=0;d--){var e=c[d];try{b._drawer.drawDebugInfo(e,c.length,d,b)}catch(f){a.console.error(f)}}}a.TiledImage=function(b){var c=this;a.console.assert(b.tileCache,"[TiledImage] options.tileCache is required"),a.console.assert(b.drawer,"[TiledImage] options.drawer is required"),a.console.assert(b.viewer,"[TiledImage] options.viewer is required"),a.console.assert(b.imageLoader,"[TiledImage] options.imageLoader is required"),a.console.assert(b.source,"[TiledImage] options.source is required"),a.console.assert(!b.clip||b.clip instanceof a.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),a.EventSource.call(this),this._tileCache=b.tileCache,delete b.tileCache,this._drawer=b.drawer,delete b.drawer,this._imageLoader=b.imageLoader,delete b.imageLoader,b.clip instanceof a.Rect&&(this._clip=b.clip.clone()),delete b.clip;var d=b.x||0;delete b.x;var e=b.y||0;delete b.y,this.normHeight=b.source.dimensions.y/b.source.dimensions.x,this.contentAspectX=b.source.dimensions.x/b.source.dimensions.y;var f=1;b.width?(f=b.width,delete b.width,b.height&&(a.console.error("specifying both width and height to a tiledImage is not supported"),delete b.height)):b.height&&(f=b.height/this.normHeight,delete b.height);var g=b.fitBounds;delete b.fitBounds;var h=b.fitBoundsPlacement||OpenSeadragon.Placement.CENTER;delete b.fitBoundsPlacement;var i=b.degrees||0;delete b.degrees,a.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:a.DEFAULT_SETTINGS.springStiffness,animationTime:a.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:a.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:a.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:a.DEFAULT_SETTINGS.wrapVertical,immediateRender:a.DEFAULT_SETTINGS.immediateRender,blendTime:a.DEFAULT_SETTINGS.blendTime,alwaysBlend:a.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:a.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:a.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:a.DEFAULT_SETTINGS.iOSDevice,debugMode:a.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:a.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:a.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:a.DEFAULT_SETTINGS.placeholderFillStyle,opacity:a.DEFAULT_SETTINGS.opacity,preload:a.DEFAULT_SETTINGS.preload,compositeOperation:a.DEFAULT_SETTINGS.compositeOperation},b),this._preload=this.preload,
delete this.preload,this._fullyLoaded=!1,this._xSpring=new a.Spring({initial:d,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new a.Spring({initial:e,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new a.Spring({initial:f,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new a.Spring({initial:i,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),g&&this.fitBounds(g,h,!0),this._drawingHandler=function(b){c.viewer.raiseEvent("tile-drawing",a.extend({tiledImage:c},b))}},a.extend(a.TiledImage.prototype,a.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(a){a!==this._fullyLoaded&&(this._fullyLoaded=a,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=a.now(),this._needsDraw=!0},update:function(){var a=this._xSpring.update(),b=this._ySpring.update(),c=this._scaleSpring.update(),d=this._degreesSpring.update();return!!(a||b||c||d)&&(this._updateForScale(),this._needsDraw=!0,!0)},draw:function(){0!==this.opacity||this._preload?(this._midDraw=!0,this._updateViewport(),this._midDraw=!1):this._needsDraw=!1},destroy:function(){this.reset()},getBounds:function(a){return this.getBoundsNoRotate(a).rotate(this.getRotation(a),this._getRotationPoint(a))},getBoundsNoRotate:function(b){return b?new a.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new a.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return a.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(b){var c=this.getBoundsNoRotate(b);if(this._clip){var d=b?this._worldWidthCurrent:this._worldWidthTarget,e=d/this.source.dimensions.x,f=this._clip.times(e);c=new a.Rect(c.x+f.x,c.y+f.y,f.width,f.height)}return c.rotate(this.getRotation(b),this._getRotationPoint(b))},getContentSize:function(){return new a.Point(this.source.dimensions.x,this.source.dimensions.y)},_viewportToImageDelta:function(b,c,d){var e=d?this._scaleSpring.current.value:this._scaleSpring.target.value;return new a.Point(b*(this.source.dimensions.x/e),c*(this.source.dimensions.y*this.contentAspectX/e))},viewportToImageCoordinates:function(b,c,d){var e;return b instanceof a.Point?(d=c,e=b):e=new a.Point(b,c),e=e.rotate(-this.getRotation(d),this._getRotationPoint(d)),d?this._viewportToImageDelta(e.x-this._xSpring.current.value,e.y-this._ySpring.current.value):this._viewportToImageDelta(e.x-this._xSpring.target.value,e.y-this._ySpring.target.value)},_imageToViewportDelta:function(b,c,d){var e=d?this._scaleSpring.current.value:this._scaleSpring.target.value;return new a.Point(b/this.source.dimensions.x*e,c/this.source.dimensions.y/this.contentAspectX*e)},imageToViewportCoordinates:function(b,c,d){b instanceof a.Point&&(d=c,c=b.y,b=b.x);var e=this._imageToViewportDelta(b,c);return d?(e.x+=this._xSpring.current.value,e.y+=this._ySpring.current.value):(e.x+=this._xSpring.target.value,e.y+=this._ySpring.target.value),e.rotate(this.getRotation(d),this._getRotationPoint(d))},imageToViewportRectangle:function(b,c,d,e,f){var g=b;g instanceof a.Rect?f=c:g=new a.Rect(b,c,d,e);var h=this.imageToViewportCoordinates(g.getTopLeft(),f),i=this._imageToViewportDelta(g.width,g.height,f);return new a.Rect(h.x,h.y,i.x,i.y,g.degrees+this.getRotation(f))},viewportToImageRectangle:function(b,c,d,e,f){var g=b;b instanceof a.Rect?f=c:g=new a.Rect(b,c,d,e);var h=this.viewportToImageCoordinates(g.getTopLeft(),f),i=this._viewportToImageDelta(g.width,g.height,f);return new a.Rect(h.x,h.y,i.x,i.y,g.degrees-this.getRotation(f))},viewerElementToImageCoordinates:function(a){var b=this.viewport.pointFromPixel(a,!0);return this.viewportToImageCoordinates(b)},imageToViewerElementCoordinates:function(a){var b=this.imageToViewportCoordinates(a);return this.viewport.pixelFromPoint(b,!0)},windowToImageCoordinates:function(a){var b=a.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(b)},imageToWindowCoordinates:function(a){return this.imageToViewerElementCoordinates(a).plus(OpenSeadragon.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(b){var c=this._scaleSpring.current.value;return b=b.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new a.Rect((b.x-this._xSpring.current.value)/c,(b.y-this._ySpring.current.value)/c,b.width/c,b.height/c,b.degrees)},viewportToImageZoom:function(a){return this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x*a},imageToViewportZoom:function(a){return a/(this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x)},setPosition:function(a,b){var c=this._xSpring.target.value===a.x&&this._ySpring.target.value===a.y;if(b){if(c&&this._xSpring.current.value===a.x&&this._ySpring.current.value===a.y)return;this._xSpring.resetTo(a.x),this._ySpring.resetTo(a.y),this._needsDraw=!0}else{if(c)return;this._xSpring.springTo(a.x),this._ySpring.springTo(a.y),this._needsDraw=!0}c||this._raiseBoundsChange()},setWidth:function(a,b){this._setScale(a,b)},setHeight:function(a,b){this._setScale(a/this.normHeight,b)},fitBounds:function(b,c,d){c=c||a.Placement.CENTER;var e=a.Placement.properties[c],f=this.contentAspectX,g=0,h=0,i=1,j=1;if(this._clip&&(f=this._clip.getAspectRatio(),i=this._clip.width/this.source.dimensions.x,j=this._clip.height/this.source.dimensions.y,b.getAspectRatio()>f?(g=this._clip.x/this._clip.height*b.height,h=this._clip.y/this._clip.height*b.height):(g=this._clip.x/this._clip.width*b.width,h=this._clip.y/this._clip.width*b.width)),b.getAspectRatio()>f){var k=b.height/j,l=0;e.isHorizontallyCentered?l=(b.width-b.height*f)/2:e.isRight&&(l=b.width-b.height*f),this.setPosition(new a.Point(b.x-g+l,b.y-h),d),this.setHeight(k,d)}else{var m=b.width/i,n=0;e.isVerticallyCentered?n=(b.height-b.width/f)/2:e.isBottom&&(n=b.height-b.width/f),this.setPosition(new a.Point(b.x-g,b.y-h+n),d),this.setWidth(m,d)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(b){a.console.assert(!b||b instanceof a.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),b instanceof a.Rect?this._clip=b.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getOpacity:function(){return this.opacity},setOpacity:function(a){a!==this.opacity&&(this.opacity=a,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(a){this._preload=!!a,this._needsDraw=!0},getRotation:function(a){return a?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(a,b){this._degreesSpring.target.value===a&&this._degreesSpring.isAtTargetValue()||(b?this._degreesSpring.resetTo(a):this._degreesSpring.springTo(a),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(a){return this.getBoundsNoRotate(a).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(a){a!==this.compositeOperation&&(this.compositeOperation=a,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},_setScale:function(a,b){var c=this._scaleSpring.target.value===a;if(b){if(c&&this._scaleSpring.current.value===a)return;this._scaleSpring.resetTo(a),this._updateForScale(),this._needsDraw=!0}else{if(c)return;this._scaleSpring.springTo(a),this._updateForScale(),this._needsDraw=!0}c||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var a=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),b=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,c=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(b/this.minPixelRatio)/Math.log(2))));return c=Math.max(c,this.source.minLevel||0),a=Math.min(a,c),{lowestLevel:a,highestLevel:c}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};this.lastDrawn.length>0;){this.lastDrawn.pop().beingDrawn=!1}var c=this.viewport,d=this._viewportToTiledImageRectangle(c.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var f=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(null===(d=d.intersection(f)))return}for(var g=this._getLevelsInterval(),h=g.lowestLevel,i=g.highestLevel,k=null,l=!1,m=a.now(),n=i;n>=h;n--){var p=!1,q=c.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(n),!0).x*this._scaleSpring.current.value;if(n===h||!l&&q>=this.minPixelRatio)p=!0,l=!0;else if(!l)continue;var r=c.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(n),!1).x*this._scaleSpring.current.value,s=c.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,t=this.immediateRender?1:s;if(k=b(this,l,p,n,Math.min(1,(q-.5)/.5),t/Math.abs(t-r),d,m,k),j(this.coverage,n))break}o(this,this.lastDrawn),k&&!k.context2D?(e(this,k,m),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(0===this._tilesLoading)},_getCornerTiles:function(b,c,d){var e,f;this.wrapHorizontal?(e=a.positiveModulo(c.x,1),f=a.positiveModulo(d.x,1)):(e=Math.max(0,c.x),f=Math.min(1,d.x));var g,h,i=1/this.source.aspectRatio;this.wrapVertical?(g=a.positiveModulo(c.y,i),h=a.positiveModulo(d.y,i)):(g=Math.max(0,c.y),h=Math.min(i,d.y));var j=this.source.getTileAtPoint(b,new a.Point(e,g)),k=this.source.getTileAtPoint(b,new a.Point(f,h)),l=this.source.getNumTiles(b);return this.wrapHorizontal&&(j.x+=l.x*Math.floor(c.x),k.x+=l.x*Math.floor(d.x)),this.wrapVertical&&(j.y+=l.y*Math.floor(c.y/i),k.y+=l.y*Math.floor(d.y/i)),{topLeft:j,bottomRight:k}}})}(OpenSeadragon),function(a){var b=function(b){a.console.assert(b,"[TileCache.cacheTile] options is required"),a.console.assert(b.tile,"[TileCache.cacheTile] options.tile is required"),a.console.assert(b.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=b.tile,this.tiledImage=b.tiledImage},c=function(b){a.console.assert(b,"[ImageRecord] options is required"),a.console.assert(b.image,"[ImageRecord] options.image is required"),this._image=b.image,this._tiles=[]};c.prototype={destroy:function(){this._image=null,this._renderedContext=null,this._tiles=null},getImage:function(){return this._image},getRenderedContext:function(){if(!this._renderedContext){var a=document.createElement("canvas");a.width=this._image.width,a.height=this._image.height,this._renderedContext=a.getContext("2d"),this._renderedContext.drawImage(this._image,0,0),this._image=null}return this._renderedContext},setRenderedContext:function(b){a.console.error("ImageRecord.setRenderedContext is deprecated. The rendered context should be created by the ImageRecord itself when calling ImageRecord.getRenderedContext."),this._renderedContext=b},addTile:function(b){a.console.assert(b,"[ImageRecord.addTile] tile is required"),this._tiles.push(b)},removeTile:function(b){for(var c=0;c<this._tiles.length;c++)if(this._tiles[c]===b)return void this._tiles.splice(c,1);a.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",b)},getTileCount:function(){return this._tiles.length}},a.TileCache=function(b){b=b||{},this._maxImageCacheCount=b.maxImageCacheCount||a.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},a.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(d){a.console.assert(d,"[TileCache.cacheTile] options is required"),a.console.assert(d.tile,"[TileCache.cacheTile] options.tile is required"),a.console.assert(d.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),a.console.assert(d.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var e=d.cutoff||0,f=this._tilesLoaded.length,g=this._imagesLoaded[d.tile.cacheKey];if(g||(a.console.assert(d.image,"[TileCache.cacheTile] options.image is required to create an ImageRecord"),g=this._imagesLoaded[d.tile.cacheKey]=new c({image:d.image}),this._imagesLoadedCount++),g.addTile(d.tile),d.tile.cacheImageRecord=g,this._imagesLoadedCount>this._maxImageCacheCount){for(var h,i,j,k,l,m,n=null,o=-1,p=null,q=this._tilesLoaded.length-1;q>=0;q--)m=this._tilesLoaded[q],h=m.tile,h.level<=e||h.beingDrawn||(n?(k=h.lastTouchTime,i=n.lastTouchTime,l=h.level,j=n.level,(k<i||k==i&&l>j)&&(n=h,o=q,p=m)):(n=h,o=q,p=m));n&&o>=0&&(this._unloadTile(p),f=o)}this._tilesLoaded[f]=new b({tile:d.tile,tiledImage:d.tiledImage})},clearTilesFor:function(b){a.console.assert(b,"[TileCache.clearTilesFor] tiledImage is required");for(var c,d=0;d<this._tilesLoaded.length;++d)c=this._tilesLoaded[d],c.tiledImage===b&&(this._unloadTile(c),this._tilesLoaded.splice(d,1),d--)},getImageRecord:function(b){return a.console.assert(b,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[b]},_unloadTile:function(b){a.console.assert(b,"[TileCache._unloadTile] tileRecord is required");var c=b.tile,d=b.tiledImage;c.unload(),c.cacheImageRecord=null;var e=this._imagesLoaded[c.cacheKey];e.removeTile(c),e.getTileCount()||(e.destroy(),delete this._imagesLoaded[c.cacheKey],this._imagesLoadedCount--),d.viewer.raiseEvent("tile-unloaded",{tile:c,tiledImage:d})}}}(OpenSeadragon),function(a){a.World=function(b){var c=this;a.console.assert(b.viewer,"[World] options.viewer is required"),a.EventSource.call(this),this.viewer=b.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(a){c._autoRefigureSizes?c._figureSizes():c._needsSizesFigured=!0},this._figureSizes()},a.extend(a.World.prototype,a.EventSource.prototype,{addItem:function(b,c){if(a.console.assert(b,"[World.addItem] item is required"),a.console.assert(b instanceof a.TiledImage,"[World.addItem] only TiledImages supported at this time"),c=c||{},void 0!==c.index){var d=Math.max(0,Math.min(this._items.length,c.index));this._items.splice(d,0,b)}else this._items.push(b);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,b.addHandler("bounds-change",this._delegatedFigureSizes),b.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:b})},getItemAt:function(b){return a.console.assert(void 0!==b,"[World.getItemAt] index is required"),this._items[b]},getIndexOfItem:function(b){return a.console.assert(b,"[World.getIndexOfItem] item is required"),a.indexOf(this._items,b)},getItemCount:function(){return this._items.length},setItemIndex:function(b,c){a.console.assert(b,"[World.setItemIndex] item is required"),a.console.assert(void 0!==c,"[World.setItemIndex] index is required");var d=this.getIndexOfItem(b);if(c>=this._items.length)throw new Error("Index bigger than number of layers.");c!==d&&-1!==d&&(this._items.splice(d,1),this._items.splice(c,0,b),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:b,previousIndex:d,newIndex:c}))},removeItem:function(b){a.console.assert(b,"[World.removeItem] item is required");var c=a.indexOf(this._items,b);-1!==c&&(b.removeHandler("bounds-change",this._delegatedFigureSizes),b.removeHandler("clip-change",this._delegatedFigureSizes),b.destroy(),this._items.splice(c,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(b))},removeAll:function(){this.viewer._cancelPendingImages();var a,b;for(b=0;b<this._items.length;b++)a=this._items[b],a.removeHandler("bounds-change",this._delegatedFigureSizes),a.removeHandler("clip-change",this._delegatedFigureSizes),a.destroy();var c=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,b=0;b<c.length;b++)a=c[b],this._raiseRemoveItem(a)},resetItems:function(){for(var a=0;a<this._items.length;a++)this._items[a].reset()},update:function(){for(var a=!1,b=0;b<this._items.length;b++)a=this._items[b].update()||a;return a},draw:function(){for(var a=0;a<this._items.length;a++)this._items[a].draw();this._needsDraw=!1},needsDraw:function(){for(var a=0;a<this._items.length;a++)if(this._items[a].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(a){this._autoRefigureSizes=a,a&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(b){b=b||{};var c,d=b.immediately||!1,e=b.layout||a.DEFAULT_SETTINGS.collectionLayout,f=b.rows||a.DEFAULT_SETTINGS.collectionRows,g=b.columns||a.DEFAULT_SETTINGS.collectionColumns,h=b.tileSize||a.DEFAULT_SETTINGS.collectionTileSize,i=b.tileMargin||a.DEFAULT_SETTINGS.collectionTileMargin,j=h+i;c=!b.rows&&g?g:Math.ceil(this._items.length/f);var k,l,m,n,o,p=0,q=0;this.setAutoRefigureSizes(!1);for(var r=0;r<this._items.length;r++)r&&r%c==0&&("horizontal"===e?(q+=j,p=0):(p+=j,q=0)),k=this._items[r],l=k.getBounds(),m=l.width>l.height?h:h*(l.width/l.height),n=m*(l.height/l.width),o=new a.Point(p+(h-m)/2,q+(h-n)/2),k.setPosition(o,d),k.setWidth(m,d),"horizontal"===e?p+=j:q+=j;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var b=this._homeBounds?this._homeBounds.clone():null,c=this._contentSize?this._contentSize.clone():null,d=this._contentFactor||0;if(this._items.length){var e=this._items[0],f=e.getBounds();this._contentFactor=e.getContentSize().x/f.width;for(var g=e.getClippedBounds().getBoundingBox(),h=g.x,i=g.y,j=g.x+g.width,k=g.y+g.height,l=1;l<this._items.length;l++)e=this._items[l],f=e.getBounds(),this._contentFactor=Math.max(this._contentFactor,e.getContentSize().x/f.width),g=e.getClippedBounds().getBoundingBox(),h=Math.min(h,g.x),i=Math.min(i,g.y),j=Math.max(j,g.x+g.width),k=Math.max(k,g.y+g.height);this._homeBounds=new a.Rect(h,i,j-h,k-i),this._contentSize=new a.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}else this._homeBounds=new a.Rect(0,0,1,1),this._contentSize=new a.Point(1,1),this._contentFactor=1;this._contentFactor===d&&this._homeBounds.equals(b)&&this._contentSize.equals(c)||this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(a){this.raiseEvent("remove-item",{item:a})}})}(OpenSeadragon);